

<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>ç¥æ€</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Android åœ–ç¤º -->
    <link rel="icon" sizes="192x192" href="https://i.ibb.co/VYSvrs7Z/image-27-5435354.png">
    <link rel="icon" sizes="144x144" href="https://i.ibb.co/VYSvrs7Z/image-27-5435354.png">
    <link rel="icon" sizes="96x96" href="https://i.ibb.co/VYSvrs7Z/image-27-5435354.png">
    <!-- iOS åœ–ç¤º -->
    <link rel="apple-touch-icon" sizes="180x180" href="https://i.ibb.co/VYSvrs7Z/image-27-5435354.png">
    <link rel="apple-touch-icon" sizes="152x152" href="https://i.ibb.co/VYSvrs7Z/image-27-5435354.png">
    <link rel="apple-touch-icon" sizes="120x120" href="https://i.ibb.co/VYSvrs7Z/image-27-5435354.png">
    
    <style>


        body {
            font-family: 'Noto Serif TC', 'cwTeXHei', 'cwTeXFangSong', 'cwTeXKai', 'cwTeXMing', 'PingFang TC', 'Microsoft JhengHei', serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: url('https://i.ibb.co/nNMDqGJt/4.png') center/cover fixed;
            padding-bottom: 60px; /* ç‚ºé é¢å…§å®¹è¨­ç½®åº•éƒ¨å…§é‚Šè·ï¼Œé¿å…è¢«éŸ³æ¨‚æ’­æ”¾å™¨é®æ“‹ */
        }
        h1 {
            text-align: center;
            color: #333;
        }


 .copyright-footer {
            position: fixed;
            bottom: 0;
            right: 0;
            padding: 5px 10px;
            background-color: #f1f1f1;
        }

        .copyright-footer p {
            margin: 0;
            font-size: 14px;
        }

        @media (max-width: 600px) {
            .copyright-footer p {
                font-size: 12px;
            }
        }

        
/* ç¢ºä¿æ¨™é¡Œä¸è¢«èƒŒæ™¯å½±éŸ¿ */
.title-container {
    background: none;
    padding: 0;
}

.title-container {
    position: relative;
    margin-bottom: 3rem;
    text-align: center;
}
        .title-text {
    display: block;
    font-size: 3rem;
    color: #d1f2eb;
    text-shadow: 3px 3px 0 #7f8c8d;
    letter-spacing: 4px;
    animation: titleFloat 3s ease-in-out infinite;
}

        
        .box {
    background: rgba(220, 220, 220, 0.96);
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    padding: 20px;
    margin: 15px 0;
}
        button {
            background: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.3s;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
        .save-btn {
            background: #28a745;
        }
        .save-btn:hover {
            background: #218838;
        }
        .clear-btn {
            background: #dc3545;
        }
        .clear-btn:hover {
            background: #c82333;
        }
        select, textarea, input[type="text"] {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }
        textarea {
            resize: vertical;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
        }
        th, td {
            border: 1px solid #ccc;
            padding: 10px;
            text-align: left;
            vertical-align: top;
            word-break: break-word;
        }
        th {
            background: #f0f0f0;
        }
        .table-container {
            overflow-x: auto;
            width: 100%;
        }
        .table-container table {
            width: 100%;
            border-collapse: collapse;
        }
        .table-container th, .table-container td {
            border: 1px solid #ccc;
            padding: 10px;
            text-align: left;
            vertical-align: top;
            word-break: break-word;
        }
        .table-container th:first-child, .table-container td:first-child {
            min-width: 50px;
        }
        .table-container th:nth-child(2), .table-container td:nth-child(2),
        .table-container th:nth-child(3), .table-container td:nth-child(3) {
            min-width: 100px;
        }
        .table-container th:nth-child(4), .table-container td:nth-child(4),
        .table-container th:nth-child(5), .table-container td:nth-child(5) {
            min-width: 150px;
        }

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.tool-btn {
    animation: fadeIn 0.2s ease-in-out forwards;
    opacity: 0;
}



#expandToolsBtn {
    background-color: #7fb3d5;
}

#expandToolsBtn:hover {
    background-color: #aed6f1;
}


#toolsContainer {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

#toolsList {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
}

#toolsList button {
opacity: 0;
    margin: 10px 0;
    padding: 10px 20px;
    font-size: 16px;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

#closeToolsBtn {
    position: absolute;
    top: 20px;
    right: 20px;
    background-color: #dc3545;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 4px;
    cursor: pointer;
}

#toggleOverviewBtn {
            background-color: #A9A9A9; /* ç°è‰²èƒŒæ™¯ */
            color: white; /* ç™½è‰²æ–‡å­— */
        }

        #toggleOverviewBtn:hover {
            background-color: #808080; /* æ‡¸åœæ™‚æ·±ç°è‰² */
        }
        
        #writingBtn{
            background-color: #007bff;
        }
        #argumentBtn {
    background-color: #800080; /* å°‡ã€Œè­°è«–ã€æŒ‰éµè¨­ç‚ºç´«è‰² */
}
        #readingBtn {
            background-color: #28a745;
        }
        #booksBtn {
            background-color: #ffc107;
        }
        #expandBtn {
            background-color: #dc3545;
        }
        #writingBtn:hover {
            background-color: #0056b3;
        }

#manuscriptPaperBtn {
    background-color: #17a2b8;
}
#manuscriptPaperBtn:hover {
    background-color: #138496;
}
        
        #argumentBtn:hover {
    background-color: #4B0082; /* æ‡¸åœæ™‚è®Šç‚ºæ·±ç´«è‰² */
}
        #readingBtn:hover {
            background-color: #218838;
        }
        #booksBtn:hover {
            background-color: #e0a800;
        }
        #expandBtn:hover {
            background-color: #c82333;
        }
        #chatHistory {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #ccc;
            padding: 10px;
            margin-bottom: 10px;
            background-color: #f9f9f9;
        }
        .user-message {
            text-align: right;
            color: blue;
            margin: 5px 0;
            padding: 5px;
            background-color: #e6f7ff;
            border-radius: 5px;
        }
        .ai-message {
            text-align: left;
            color: green;
            margin: 5px 0;
            padding: 5px;
            background-color: #f0fff0;
            border-radius: 5px;
        }
        #writingContainer, #readingContainer, #booksContainer, #expandContainer, #argumentContainer {
            display: none;
        }
        #argumentTopicSelectionArea, #argumentCustomTopicArea, #argumentWritingArea, #argumentGuideArea {
            margin-top: 10px;
        }



#music-player {
    position: fixed;
    bottom: 0px;
    left: 0;
    width: 100%;
    background-color: #444;
    color: white;
    padding: 10px;
    display: none; /* é è¨­éš±è— */
    align-items: center;
    justify-content: space-between;
    z-index: 1002;
    box-sizing: border-box;
    font-size: 14px;
}
    #music-player.hidden {
        display: none;
    }
    #music-player .controls {
        display: flex;
        align-items: center;
        flex-shrink: 0;
    }
    #music-player .controls button {
        background: none;
        border: none;
        color: white;
        font-size: 20px;
        cursor: pointer;
        margin-right: 10px;
    }
    #music-player .controls select {
        background: #555;
        color: white;
        border: none;
        padding: 5px;
        border-radius: 3px;
        max-width: 150px;
    }
    #music-player .progress {
        flex: 1;
        margin: 0 10px;
        display: flex;
        align-items: center;
    }
    #music-player .progress input[type="range"] {
        width: 100%;
    }
    #music-player .mode {
        margin-left: 10px;
        flex-shrink: 0;
    }
    #music-player .mode select {
        background: #555;
        color: white;
        border: none;
        padding: 5px;
        border-radius: 3px;
    }
    #music-player .hide-btn {
        background: none;
        border: none;
        color: white;
        font-size: 20px;
        cursor: pointer;
        margin-left: 10px;
    }
    #show-player {
    position: fixed;
    bottom: 25px; /* ä¸Šç§»è‡³ 30pxï¼Œå¯æ ¹æ“šéœ€è¦èª¿æ•´ */
    right: 10px;
    background: #444;
    color: white;
    border: none;
    padding: 10px;
    border-radius: 50%;
    cursor: pointer;
    z-index: 1003;
    display: block; /* åˆå§‹é¡¯ç¤º */
    font-size: 16px;
}
   @media (max-width: 600px) {
    #music-player {
        flex-wrap: wrap;
        padding: 5px;
    }
    #music-player .controls select {
        max-width: 100px;
        font-size: 12px;
    }
    #music-player .mode select {
        font-size: 12px;
    }
    #progress-bar-music {
        height: 10px;
        -webkit-appearance: none;
        appearance: none;
        background: #ddd;
        border-radius: 5px;
    }
    #progress-bar-music::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 20px;
        height: 20px;
        background: #007bff;
        border-radius: 50%;
        cursor: pointer;
    }
    #progress-bar-music::-moz-range-thumb {
        width: 20px;
        height: 20px;
        background: #007bff;
        border-radius: 50%;
        cursor: pointer;
    }
    #music-player .controls select, #music-player .mode select {
        max-width: 80px;
        padding: 3px;
        font-size: 12px;
    }
    #music-player .controls button, #music-player .hide-btn {
        padding: 5px;
        font-size: 16px;
    }
}

        
    </style>
</head>
<body>
   

     <div class="title-container">
    <h1>
        <span class="title-text">ç¥æ€</span>
    </h1>
</div>


<div id="hitokoto-container" class="box">
    <div id="hitokoto"></div>
    <div id="hitokoto-footer">
        <span id="hitokoto-from"></span>
        <button id="refresh-btn"><i class="fas fa-sync-alt"></i></button>
    </div>
</div>



<style>
    #hitokoto-container {
        background: rgba(220, 220, 220, 0.96);
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        padding: 16px;
        margin: 15px 0;
        text-align: center;
        max-width: 800px;
        position: relative;
    }

    #hitokoto {
        font-size: 21px;
        font-style: italic;
        color: #333;
        margin-bottom: 10px;
    }

    #hitokoto p {
        margin: 5px 0;
    }

    #hitokoto-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 10px;
    }

    #hitokoto-from {
        font-size: 16px;
        color: #666;
    }

    #refresh-btn {
        background: none;
        border: none;
        cursor: pointer;
        font-size: 20px;
        color: #666;
        transition: color 0.3s;
        padding: 0;
        margin: 0;
    }

    #refresh-btn:hover {
        color: #000;
    }
</style>

<script src="https://cdn.jsdelivr.net/npm/opencc-js@1.0.5/dist/umd/full.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const converter = OpenCC.Converter({ from: 'cn', to: 'tw' });
        const hitokotoElement = document.getElementById('hitokoto');
        const hitokotoFromElement = document.getElementById('hitokoto-from');
        const refreshBtn = document.getElementById('refresh-btn');

        function fetchHitokoto() {
            fetch('https://v1.hitokoto.cn/?c=d&c=i&c=k&encode=json')
                .then(response => response.json())
                .then(data => {
                    if (data.from.includes('é­”é“ç¥–å¸«')) {
                        fetchHitokoto(); // å¦‚æœä¾†æºæ˜¯ã€Œé­”é“ç¥–å¸«ã€ï¼Œé‡æ–°ç²å–åè¨€
                    } else {
                        const convertedHitokoto = converter(data.hitokoto);
                        const convertedFrom = converter(data.from);
                        const convertedFromWho = data.from_who ? converter(data.from_who) : 'ä½šå';
                        hitokotoElement.innerHTML = `<p>${convertedHitokoto}</p>`;
                        hitokotoFromElement.innerHTML = `â€”â€” ${convertedFromWho} ã€Š${convertedFrom}ã€‹`;
                    }
                })
                .catch(error => {
                    console.error('ç²å–åè¨€å¤±æ•—:', error);
                    hitokotoElement.innerHTML = '<p>ç²å–åè¨€å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚</p>';
                    hitokotoFromElement.innerHTML = '';
                });
        }

        fetchHitokoto();
        refreshBtn.addEventListener('click', fetchHitokoto);
    });
</script>

    
    

   <!-- å·¥å…·åŠŸèƒ½æ¦‚è¦½æŒ‰éˆ• -->
<div class="box">
    <button id="toggleOverviewBtn" onclick="toggleOverview()">é¡¯ç¤ºã€ŒåŠŸèƒ½æ¦‚è¦½ã€</button>
</div>

<!-- å·¥å…·åŠŸèƒ½æ¦‚è¦½ï¼ˆåˆå§‹éš±è—ï¼‰ -->
<div id="overviewContainer" class="box" style="display: none;">
    <h2>åŠŸèƒ½æ¦‚è¦½</h2>

<div style="position:relative; width:100%; height:0px; padding-bottom:62.222%"><iframe allow="fullscreen" allowfullscreen height="100%" src="https://streamable.com/e/jzhzr1?loop=0" width="100%" style="border:none; width:100%; height:100%; position:absolute; left:0px; top:0px; bottom:2px; overflow:hidden;"></iframe></div>

    
    
    <p>æœ¬å·¥å…·æ—¨åœ¨å”åŠ©åŒå­¸ç·´ç¿’å¯«ä½œå·å’Œé–±è®€å·ï¼Œä¸¦æä¾›èª²å¤–æ›¸ç±è¨è«–ã€‚ä»¥ä¸‹ç‚ºä¸»è¦åŠŸèƒ½ï¼š</p>
    <table>
        <tr>
            <th>ç¯„ç–‡</th>
            <th>åŠŸèƒ½ä»‹ç´¹</th>
        </tr>
        <tr>
            <td>é–±è®€</td>
            <td>æä¾›é»è©•å’ŒæŒ‡å¼•åŠŸèƒ½ï¼Œå¯è²¼ä¸Šé–±è®€ç¯‡ç« å’Œé¡Œç›®ï¼Œç²å–AIçš„é»è©•æˆ–ç­”é¡ŒæŒ‡å¼•ã€‚</td>
        </tr>
        <tr>
            <td>æ•˜äº‹æŠ’æƒ…</td>
            <td>æä¾›å¤§ç¶±ã€ç‰‡æ®µæå¯«/å…¨æ–‡å¯«ä½œé»è©•å’Œæ•˜äº‹ç‰©è±¡æŒ‡å¼•åŠŸèƒ½ï¼Œå¯é¸æ“‡ç”Ÿæˆæˆ–è‡ªè¨‚é¡Œç›®ï¼Œä¸¦ç²å–AIé»è©•å’Œå»ºè­°ã€‚</td>
        </tr>
        <tr>
            <td>è­°è«–</td>
            <td>æä¾›å¤§ç¶±ã€ç‰‡æ®µå¯«ä½œ/å…¨æ–‡å¯«ä½œé»è©•å’ŒæŒ‡å¼•åŠŸèƒ½ï¼Œå¹«åŠ©ç·´ç¿’è­°è«–å¯«ä½œã€‚</td>
        </tr>
        <tr>
            <td>æ•´åˆæ‹“å±•</td>
            <td>æä¾›é»è©•å’ŒæŒ‡å¼•åŠŸèƒ½ï¼Œå¯é¸æ“‡ç”Ÿæˆæˆ–è‡ªè¨‚é¡Œç›®ï¼Œä¸¦ç²å–AIçš„é»è©•ã€å»ºè­°å’Œæ”¹å¯«ã€‚</td>
        </tr>
        <tr>
            <td>èª²å¤–æ›¸ç±</td>
            <td>è¨­æœ‰AIèŠå¤©å®¤ï¼Œä¾›ç”¨å®¶èˆ‡AIè¨è«–èª²å¤–æ›¸ç±ï¼Œå¼•å°æ·±å…¥æ€è€ƒã€‚</td>
        </tr>
<tr>
            <td>æ™ºèƒ½åŸç¨¿ç´™</td>
            <td>æä¾›é›»å­åŸç¨¿ç´™ï¼Œä¸¦è¨­æœ‰AIç­”æƒ‘åŠŸèƒ½ã€‚</td>
        </tr>
        <tr>
            <td>AIæ“¬é¡Œ</td>
            <td>ç”±AIæ“¬è¨­é–±è®€å·åŠå¯«ä½œå·çš„é¡Œç›®ã€‚</td>
        </tr>
          <tr>
            <td>ç¢ç‰</td>
            <td>ç”¨å®¶å¯åœ¨PDFåŠåœ–ç‰‡æª”æ¡ˆå³é‚Šä½œæ—æ‰¹æˆ–å‚™è¨»ã€‚</td>
        </tr>
        <tr>
            <td>æ‰‹å¯«æ–‡å­—è½‰æ›é›»è…¦æ–‡å­—</td>
            <td>i2OCR æ˜¯å…è²»çš„ç·šä¸Šå…‰å­¸å­—å…ƒè¾¨è­˜ (OCR) è»Ÿé«”ï¼Œå¯å¾åœ–åƒæˆ–PDFæ–‡ä»¶ä¸­æå–æ–‡å­—ã€‚</td>
        </tr>
         <tr>
            <td>å¸™é›²</td>
            <td>ä»¥Google driveå»ºè¨­çš„é›²ç«¯å¹³è‡ºï¼Œå¯ä¾›ç”¨å®¶ç¹³äº¤èª²æ¥­ã€æª¢é–±ç¹³äº¤ç´€éŒ„åŠç€è¦½å€‹äººèª²æ¥­æ–‡ä»¶å¤¾ï¼Œè¨­æœ‰è‡ªå‹•ç”Ÿæˆç¹³äº¤èª²æ¥­ç´€éŒ„ã€æ­¸é¡æ–‡ä»¶åŠè¿½æ”¶åŠŸèª²çš„åŠŸèƒ½ã€‚</td>
        </tr>
 <tr>
            <td>è‡ªå­¸è³‡æº</td>
            <td>æä¾›å¤§é‡è‡ªå­¸ä¸­æ–‡çš„è³‡æºï¼ŒåŒ…æ‹¬æ•™å­¸å½±ç‰‡ã€ä½³ä½œåŠå„å·ç­†è¨˜ç­‰ã€‚</td>
        </tr>

<tr>
            <td>èªå¼ˆéŒ„</td>
            <td>ä¸€æ¬¾åŒæ™‚æä¾›å–®æ©ŸåŠç·šä¸Šå°æˆ°æ¨¡å¼çš„éŠæˆ²ï¼Œé¡Œç›®ç¯„åœæ¶µè“‹åˆä¸­æ¸¬è€ƒèª²æ–‡åŠé«˜ä¸­åäºŒç¯‡ç¯„æ–‡ã€‚</td>
        </tr>
<tr>
            <td>èƒŒæ›¸ç¥å™¨</td>
            <td>è¨­æœ‰å€’è¨ˆæ™‚åŠŸèƒ½ï¼Œç¨‹å¼æª¢æ¸¬åˆ°äººè²æœƒé‡ç½®æ™‚è¨ˆã€‚</td>
        </tr>
        
    </table>
</div>

<!-- å·¥å…·é¸æ“‡ -->
<div class="box">
    <h2>é¸æ“‡å·¥å…·ï¼š</h2>
    <button id="expandToolsBtn">å±•é–‹å·¥å…·</button>
    <div id="toolsContainer" style="display: none;">
        <div id="toolsList">
    <button id="manuscriptPaperBtn">ğŸ–¥æ™ºèƒ½åŸç¨¿ç´™</button>
    <button id="aiGeneratorBtn" style="background-color: #008080;">ğŸ“AIæ“¬é¡Œ</button>
    <button id="zhuoyuBtn" style="background-color: #800000;">âœï¸ç¢ç‰</button>
    <button id="ocrBtn" style="background-color: #fd7e14;">âœæ‰‹å¯«æ–‡å­—è½‰æ›é›»è…¦æ–‡å­—</button>
<button id="zhiyunBtn" style="background-color: #5d6d7e;">â˜ï¸å¸™é›²</button>
<button id="selfLearningBtn" style="background-color: #20c997;">ğŸ“–è‡ªå­¸è³‡æº</button>
<button id="yuyiluBtn" style="background-color: #a9cce3;">ğŸ®èªå¼ˆéŒ„</button>

<div id="yuyiluMenu" style="display: none; position: absolute; background: white; border: 1px solid #ccc; padding: 10px; z-index: 1001;">
        <a href="https://kenchan20141.github.io/f1chinese/" target="_blank">ä¸­ä¸€</a><br>
        <a href="https://kenchan20141.github.io/chinese2/" target="_blank">ä¸­äºŒ</a><br>
        <a href="https://kenchan20141.github.io/chinese3/" target="_blank">ä¸­ä¸‰</a><br>
        <a href="https://kenchan20141.github.io/f4chinese/" target="_blank">ä¸­å››</a><br>
        <a href="https://kenchan20141.github.io/chinese/" target="_blank">ä¸­äº”</a><br>
        <a href="https://kenchan20141.github.io/chinese6/" target="_blank">ä¸­å…­</a>
    </div>

<button id="beishuBtn" style="background-color: #c39bd3;">â±èƒŒæ›¸ç¥å™¨</button>
<button id="sansiBtn" style="background-color: #5e93cc;">ğŸ–¥ï¸ç¥æ€(å‚™ç”¨ï¼‰</button>
</div>
       <button id="closeToolsBtn"><i class="fas fa-times"></i></button>
    </div>
</div>
    
   <!-- ç¯„ç–‡é¸æ“‡ -->
<div class="box">
    <h2>é¸æ“‡ç¯„ç–‡ï¼š</h2>
    <button id="readingBtn">ğŸ“•é–±è®€</button>
    <button id="writingBtn">âœæ•˜äº‹æŠ’æƒ…</button>
    <button id="argumentBtn">ğŸ“‹è­°è«–</button>
    <button id="expandBtn">ğŸ“‚æ•´åˆæ‹“å±•</button>
    <button id="booksBtn">ğŸ“šèª²å¤–æ›¸ç±</button>
</div>



    <!-- å¯«ä½œå®¹å™¨ -->
    
    <div id="writingContainer" class="box">
        <h2>æ•˜äº‹æŠ’æƒ…</h2>
        <div style="position:relative; width:100%; height:0px; padding-bottom:62.222%"><iframe allow="fullscreen" allowfullscreen height="100%" src="https://streamable.com/e/lke2eo?loop=0" width="100%" style="border:none; width:100%; height:100%; position:absolute; left:0px; top:0px; bottom:2px; overflow:hidden;"></iframe></div>
        <label for="writingType">é¸æ“‡åŠŸèƒ½ï¼š</label>
        <select id="writingType" onchange="toggleWritingType()">
            <option value="å¤§ç¶±">å¤§ç¶±</option>
            <option value="ç‰‡æ®µæå¯«">ç‰‡æ®µæå¯«/å…¨æ–‡å¯«ä½œ</option>
            <option value="æ•˜äº‹ç‰©è±¡">æ•˜äº‹ç‰©è±¡</option>
        </select>
        <div id="outlineStructureArea" style="display: none;">
            <label for="structure">é¸æ“‡å¤§ç¶±çµæ§‹ï¼š</label>
            <select id="structure" onchange="generateOutlineTable()">
                <option value="fourPart">èµ·æ‰¿è½‰åˆ</option>
                <option value="threeLine">ä¸‰ç·š</option>
            </select>
        </div>
        <div id="topicSelectionArea">
            <label for="topicOption">é¸æ“‡é¡Œç›®æ–¹å¼ï¼š</label>
            <select id="topicOption" onchange="toggleTopicInput()">
                <option value="generate">ç”Ÿæˆé¡Œç›®</option>
                <option value="custom">è‡ªè¨‚é¡Œç›®</option>
            </select>
            <div id="generateTopicArea">
                <button onclick="generateTopic()">ç”Ÿæˆå¯«ä½œé¡Œç›®</button>
            </div>
            <div id="customTopicArea" style="display: none;"></div>
            <div id="topicResult"></div>
        </div>
        <div id="narrativeElementsArea" style="display: none;">
            <label for="narrativeElements">è«‹è¼¸å…¥æ‚¨çš„å–ææˆ–æ•…äº‹èƒŒæ™¯ï¼š</label>
            <textarea id="narrativeElements" rows="5" placeholder="ä¾‹å¦‚ï¼šæ•…äº‹èƒŒæ™¯ã€äººç‰©è¨­å®šã€å–æç­‰..."></textarea>
        </div>
        <div id="writingArea">
            <div id="outlineTableArea"></div>
            <div id="outlineButtons" style="display: none;">
                <button class="save-btn" onclick="saveOutline()">å„²å­˜</button>
                <button class="clear-btn" onclick="clearOutline()">æ¸…ç©º</button>
            </div>
            <textarea id="writingContent" rows="10" placeholder="è«‹åœ¨æ­¤è¼¸å…¥æ‚¨çš„å¯«ä½œå…§å®¹ï¼ˆã€Œç‰‡æ®µæå¯«ã€ä½¿ç”¨ï¼‰..." style="display: none;"></textarea>
            <label for="writingTone" id="writingToneLabel" style="display: none;">é¸æ“‡é»è©•èªæ°£ï¼š</label>
            <select id="writingTone" style="display: none;">
                <option value="serious">åš´è‚…æ­£ç¶“</option>
                <option value="chen">é™³SIRèªæ°£</option>
            </select>
            <button onclick="submitWriting()">æäº¤</button>
            <div id="commentResult"></div>
        </div>
    </div>

    <!-- é–±è®€å®¹å™¨ -->
    <div id="readingContainer" class="box" style="display: none;">
        <h2>é–±è®€</h2>
        <div style="position:relative; width:100%; height:0px; padding-bottom:62.222%"><iframe allow="fullscreen" allowfullscreen height="100%" src="https://streamable.com/e/vt3i1j?loop=0" width="100%" style="border:none; width:100%; height:100%; position:absolute; left:0px; top:0px; bottom:2px; overflow:hidden;"></iframe></div>
        <label for="readingFunction">é¸æ“‡åŠŸèƒ½ï¼š</label>
        <select id="readingFunction" onchange="toggleReadingFunction()">
            <option value="comment">é»è©•</option>
            <option value="guide">æŒ‡å¼•</option>
        </select>
        <div id="readingInputArea">
            <label for="readingPassage">è²¼ä¸Šé–±è®€ç¯‡ç« ï¼š</label>
            <textarea id="readingPassage" rows="10" placeholder="è«‹åœ¨æ­¤è²¼ä¸Šé–±è®€ç¯‡ç« ..."></textarea>
            <label for="readingQuestion">è²¼ä¸Šé¡Œç›®ï¼š</label>
            <textarea id="readingQuestion" rows="3" placeholder="è«‹åœ¨æ­¤è²¼ä¸Šé¡Œç›®..."></textarea>
            <div id="studentAnswerArea" style="display: none;">
                <label for="studentAnswer">è²¼ä¸Šç­”æ¡ˆï¼š</label>
                <textarea id="studentAnswer" rows="5" placeholder="è«‹åœ¨æ­¤è²¼ä¸Šç­”æ¡ˆ..."></textarea>
            </div>
            <label for="readingTone" id="readingToneLabel" style="display: none;">é¸æ“‡é»è©•èªæ°£ï¼š</label>
            <select id="readingTone" style="display: none;">
                <option value="serious">åš´è‚…æ­£ç¶“</option>
                <option value="chen">é™³SIRèªæ°£</option>
            </select>
            <button onclick="submitReading()">æäº¤</button>
            <div id="readingResult"></div>
        </div>
    </div>

    <!-- èª²å¤–æ›¸ç±å®¹å™¨ -->
    <div id="booksContainer" class="box" style="display: none;">
        <h2>èª²å¤–æ›¸ç±è¨è«–</h2>
         <div style="position:relative; width:100%; height:0px; padding-bottom:62.222%"><iframe allow="fullscreen" allowfullscreen height="100%" src="https://streamable.com/e/4eznsi?loop=0" width="100%" style="border:none; width:100%; height:100%; position:absolute; left:0px; top:0px; bottom:2px; overflow:hidden;"></iframe></div>
        <p>è«‹åœ¨ä¸‹æ–¹å¡«å¯«æ›¸åã€ä½œè€…å’Œè¨è«–å•é¡Œï¼Œé–‹å§‹èˆ‡é™³SIRå°è©±ï¼š</p>
        <input type="text" id="bookTitle" placeholder="æ›¸å">
        <input type="text" id="author" placeholder="ä½œè€…">
        <textarea id="discussionQuestion" rows="3" placeholder="è¨è«–å•é¡Œ"></textarea>
        <label for="booksTone">é¸æ“‡èªæ°£ï¼š</label>
        <select id="booksTone">
            <option value="serious">åš´è‚…æ­£ç¶“</option>
            <option value="casual">è¼•é¬†æ´»æ½‘</option>
        </select>
        <button onclick="startDiscussion()">é–‹å§‹è¨è«–</button>
        <div id="chatHistory"></div>
        <textarea id="userInput" rows="3" placeholder="è«‹è¼¸å…¥æ‚¨çš„å›æ‡‰..."></textarea>
        <button id="continueBtn" onclick="continueDiscussion()">ç¹¼çºŒè¨è«–</button>
        <div id="booksButtons">
            <button class="save-btn" onclick="saveBooksChat()">å„²å­˜</button>
            <button class="clear-btn" onclick="clearBooksChat()">æ¸…ç©º</button>
        </div>
    </div>

    <!-- æ•´åˆæ‹“å±•å®¹å™¨ -->
    <div id="expandContainer" class="box" style="display: none;">
        <h2>æ•´åˆæ‹“å±•</h2>
       <div style="position:relative; width:100%; height:0px; padding-bottom:62.222%"><iframe allow="fullscreen" allowfullscreen height="100%" src="https://streamable.com/e/2otwxv?loop=0" width="100%" style="border:none; width:100%; height:100%; position:absolute; left:0px; top:0px; bottom:2px; overflow:hidden;"></iframe></div>
        <label for="expandFunction">é¸æ“‡åŠŸèƒ½ï¼š</label>
        <select id="expandFunction" onchange="toggleExpandFunction()">
            <option value="comment">é»è©•</option>
            <option value="guide">æŒ‡å¼•</option>
        </select>
        <div id="expandTopicSelectionArea" style="display: none;">
            <label for="expandTopicOption">é¸æ“‡é¡Œç›®æ–¹å¼ï¼š</label>
            <select id="expandTopicOption" onchange="toggleExpandTopicInput()">
                <option value="generate">ç”Ÿæˆé¡Œç›®</option>
                <option value="custom">è‡ªè¨‚é¡Œç›®</option>
            </select>
            <div id="expandGenerateTopicArea">
                <button onclick="generateExpandTopic()">ç”Ÿæˆé¡Œç›®</button>
            </div>
            <div id="expandCustomTopicArea" style="display: none;">
                <table>
                    <tr><th>é¡Œç›®</th><td><input type="text" id="expandCustomTitle" placeholder="è«‹è¼¸å…¥é¡Œç›®"></td></tr>
                    <tr><th>ä¸»é¡Œå¥</th><td><textarea id="expandCustomTheme" rows="2" placeholder="è«‹è¼¸å…¥ä¸»é¡Œå¥"></textarea></td></tr>
                    <tr><th>æŠ„éŒ„è³‡æ–™</th><td><textarea id="expandCustomData" rows="3" placeholder="è«‹è¼¸å…¥æŠ„éŒ„è³‡æ–™"></textarea></td></tr>
                </table>
                <button onclick="setExpandCustomTopic()">ç¢ºèªé¡Œç›®</button>
            </div>
            <div id="expandTopicResult"></div>
        </div>
        <div id="expandWritingArea" style="display: none;">
            <label for="expandContent">æ•´åˆæ‹“å±•ï¼ˆæœ€å¤š180å­—ï¼‰ï¼š</label>
            <textarea id="expandContent" rows="5" placeholder="è«‹åœ¨æ­¤è¼¸å…¥æ•´åˆæ‹“å±•å…§å®¹..." oninput="updateCharCount()"></textarea>
            <p id="charCount">å‰©é¤˜å­—æ•¸ï¼š180</p>
            <label for="expandTone" id="expandToneLabel" style="display: none;">é¸æ“‡é»è©•èªæ°£ï¼š</label>
            <select id="expandTone" style="display: none;">
                <option value="serious">åš´è‚…æ­£ç¶“</option>
                <option value="chen">é™³SIRèªæ°£</option>
            </select>
            <button onclick="submitExpand()">æäº¤</button>
            <div id="expandCommentResult"></div>
        </div>
        <div id="expandGuideArea" style="display: none;">
            <table>
                <tr><th>é¡Œç›®</th><td><input type="text" id="expandGuideTitle" placeholder="è«‹è¼¸å…¥é¡Œç›®"></td></tr>
                <tr><th>ä¸»é¡Œå¥</th><td><textarea id="expandGuideTheme" rows="2" placeholder="è«‹è¼¸å…¥ä¸»é¡Œå¥"></textarea></td></tr>
                <tr><th>æŠ„éŒ„è³‡æ–™</th><td><textarea id="expandGuideData" rows="3" placeholder="è«‹è¼¸å…¥æŠ„éŒ„è³‡æ–™"></textarea></td></tr>
                <tr><th>æ•´åˆæ‹“å±•</th><td><textarea id="expandGuideExpand" rows="3" placeholder="è«‹è¼¸å…¥æ•´åˆæ‹“å±•"></textarea></td></tr>
            </table>
            <button onclick="submitExpand()">æäº¤</button>
            <div id="expandGuideResult"></div>
        </div>
    </div>

    <!-- è­°è«–å®¹å™¨ -->
    <div id="argumentContainer" class="box" style="display: none;">
        <h2>è­°è«–</h2>
        <div style="position:relative; width:100%; height:0px; padding-bottom:62.222%"><iframe allow="fullscreen" allowfullscreen height="100%" src="https://streamable.com/e/0ki8mx?loop=0" width="100%" style="border:none; width:100%; height:100%; position:absolute; left:0px; top:0px; bottom:2px; overflow:hidden;"></iframe></div>
        <label for="argumentType">é¸æ“‡åŠŸèƒ½ï¼š</label>
        <select id="argumentType" onchange="toggleArgumentType()">
            <option value="outline">å¤§ç¶±</option>
            <option value="writing">ç‰‡æ®µå¯«ä½œ/å…¨æ–‡å¯«ä½œ</option>
            <option value="guide">æŒ‡å¼•</option>
        </select>
        <div id="argumentTopicSelectionArea">
            <label for="argumentTopicOption">é¸æ“‡é¡Œç›®æ–¹å¼ï¼š</label>
            <select id="argumentTopicOption" onchange="toggleArgumentTopicInput()">
                <option value="generate">ç”Ÿæˆé¡Œç›®</option>
                <option value="custom">è‡ªè¨‚é¡Œç›®</option>
            </select>
            <div id="argumentGenerateTopicArea">
                <button onclick="generateArgumentTopic()">ç”Ÿæˆé¡Œç›®</button>
            </div>
            <div id="argumentCustomTopicArea" style="display: none;">
                <input type="text" id="argumentCustomTopic" placeholder="è«‹è¼¸å…¥è‡ªè¨‚é¡Œç›®">
                <button onclick="setArgumentCustomTopic()">ç¢ºèªé¡Œç›®</button>
            </div>
            <div id="argumentTopicResult"></div>
        </div>
        <div id="argumentOutlineArea" style="display: none;">
            <div id="argumentOutlineTableArea"></div>
            <button onclick="addArgumentStructureSegment()">æ–°å¢çµæ§‹æ®µ</button>
            <div id="argumentOutlineButtons">
                <button class="save-btn" onclick="saveArgumentOutline()">å„²å­˜</button>
                <button class="clear-btn" onclick="clearArgumentOutline()">æ¸…ç©º</button>
            </div>
            <label for="argumentOutlineTone">é¸æ“‡é»è©•èªæ°£ï¼š</label>
            <select id="argumentOutlineTone">
                <option value="serious">åš´è‚…æ­£ç¶“</option>
                <option value="chen">é™³SIRèªæ°£</option>
            </select>
            <button onclick="submitArgumentOutline()">æäº¤</button>
            <div id="argumentOutlineResult"></div>
        </div>
        <div id="argumentWritingArea" style="display: none;">
            <textarea id="argumentWritingContent" rows="10" placeholder="è«‹åœ¨æ­¤è¼¸å…¥æ‚¨çš„æ–‡ç« ..."></textarea>
            <label for="argumentWritingTone">é¸æ“‡é»è©•èªæ°£ï¼š</label>
            <select id="argumentWritingTone">
                <option value="serious">åš´è‚…æ­£ç¶“</option>
                <option value="chen">é™³SIRèªæ°£</option>
            </select>
            <button onclick="submitArgumentWriting()">æäº¤</button>
            <div id="argumentWritingResult"></div>
        </div>
        <div id="argumentGuideArea" style="display: none;">
            <label for="argumentGuideTopic">é¡Œç›®ï¼š</label>
            <input type="text" id="argumentGuideTopic" placeholder="è«‹è¼¸å…¥é¡Œç›®">
            <label for="argumentGuidePoint">è«–é»ï¼ˆå¯é¸ï¼‰ï¼š</label>
            <textarea id="argumentGuidePoint" rows="3" placeholder="è«‹è¼¸å…¥è«–é»"></textarea>
            <label for="argumentGuideEvidence">è«–æ“šï¼ˆå¯é¸ï¼‰ï¼š</label>
            <textarea id="argumentGuideEvidence" rows="3" placeholder="è«‹è¼¸å…¥è«–æ“š"></textarea>
            <label for="argumentGuideArgument">è«–è­‰ï¼ˆå¯é¸ï¼‰ï¼š</label>
            <textarea id="argumentGuideArgument" rows="3" placeholder="è«‹è¼¸å…¥è«–è­‰"></textarea>
            <button onclick="submitArgumentGuide()">æäº¤</button>
            <div id="argumentGuideResult"></div>
        </div>
    </div>

<!-- éŸ³æ¨‚æ’­æ”¾å™¨ HTML -->
<div id="music-player">
    <div class="controls">
        <select id="music-select">
            <option value="">é¸æ“‡éŸ³æ¨‚</option>
            <option value="https://youfulca.com/wp-content/uploads/2022/08/Battle-Abysswalker.mp3">The Abysswalker</option>
            <option value="https://youfulca.com/wp-content/uploads/2022/08/Battle-Rosemoon.mp3">æ­»ã›ã‚‹éƒ½ã®æˆ°ä¹™å¥³</option>
            <option value="https://youfulca.com/wp-content/uploads/2022/08/Battle-deadly.mp3">äº”å¤§ç½ª</option>
            <option value="https://youfulca.com/wp-content/uploads/2022/08/Battle-rapier.mp3">ç¹¼æ‰¿åŠçš„å°‘å¥³</option>
            <option value="https://youfulca.com/wp-content/uploads/2022/08/Ariadne-Battle.mp3">ä¸å±ˆæ„å¿—ä¹‹åˆƒ</option>
            <option value="https://youfulca.com/wp-content/uploads/2022/08/battle-arms.mp3">è¥¿éƒ¨æˆ°é¬¥</option>
            <option value="https://youfulca.com/wp-content/uploads/2022/08/Battle.mp3">Battle Theme</option>
            <option value="https://youfulca.com/wp-content/uploads/2022/08/Wanderers-City.mp3">æµæµªåŸé®</option>
            <option value="https://youfulca.com/wp-content/uploads/2022/08/Remotest-Liblary.mp3">æ²‰ç¡çš„è¨˜æ†¶</option>
            <option value="https://youfulca.com/wp-content/uploads/2022/08/Nostalgia.mp3">éº¥ç”°æ‡·èˆŠ</option>
            <option value="https://youfulca.com/wp-content/uploads/2022/08/sunbeams.mp3">æ”¾å­¸å¾Œ</option>
            <option value="https://youfulca.com/wp-content/uploads/2022/08/village.mp3">é„‰æ‘ç”Ÿæ´»</option>
            <option value="https://youfulca.com/wp-content/uploads/2022/08/Take-a-Rest.mp3">ä¼‘æ¯ä¸€ä¸‹</option>
            <option value="https://youfulca.com/wp-content/uploads/2022/08/winter-snow.mp3">é›ªé„‰</option>
            <option value="https://youfulca.com/wp-content/uploads/2022/08/Forgotten-Place.mp3">è¢«éºå¿˜çš„åœ°æ–¹</option>
            <option value="https://youfulca.com/wp-content/uploads/2022/08/Rest-in-Peace.mp3">å®‰æ¯</option>
            <option value="https://youfulca.com/wp-content/uploads/2022/08/Farewell.mp3">å‘Šåˆ¥</option>
            <option value="https://youfulca.com/wp-content/uploads/2022/08/reminiscence.mp3">å›æ†¶</option>
            <option value="https://youfulca.com/wp-content/uploads/2022/08/starry-night.mp3">æ˜Ÿå¤œ</option>
            <option value="https://youfulca.com/wp-content/uploads/2022/08/last-wish.mp3">ç•¶æ€å¿µå‚³åˆ°æŸäººè€³ç•”</option>
            <option value="https://youfulca.com/wp-content/uploads/2022/08/sorrow.mp3">è¶…è¶Šæ‚²å‚·</option>
            <option value="https://youfulca.com/wp-content/uploads/2022/08/hotarumichi.mp3">è¢ç«èŸ²ä¹‹è·¯</option>
            <option value="https://youfulca.com/wp-content/uploads/2022/08/Sky-Airship.mp3">é£›è‰‡</option>
            <option value="https://youfulca.com/wp-content/uploads/2022/08/Voyage_SE.mp3">è·¨è¶Šç¥ç§˜ä¹‹æµ·</option>
            <option value="https://youfulca.com/wp-content/uploads/2022/08/main-theme01.mp3">ç›¼æœ›</option>
            <option value="https://youfulca.com/wp-content/uploads/2022/08/saikai637.mp3">ç´„å®šä¹‹åœ°</option>
        </select>
        <button id="play-pause">â–¶ï¸</button>
    </div>
    <div class="progress">
        <input type="range" id="progress-bar-music" value="0" min="0" max="100">
    </div>
    <div class="mode">
        <select id="play-mode">
            <option value="loop" selected>å–®æ›²å¾ªç’°</option>
            <option value="next">è‡ªå‹•æ’­æ”¾ä¸‹é¦–</option>
        </select>
    </div>
    <button class="hide-btn" id="hide-player">ğŸ”½</button>
</div>
<button id="show-player">ğŸ¹</button>
<audio id="audio" preload="auto"></audio>


    
    <script>

// å±•é–‹å·¥å…·æŒ‰éˆ•çš„é»æ“Šäº‹ä»¶
document.getElementById("expandToolsBtn").addEventListener("click", function() {
    const toolsContainer = document.getElementById("toolsContainer");
    toolsContainer.style.display = "flex";
    const buttons = document.querySelectorAll("#toolsList button");
    buttons.forEach((btn, index) => {
        btn.classList.add("tool-btn");
        btn.style.animation = ""; // æ¢å¾©å‹•ç•«è¨­ç½®
        btn.style.animationDelay = `${index * 0.1}s`;
        setTimeout(() => {
            btn.style.opacity = "1";
        }, index * 200);
    });
});

// é—œé–‰å·¥å…·æŒ‰éˆ•çš„é»æ“Šäº‹ä»¶
document.getElementById("closeToolsBtn").addEventListener("click", function() {
    document.getElementById("toolsContainer").style.display = "none";
    const buttons = document.querySelectorAll("#toolsList button");
    buttons.forEach(btn => {
        btn.style.opacity = "0";
        btn.style.animation = "none"; // é‡ç½®å‹•ç•«ç‹€æ…‹
    });
});



const audio = document.getElementById('audio');
const playPauseBtn = document.getElementById('play-pause');
const musicSelect = document.getElementById('music-select');
const progressBarMusic = document.getElementById('progress-bar-music');
const playMode = document.getElementById('play-mode');
const hidePlayerBtn = document.getElementById('hide-player');
const showPlayerBtn = document.getElementById('show-player');
const musicPlayer = document.getElementById('music-player');

let isPlaying = false;
let currentMusic = '';

musicSelect.addEventListener('change', function() {
    const selectedMusic = this.value;
    if (selectedMusic) {
        audio.src = selectedMusic;
        audio.load();
        currentMusic = selectedMusic;
        audio.play().then(() => {
            isPlaying = true;
            playPauseBtn.textContent = 'â¸ï¸';
        }).catch(error => console.error('è‡ªå‹•æ’­æ”¾å¤±æ•—:', error));
    }
});

audio.addEventListener('canplay', function() {
    if (isPlaying) audio.play();
});

playPauseBtn.addEventListener('click', function() {
    if (isPlaying) {
        audio.pause();
        playPauseBtn.textContent = 'â–¶ï¸';
    } else {
        if (currentMusic) {
            audio.play();
            playPauseBtn.textContent = 'â¸ï¸';
        } else {
            alert('è«‹å…ˆé¸æ“‡éŸ³æ¨‚');
        }
    }
    isPlaying = !isPlaying;
});

audio.addEventListener('timeupdate', function() {
    if (!audio.duration) return;
    const progress = (audio.currentTime / audio.duration) * 100;
    progressBarMusic.value = progress;
});

progressBarMusic.addEventListener('input', function() {
    const time = (this.value / 100) * audio.duration;
    audio.currentTime = time;
});

audio.addEventListener('ended', function() {
    if (playMode.value === 'loop') {
        audio.currentTime = 0;
        audio.play();
    } else if (playMode.value === 'next') {
        const options = musicSelect.options;
        for (let i = 0; i < options.length; i++) {
            if (options[i].value === currentMusic) {
                let nextIndex = (i + 1) % options.length;
                if (nextIndex === 0) nextIndex = 1;
                currentMusic = options[nextIndex].value;
                musicSelect.value = currentMusic;
                audio.src = currentMusic;
                audio.load();
                audio.play();
                break;
            }
        }
    }
});

hidePlayerBtn.addEventListener('click', function() {
    musicPlayer.style.display = 'none';
    showPlayerBtn.style.display = 'block';
});

showPlayerBtn.addEventListener('click', function() {
    musicPlayer.style.display = 'flex';
    showPlayerBtn.style.display = 'none';
});
        
        // é è¨­å¯«ä½œé¡Œç›®åˆ—è¡¨
        const topics = [
            "æ—è§€", "èˆå°", "é€™ä»¶ç‰©ä»¶å¾ˆæ˜¯è¼•å·§ï¼Œå»è®“æˆ‘æ˜ç™½ã€ä½†æ±‚ç„¡æ„§æ–¼å¿ƒã€çš„é“ç†ã€‚", "å±±é ‚", "ç¨®å­", "æ ¹", "ç–¤ç—•",
            "ä»Šå¤©ï¼Œæˆ‘ä¸èƒ½åƒè³½ï¼Œåªèƒ½ååœ¨è§€çœ¾å¸­ä¸Šï¼Œä½†ç•¶æ™‚çš„æ‰€è¦‹æ‰€èå»çµ¦äºˆæˆ‘å¶„æ–°çš„é«”æœƒã€‚", "å¾ä»Šä»¥å¾Œï¼Œæˆ‘ä¸æœƒå†è¼•è¨€æ”¾æ£„ã€‚",
            "ç­‰å€™", "æˆ‘æ›¾ç¶“åŠªåŠ›å˜—è©¦ï¼Œä½†æœ€çµ‚ä»æ˜¯äº‹èˆ‡é¡˜é•", "å›æ†¶", "å¾¹å¤œé›£çœ ", "å½©è™¹",
            "æ˜Ÿç©ºä¸‹ï¼Œçœ¼å‰çš„æ™¯è±¡è®“æˆ‘æƒ³èµ·é‚£æ®µå¾€äº‹ï¼Œä»¤æˆ‘ä¸ç¦æ­äº†ä¸€å£æ°£â€¦â€¦", "è·¯ç‰Œ", "ä»Šå­¸å¹´æœ€å¾Œæ‚”çš„ä¸€ä»¶äº‹",
            "æœ€ä»¤æˆ‘æ„Ÿå‹•çš„ä¸€å¥è©±", "å†è©¦ä¸€æ¬¡", "ä»Šå¤©å†æ¬¡åœ¨å°ä¸Šæ¼”å¥ï¼Œæˆ‘å·²ç¶“è„«èƒæ›éª¨ï¼Œä¸å†æ˜¯å¾å‰é‚£å€‹é©•å‚²è‡ªæ»¿çš„æˆ‘äº†ã€‚",
            "æ¯æ¬¡ç¶“éé€™æ¢è¡—ï¼Œçœ‹ç€è¡—ä¸Šçš„æ™¯ç‰©ï¼Œæˆ‘ä¾¿æ„Ÿè§¸ä¸å·²â€¦â€¦", "æ„å¤–", "é‘°åŒ™", "éŒ¯éäº†çš„æ©Ÿæœƒ",
            "é‚£å¥è©±ï¼Œæˆ‘å¯¦åœ¨ä¸è©²èªªâ€¦â€¦", "è‰²å½©", "ç…™ç«", "è—¥", "æ”¾ä¸‹", "è¿½é€", "åŸä¾†ï¼Œé€™åªæ˜¯ä¸€å ´èª¤æœƒ",
            "ç¼ºæ†¾", "ç„¡æ‚”çš„æŠ‰æ“‡", "å‹‡æ°£", "å‚˜", "è‡ªæ­¤ä¹‹å¾Œï¼Œæˆ‘æ˜ç™½åˆ°åŸä¾†çˆ¶æ¯çš„æ„›ç¸½æ˜¯é«”ç¾åœ¨å°äº‹ä¸Šã€‚",
            "ä¸€ä»¶ä»¤æˆ‘å¾Œæ‚”ä¸å·²çš„äº‹", "ä¸€æ¬¡å°·å°¬çš„ç¶“æ­·", "æ²¿é€”æœ‰ä½ ", "é€™ä¸€æ¬¡ï¼Œæˆ‘å¯¦åœ¨æ„Ÿåˆ°ç„¡åœ°è‡ªå®¹ã€‚",
            "é€™ä¸€æ¬¡ï¼Œæˆ‘æ˜ç™½åˆ°ï¼ŒåŸä¾†å¹«åŠ©ä»–äººçš„åŒæ™‚ï¼Œä¹Ÿå¹«åŠ©äº†è‡ªå·±ã€‚",
            "æˆ‘çš„é„°å±…å¼µå…ˆç”Ÿæ˜¯ä¸€ä½å¾ˆè‹›åˆ»çš„äººï¼Œç¶“å¸¸æœƒç‚ºäº›ã€å°äº‹ã€è€ŒæŠ•è¨´ä»–äººã€‚ä½†ä»Šå¤©æˆ‘ç™¼ç¾ï¼Œä»–é€™æ¨£åšæ˜¯æœ‰åŸå› çš„â€¦â€¦",
            "ç¨è™•çš„ä¸€å¤©", "é€™ä¸€åˆ»ï¼Œæˆ‘çµ‚æ–¼èˆ’äº†ä¸€å£æ°£ã€‚", "è¨˜ä¸€æ¬¡è¢«èª¤è§£çš„ç¶“æ­·", "ä¸€æ¬¡èˆ‡åˆ¥äººè¨€æ­¸æ–¼å¥½çš„ç¶“æ­·",
            "è‡ªæ­¤ä¹‹å¾Œï¼Œæˆ‘æ„Ÿåˆ°è‡ªå·±çœŸçš„é•·å¤§äº†ã€‚", "è‡ªæ­¤ä¹‹å¾Œï¼Œæˆ‘æ˜ç™½åˆ°å¹¸ç¦åŸä¾†å¯ä»¥å¾ˆç°¡å–®ã€‚", "è¨˜ä¸€æ¬¡è‹¦ç›¡ç”˜ä¾†çš„ç¶“æ­·ã€‚",
            "é€™ä»¶äº‹è®“æˆ‘é«”æœƒåˆ°å–œå‡ºæœ›å¤–çš„æ»‹å‘³ã€‚", "è·¯æ¨™", "è¶³å°", "éºæ†¾", "é–", "é¢å…·", "å¿ƒçµ", "é–€",
            "å½±å­", "ç¦å€", "ç­‰å¾…", "æ ¹", "æœ€å¾Œï¼Œæˆ‘é¸æ“‡äº†æ”¾æ£„", "è‡ªé‚£ä¸€åˆ»ï¼Œæˆ‘è§£é–‹äº†å¿ƒçµ",
            "è‡ªæ­¤ä¹‹å¾Œï¼Œæˆ‘æ˜ç™½çŒ¶è±«æœƒä½¿äººä¸€äº‹ç„¡æˆã€‚", "åŸä¾†æˆ‘æ²’æœ‰å¿˜è¨˜é‚£ä¸€é “é£¯ã€‚", "æˆ‘åœ¨å¤§è‡ªç„¶ä¹‹ä¸­æ‰¾åˆ°å¿«æ¨‚ã€‚",
            "ç†±é¬§éå¾Œï¼Œæˆ‘å»æ„Ÿåˆ°å¤±è½ã€‚", "çœ‹è‘—é€æ¼¸é å»çš„èƒŒå½±ï¼Œæˆ‘æ„Ÿåˆ°å¾ˆå…§ç–šã€‚", "ä»Šå¤©æˆ‘æµæ·šäº†ï¼Œä½†æˆ‘ä¸¦éæ„Ÿåˆ°é›£éã€‚",
            "è‡ªæ­¤ä¹‹å¾Œï¼Œæˆ‘æ‰¾åˆ°äº†å‹•åŠ›", "ç¶“æ­·äº†é€™æ¬¡é¢¨æ³¢ï¼Œæˆ‘é•·å¤§äº†ã€‚",
            "ç¶“éé€™ä»¶äº‹ï¼Œæˆ‘æ‰æ˜ç™½åˆ°ä¸€å¿ƒæ˜¯æˆ‘çš„çŸ¥å·±ï¼Œæ˜¯çœŸæ­£äº†è§£æˆ‘çš„äººã€‚", "è‡ªæ­¤ä¹‹å¾Œï¼Œæˆ‘å­¸æœƒæ”¾ä¸‹ç„¡è¬‚çš„é¢å­ã€‚",
            "é€™ä¸€æ¬¡ï¼Œæˆ‘å†æ²’æœ‰éºæ†¾", "é‡éŠèˆŠåœ°æ‰€è¦‹æœ‰æ„Ÿ", "å¤±è€Œå¾©å¾—", "é€™æ¢è¡—é›–ç„¶è€èˆŠï¼Œä½†å»å……æ»¿äººæƒ…å‘³ã€‚",
            "é€™å¥è©±ï¼Œæˆ‘æœƒè¨˜ä¸Šä¸€è¼©å­ã€‚", "é–€", "ä¾†æ—¥æ–¹é•·", "å¾—ä¸å„Ÿå¤±", "éš±è—", "å¾®ç¬‘ä»¥å°",
            "ç†±é¬§éå¾Œï¼Œæˆ‘å»æ„Ÿåˆ°å¤±è½ã€‚", "å¤¢æƒ³çœ‹ä¼¼ä¸åˆ‡å¯¦éš›ï¼Œä½†å…¶å¯¦å¾ˆæœ‰æ„ç¾©", "å¤¢æƒ³çœ‹ä¼¼å¾ˆæœ‰æ„ç¾©ï¼Œå…¶å¯¦ hä¸åˆ‡å¯¦éš›",
            "ä»Šå¤©æˆ‘æ²’æœ‰å¸¶æ‰‹æé›»è©±å¤–å‡ºï¼Œå› è€Œæœ‰ä¸ä¸€æ¨£çš„ç¶“æ­·å’Œé«”æœƒã€‚",
            "ä»Šå¤©ç™¼ç”Ÿäº†ä¸€ä»¶äº‹æƒ…ï¼Œç•¶æ™‚æˆ‘æ›¾ç¶“æƒ³åŠ›é™³å·±è¦‹ï¼Œæœ€å¾Œé¸æ“‡äº†æ²‰é»˜ã€‚æˆ‘èªç‚ºæ²‰é»˜æ˜¯å¿…è¦çš„ã€‚",
            "çŸ›ç›¾", "æœªå…Œç¾çš„è«¾è¨€", "æœªå¯„å‡ºçš„ä¿¡", "è·é›¢", "ä¸€å ´æ²’æœ‰å¤±æ•—è€…çš„æ¯”è³½", "ä¸€ä»¶ç™¼äººæ·±çœçš„äº‹",
            "æˆ‘æœ€æƒ³ä¿ç•™çš„ä¸€æœ¬ç›¸ç°¿", "æˆ‘æœ€æƒ³å°‹å›çš„ä¸€ä»¶ç©å…·", "ç„¡æ„§çš„æŠ‰æ“‡", "ä¸èƒ½æ‰ä¸‹çš„çœ¼æ·š", "ç„¡ç•çš„æ¢ç´¢",
            "ä¸€æ¬¡ä»¤æˆ‘ç™¾æ„Ÿäº¤é›†çš„èšé¤", "å¦‚é¡˜ä»¥å„Ÿ"
        ];

        // é è¨­è­°è«–é¡Œç›®åˆ—è¡¨ï¼ˆè«‹åœ¨æ­¤è™•è¼¸å…¥æ‚¨çš„é¡Œåº«ï¼‰
        const argumentTopics = [
    'æ‰€è¬‚ã€Œå¤©è¡Œæœ‰å¸¸ï¼Œç«‹èº«æœ‰æœ¬ã€‚ã€æ„æ€æ˜¯å¤§è‡ªç„¶é‹è¡Œæœ‰æ—¢å®šçš„è¦å¾‹ï¼Œäººç«‹èº«è™•ä¸–æœ‰ä¸€å®šçš„åŸå‰‡ã€‚è©¦è«‡è«‡ä½ å°ã€Œç«‹èº«æœ‰æœ¬ã€çš„çœ‹æ³•ã€‚',
    'æ—è§€',
    'æœ‰äººèªç‚ºã€Œäººç”Ÿåœ¨ä¸–ï¼Œå¿…é ˆè¬›ç©¶å„€å¼ã€‚ã€ä½ åŒæ„å—ï¼Ÿè©¦æ’°æ–‡ä¸€ç¯‡ï¼Œè«–è¿°ä½ çš„çœ‹æ³•ã€‚',
    'èˆå°',
    'æ ¹',
    'å¤äººèªªï¼šã€Œå›å­ä¸ä»¥äººå»¢è¨€ã€‚ã€æ„æ€æ˜¯ï¼šå›å­ä¸æœƒå› ç‚ºæŸäººçš„å¾·è¡Œä¸å¥½è€Œä¸æ¡ç´ä»–çš„å–„æ„è¦å‹¸ã€‚åœ¨ç¾ä»Šç¤¾æœƒï¼Œä½ æ˜¯å¦åŒæ„ã€Œå›å­ä¸ä»¥äººå»¢è¨€ã€ï¼Ÿè©¦è«‡è«‡ä½ çš„çœ‹æ³•ã€‚',
    'è¨ˆç®—',
    'æœ‰äººèªªï¼šã€Œåœ¨ç¾ä»Šç¤¾æœƒä¸­ï¼Œæˆ‘å€‘é›£ä»¥æ´»å‡ºçœŸæˆ‘ã€‚ã€ä½ åŒæ„å—ã€‚è«‡è«‡ä½ çš„çœ‹æ³•ã€‚',
    'ä¿—èªèªªã€Œæœ‰ç«¶çˆ­æ‰æœ‰é€²æ­¥ã€ï¼Œä¹Ÿæœ‰äººèªªã€Œç«¶çˆ­ç„¡ç”¨ã€ã€‚è©¦å¯«ä½œæ–‡ç« ä¸€ç¯‡ï¼Œè«‡è«‡ä½ å°ã€Œç«¶çˆ­ç„¡ç”¨ã€çš„çœ‹æ³•ã€‚',
    'å±±é ‚',
    'ã€Œç¨®å­ã€é›–æ˜¯å¹³å¸¸äº‹ç‰©ï¼Œå»å¯ä»¥å¼•èµ·è¯æƒ³ï¼Œæˆ–ç‰½å‹•æ€ç·’ï¼Œåˆæˆ–å•Ÿç™¼æ€è€ƒã€‚è©¦ä»¥ã€Œç¨®å­ã€ç‚ºé¡Œï¼Œå°±å€‹äººé«”æœƒå¯«ä½œæ–‡ç« ä¸€ç¯‡ã€‚',
    'æœ‰äººèªç‚ºã€ŒæŒ«æ•—æ›´æœ‰åˆ©å­©å­æˆé•·ã€‚ã€ä½ åŒæ„å—ï¼Ÿè©¦æ’°æ–‡ä¸€ç¯‡ï¼Œè«–è¿°ä½ çš„çœ‹æ³•ã€‚',
    'ç–¤ç—•',
    'è©¦ä»¥ã€Œè«‡ç©ç‰©å–ªå¿—ã€æˆ–ã€Œè«‡ç©ç‰©é¤Šå¿—ã€ç‚ºé¡Œï¼Œå¯«ä½œæ–‡ç« ä¸€ç¯‡ã€‚',
    'æ³°ç„¶è™•ä¹‹',
    'å¤èªæœ‰äº‘ã€Œå¤©ä¸‹çš†çŸ¥å–ä¹‹ç‚ºå–ï¼Œè€Œè«çŸ¥èˆ‡ä¹‹ç‚ºå–ã€‚ã€æ„æ€æ˜¯ä¸–äººéƒ½çŸ¥é“ç´¢å–å¯ä»¥ç²å¾—ï¼Œè€Œä¸çŸ¥é“çµ¦äºˆä¹Ÿå¯ä»¥ç²å¾—ã€‚è©¦è«‡è«‡ä½ å°é€™å¥è©±çš„çœ‹æ³•ã€‚',
    'è«‡åš´è‹›',
    'è«‡å¯¬å®¹',
    'è«‡æ†¤æ€’',
    'å¾…å€™',
    'æœ‰äººèªç‚ºï¼šã€Œèˆ‡å…¶è¿½æ±‚æˆåŠŸï¼Œä¸å¦‚è¿½æ±‚å¹¸ç¦ã€‚ã€ä½ åŒæ„å—ï¼Ÿè©¦æ’°å¯«æ–‡ç« ä¸€ç¯‡ï¼Œè«–è¿°ä½ çš„çœ‹æ³•ã€‚',
    'çŸ›ç›¾',
    'æœ‰äººèªç‚ºï¼šã€Œä¿æŒè·é›¢èƒ½ä»¤é—œä¿‚é•·ä¹…ã€‚ã€ä½ åŒæ„å—ï¼Ÿè©¦æ’°æ–‡ä¸€ç¯‡ï¼Œè«–è¿°ä½ çš„çœ‹æ³•ã€‚',
    'æœ‰äººèªªï¼šã€Œè¿‘æœ±è€…èµ¤ï¼Œè¿‘å¢¨è€…é»‘ã€‚ã€ä½ åŒæ„å—ï¼Ÿç‚ºç”šéº¼ï¼Ÿ',
    'è©¦ä»¥ã€Œç•¶ç§‘æŠ€æ–‡æ˜æ¶ˆå¤±å¾Œã€ç‚ºé¡Œï¼Œå¯«ä¸€ç¯‡è©•è«–ï¼Œåæ€ç§‘æŠ€ç™¼å±•å¸¶ä¾†çš„å½±éŸ¿ã€‚',
    'æˆåŠŸè·¯ä¸Šç„¡æ·å¾‘ï¼Œè©¦è«‡è«‡ä½ çš„çœ‹æ³•ã€‚',
    'å€‹äººé›»å­ç”¢å“çš„æ™®åŠåŒ–ï¼Œæœ‰äººèªç‚ºæ˜¯ç”Ÿæ´»çš„é€²æ­¥ï¼Œæœ‰äººèªç‚ºæ˜¯ç”Ÿæ´»çš„å€’é€€ã€‚ä½ è¼ƒèªåŒå“ªä¸€ç¨®è§€é»ï¼Ÿè©¦è«‡è«‡ä½ çš„çœ‹æ³•ã€‚',
    'æœ‰äººèªç‚ºå³ä½¿å¿ƒä¸­ä¸å¿«ï¼Œäº¦è¦ä»¥ç¬‘é¢å°äººï¼›æœ‰äººèªç‚ºæ‡‰ä»¥çœŸæ€§æƒ…å°äººï¼Œä¸æ‡‰æ©é£¾å¿ƒä¸­çš„æ„Ÿå—ï¼Œä½ è¼ƒè´ŠåŒå“ªä¸€æ–¹ï¼Ÿè©¦è«‡è«‡ä½ çš„çœ‹æ³•ã€‚',
    'é‘°åŒ™',
    'è²§ä¹èˆ‡å¯Œè¶³',
    'è«–æ„å¤–',
    'è©¦è«‡è«‡ä½ å°ã€Œè½å¤©ç”±å‘½ã€é€™ç¨®è™•ä¸–æ…‹åº¦çš„çœ‹æ³•ã€‚',
    'ã€Œå¤©è³œé£Ÿæ–¼é³¥ï¼Œå»ä¸æŠ•é£Ÿæ–¼å·¢ã€‚ã€ä¸Šå¤©è³œäºˆé³¥é¡è¦“é£Ÿçš„æœ¬èƒ½ï¼Œè€Œä¸æŠŠé£Ÿç‰©æŠ•åˆ°é³¥å·¢ã€‚æ„æ€æ˜¯äººéœ€è¦é€šéåŠªåŠ›ï¼Œæ‰èƒ½æœ‰æ‰€å¾—ã€‚ä½ èªåŒå—?è©¦è«‡è«‡ä½ çš„çœ‹æ³•ã€‚',
    'è‰²å½©',
    'è«‡è—è¡“çš„åƒ¹å€¼',
    'è—¥',
    'æœ‰äººèªªï¼šã€Œæ¯æ¬¡ä»˜å‡ºæ‡‰è©²å…ˆè¨ˆç®—å›å ±ã€‚ã€ä½ åŒæ„é€™ç¨®è™•äº‹æ…‹åº¦å—ï¼Ÿ',
    'è«–å…¬å¾·å¿ƒçš„é‡è¦æ€§',
    'æœ‰äººèªç‚ºä¸­å­¸ç”Ÿæ‡‰å¤šåƒèˆ‡èª²å¤–æ´»å‹•ï¼Œç™¼å±•èˆˆè¶£ï¼›æœ‰äººå‰‡èªç‚ºæ‡‰å°ˆæ³¨å­¸æ¥­ï¼Œçˆ­å–å¥½æˆç¸¾ã€‚ä½ è¼ƒèªåŒå“ªç¨®èªªæ³•ï¼Ÿè©¦è«‡è«‡ä½ çš„çœ‹æ³•ã€‚',
    'ä½ åŒæ„ã€Œå“å¾·æ¯”å­¸å•æ›´é‡è¦ã€å—ï¼Ÿè©¦å¯«ä¸€ç¯‡è­°è«–æ–‡ï¼Œè«‡è«‡ä½ çš„çœ‹æ³•ã€‚',
    'è«‡ç«¶çˆ­',
    'è«‡ç¼ºæ†¾',
    'è«‡å¾—å¤±',
    'è«‡å‹‡æ°£',
    'å¾—ä¸å„Ÿå¤±',
    'çˆºçˆºï¼šã€Œæˆ‘ç•¶é˜éŒ¶åŒ è¶…é50å¹´ï¼Œç•¢ç”Ÿå°ˆæ³¨é€™é–€æ‰‹è—ï¼Œèƒ½åšåˆ°åˆ†æ¯«ä¸å·®ã€‚ã€å…è¡Œï¼šã€Œæˆ‘æ˜¯å“å‘³ç”Ÿæ´»çš„å’–å•¡å¸«ï¼Œäº¦æ˜¯æ›¸å¯«äººç”Ÿçš„ä½œå®¶ï¼Œæ›´æ˜¯åŸ¹è‚²å¾Œé€²çš„æ­¦è¡“æ•™ç·´ã€‚ã€å„äººå°äººç”Ÿæœ‰ä¸åŒè¿½æ±‚ã€‚æœ‰äººèªç‚ºï¼šã€Œèˆ‡å…¶ä¸€ç”Ÿå°ˆç²¾ä¸€äº‹ï¼Œä¸å¦‚ç™¼å±•å¤šå…ƒäººç”Ÿã€‚ã€ä½ åŒæ„å—ï¼Ÿè©¦æ’°æ–‡ä¸€ç¯‡ï¼Œè«–è¿°ä½ çš„çœ‹æ³•ã€‚',
    'å¾®ç¬‘ä»¥å°',
    'æœ‰äººèªç‚ºã€Œå‚³çµ±å¾€å¾€æ˜¯å‰µæ–°çš„åŒ…è¢±ã€ã€‚è©¦è«‡è«‡ä½ å°é€™å¥è©±çš„çœ‹æ³•ã€‚',
    'è¶³å°',
    'å¤äººèªªï¼šã€Œç¨å­¸è€Œç„¡å‹ï¼Œå‰‡å­¤é™‹è€Œå¯¡èã€‚ã€æ„æ€æ˜¯ç¨è‡ªå­¸ç¿’ï¼Œæ²’æœ‰æœ‹å‹äº’ç›¸åˆ‡ç£‹è§£é›£ï¼Œäººä¾¿æœƒæ·ºé™‹è€Œè¦‹è­˜ä¸å»£ã€‚åœ¨ç¾ä»Šçš„å­¸ç¿’ç”Ÿæ´»ä¸­ï¼Œä½ æ˜¯å¦åŒæ„ã€Œç¨å­¸è€Œç„¡å‹ï¼Œå‰‡å­¤é™‹è€Œå¯¡èã€ï¼Ÿè©¦è©¦è«‡ä½ çš„çœ‹æ³•ã€‚',
    'ã€Œä¸åšç¬¬ä¸€ï¼Œä¹Ÿä¸åšæœ€å¾Œã€‚ã€è©¦è«‡è«‡ä½ å°é€™ç¨®è™•ä¸–æ…‹åº¦çš„çœ‹æ³•ã€‚',
    'è©¦ä»¥ã€Œé™½å…‰èˆ‡é™°å½±ã€ç‚ºé¡Œï¼Œå¯«ä½œä¸€ç¯‡æ–‡ç« ã€‚',
    'ã€Œå­©å­ä¸æ˜¯ç­‰å¾…è¢«å¡«æ»¿çš„ç“¶å­ï¼Œè€Œæ˜¯ç›¼æœ›åŒ–ä½œç‡ƒç‡’çš„ç«ç„°ã€‚ã€è©¦å°±å€‹äººå°é€™å¥è©±çš„é«”æœƒ ï¼Œä»¥ã€Œæˆé•·ã€ç‚ºé¡Œï¼Œå¯«ä½œä¸€ç¯‡æ–‡ç« ã€‚',
    'ã€Œä»Šæ—©åª½åª½æ‰“æƒçš„æ™‚å€™ï¼Œç„ä¸€ç„ç»ç’ƒçª—å¤–é„°å±…æ™¾æ›¬çš„è¡£æœï¼Œä¾¿æ‰¹è©•é“ï¼šã€çœ‹ï¼Œé‚£æ–°é„°å±…çœŸé¦¬è™ï¼è¡£æœé‚„æ˜¯æ±¡æ¼¬æ–‘æ–‘ï¼Œæ´—å¾—ä¸€é»ä¹Ÿä¸ä¹¾æ·¨ã€‚ã€å¥³å…’è½å¾Œï¼Œä¸€è¨€ä¸ç™¼ï¼Œèµ°åˆ°çª—å‰ä»”ç´°æ‰“é‡ï¼Œéš¨å³æŠ¹æ‰çª—ä¸Šçš„ç°å¡µï¼Œèªªé“ï¼šã€é€™ä¸å°±ä¹¾æ·¨äº†å—ï¼Ÿã€åª½åª½æç„¶å¤§æ‚Ÿï¼Œä¸ä¹¾æ·¨çš„ä¸æ˜¯åˆ¥äººçš„è¡£æœï¼Œè€Œæ˜¯è‡ªå·±çš„çª—å­ã€‚ã€è©¦å°±é€™å€‹æ•…äº‹å°ä½ çš„å•“ç™¼ï¼Œå¯«ä½œä¸€ç¯‡æ–‡ç« ï¼Œè«‡è«‡å¦‚ä½•æ¶ˆé™¤åè¦‹ã€‚',
    'ã€Œä¸€å€‹å¯’å†·çš„å†¬å¤©ï¼Œå¹¾éš»åˆºèŸæ“ åœ¨ä¸€èµ·å–æš–ã€‚ç”±æ–¼ç‰ å€‘èº«ä¸Šé•·æ»¿äº†çŸ­åˆºï¼Œå½¼æ­¤æˆ³ç—›äº†å°æ–¹ï¼Œæ‰€ä»¥ä¸å¾—ä¸æ•£é–‹ã€‚å¯æ˜¯ï¼Œå¯’å†·çš„å¤©æ°£åˆé©…ä½¿ç‰ å€‘æ“ åœ¨ä¸€èµ·ï¼ŒåŒæ¨£çš„äº‹æƒ…é‡è¤‡ç™¼ç”Ÿï¼Œç‰ å€‘çµ‚æ–¼æ˜ç™½ï¼›ä¸è¦å¤ªè¿‘ï¼Œä¹Ÿä¸è¦å¤ªé ï¼Œæœ€å¥½å½¼æ­¤ä¿æŒä¸€å®šçš„è·é›¢ã€‚ã€é€™å€‹æ•…äº‹çš„é“ç†ä»ç„¶è²«ç©¿åœ¨æˆ‘å€‘çš„ç¾å¯¦ç”Ÿæ´»ä¸­ï¼Œè©¦å°±æ­¤å¯«ä¸€ç¯‡æ–‡ç« ã€‚',
    'å€‹äººç§éš±æ¯”å…¬çœ¾çŸ¥æƒ…æ¬Šæ›´é‡è¦ï¼Œä½ åŒæ„å—ï¼Ÿè«‡è«‡ä½ çš„çœ‹æ³•ã€‚',
    'é¦™æ¸¯æ˜¯ä¸€å€‹ç‰©è³ªç”Ÿæ´»ååˆ†å¯Œåº¶çš„åœ°æ–¹ï¼Œå¯æ˜¯åœ¨å¤šå€‹åœ‹éš›æ€§çš„èª¿æŸ¥ä¸­ï¼Œã€Œå¿«æ¨‚æŒ‡æ•¸ã€çš„æ’åä¸¦ä¸é«˜ã€‚æœ‰äººèªç‚ºå¯Œåº¶çš„ç‰©è³ªç”Ÿæ´»åä»¤äººé›£ä»¥å¿«æ¨‚ï¼›ä¹Ÿæœ‰äººèªç‚ºå¯Œåº¶çš„ç‰©è³ªç”Ÿæ´»æ˜¯å¿«æ¨‚çš„åŸºç¤ã€‚é€™å…©ç¨®çœ‹æ³•ï¼Œä½ æ¯”è¼ƒèªåŒå“ªä¸€ç¨®ï¼Ÿè©¦è«‡è«‡ä½ çš„çœ‹æ³•ã€‚',
    'é¢å°ä¸åŒæ„è¦‹ï¼Œæœ‰äººèªç‚ºæ‡‰æ“šç†åŠ›çˆ­ï¼Œå …å®ˆç«‹å ´ï¼›æœ‰äººèªç‚ºæ‡‰å½¼æ­¤åŒ…å®¹ï¼Œæ±‚åŒå­˜ç•°ã€‚ä¸Šè¿°å…©ç¨®æ…‹åº¦ï¼Œå“ªä¸€ç¨®è¼ƒç‚ºç†æƒ³ï¼Ÿè©¦è«‡è«‡ä½ çš„çœ‹æ³•ã€‚',
    'æœ‰äººèªç‚ºçˆ¶æ¯æ•™é¤Šå­å¥³ï¼Œæ‡‰è©²çµ¦äºˆç©ºé–“ï¼Œè®“å­å¥³è‡ªç”±ç™¼å±•ï¼›æœ‰äººèªç‚ºæ‡‰è©²çµ¦äºˆæ˜ç¢ºçš„æŒ‡å°ï¼Œè®“å­å¥³ä¾å¾ã€‚ä¸Šè¿°æ•™é¤Šå­å¥³çš„æ–¹æ³•ï¼Œå“ªä¸€ç¨®è¼ƒç‚ºç†æƒ³ï¼Ÿè©¦è«‡è«‡ä½ çš„çœ‹æ³•ã€‚',
    'æœ‰äººèªªï¼šã€Œèˆ‡å…¶è¿½éš¨æ½®æµï¼Œä¸å¦‚å±•ç¾å€‹äººé¢¨æ ¼ã€‚ã€ä½ å°é€™å¥è©±æœ‰ä»€éº¼çœ‹æ³•ï¼Ÿ',
    'æœ‰äººèªªï¼šã€Œæ£’ä¸‹å‡ºå­å­ï¼Œåš´å¸«å‡ºé«˜å¾’ã€‚ã€ä¹Ÿæœ‰äººèªªï¼šã€Œçè³æ˜¯æ•™è‚²çš„æ©ç‰©ã€‚ã€ä½ å°é€™å…©ç¨®èªªæ³•æœ‰ä»€éº¼æ„è¦‹ï¼Ÿ',
    'ç¾ä»Šç¤¾æœƒï¼Œè¨±å¤šäººèªç‚ºè²¡å¯Œèˆ‡ç¤¾æœƒåœ°ä½æˆæ­£æ¯”ï¼Œè²¡å¯Œæ„ˆå¤šï¼Œç¤¾æœƒåœ°ä½æ„ˆé«˜ã€‚ä½ çš„çœ‹æ³•å¦‚ä½•ï¼Ÿ',
    'æœ‰äººèªç‚ºè®šè³æ˜¯æˆåŠŸçš„æœ€å¤§æ¨å‹•åŠ›ï¼Œä½ åŒæ„å—ï¼Ÿè©¦ä½œæ–‡ä¸€ç¯‡ï¼Œè«‡è«‡ä½ çš„çœ‹æ³•ã€‚',
    'æœ‰äººèªªï¼šã€Œè±è£•çš„ç‰©è³ªç”Ÿæ´»å°±æ˜¯æœ€ç¾å¥½çš„ç”Ÿæ´»ã€‚ã€ä½ åŒæ„å—ï¼Ÿè©¦è«‡è«‡ä½ çš„çœ‹æ³•ã€‚',
    'ç²å–çŸ¥è­˜æ˜¯é€šå¾€æˆåŠŸçš„å”¯ä¸€é€”å¾‘ï¼Œä½ åŒæ„å—ï¼Ÿè©¦è«‡è«‡ä½ çš„çœ‹æ³•ã€‚',
    'è«‡è«‡é’å¹´äººæ‡‰å¦‚ä½•å…‹æœå›°é›£',
    'ã€Œå¾‹å·±ä»¥åš´ï¼Œå¾…äººä»¥å¯¬ã€‚ã€è«‡è«‡ä½ å°é€™è©±çš„çœ‹æ³•ã€‚',
    'ã€ŒæˆåŠŸæ˜¯æ†å¿ƒçš„åŸºçŸ³ã€è«‡è«‡ä½ å°é€™è©±çš„çœ‹æ³•ã€‚',
    'è«–ã€Œå®¶æœ‰ä¸€è€ï¼Œå¦‚æœ‰ä¸€å¯¶ã€',
    'é€ç¦®ä¹‹æˆ‘è¦‹',
    'é„‰æ‘ç™¼å±•ç‚ºå·¥æ¥­å€ï¼ŒåŸä¾†çš„å¤©ç„¶æ™¯ç‰©å—åˆ°ç ´å£ã€‚æœ‰äººèªªï¼šã€Œæœ‰ç ´å£æ‰æœ‰å»ºè¨­ã€‚ã€ä¹Ÿæœ‰äººèªªï¼šã€Œé€™ç¨®å»ºè¨­ç ´å£äº†äººå€‘ç”Ÿæ´»çš„æƒ…è¶£ã€‚ã€ä½ çš„çœ‹æ³•åˆæ€æ¨£ï¼Ÿè©¦èªªå‡ºä½ å€‹äººçš„æ„è¦‹ã€‚'
];

        let lastTopic = localStorage.getItem("lastTopic") || "";
        let lastArgumentTopic = localStorage.getItem("lastArgumentTopic") || "";

        // ç¯„ç–‡å®šç¾©
        const categories = {
            "ç‰‡æ®µæå¯«": {
                commentNote: "å¿…é ˆç”¨ç¹é«”å­—ã€‚é»è©•æ™‚ï¼Œå¿…é ˆå°±ä¸Šè¿°ç”Ÿæˆæˆ–è¼¸å…¥çš„é¡Œç›®ã€çµæ§‹æ®µé‡é»ã€æƒ…ç¯€å¤§è¦ï¼Œé»è©•å¤§ç¶±å…§å®¹æ˜¯å¦æ‰£é¡Œã€‚å¿…é ˆå¾ä»¥ä¸‹å…©å€‹è§’åº¦é»è©•ï¼šå…¶ä¸€ï¼Œé»è©•ã€Œçµæ§‹æ®µé‡é»èˆ‡é¡Œç›®æ˜¯å¦æœ‰é—œã€æœ‰å¤šå¤§é‚è¼¯é—œä¿‚ã€ï¼›å…¶äºŒï¼Œé»è©•ã€Œæƒ…ç¯€å¤§è¦æ˜¯å¦èƒ½çªé¡¯å‡ºçµæ§‹æ®µé‡é»ã€å¯«ä½œå…§å®¹çš„è©³ç•¥å‰ªè£æ˜¯å¦æ°ç•¶ï¼Œå³æ˜¯å¦æœ‰æ•ˆçªé¡¯çµæ§‹æ®µé‡é»ï¼ˆå‰ææ˜¯çµæ§‹æ®µé‡é»æ‰£é¡Œï¼Œå¦‚ä¸æ‰£é¡Œï¼Œæƒ…ç¯€å¤§è¦åŠå¯«ä½œå…§å®¹å°±è‚¯å®šä¸æ‰£é¡Œï¼‰ï¼Œé»è©•æ™‚è¦æ³¨æ„å¯«ä½œå…§å®¹ã€çµæ§‹æ®µé‡é»å…©è€…èˆ‡é¡Œç›®æœ‰æ²’æœ‰åœ¨é¡¯æ€§çš„é‚è¼¯é—œä¿‚ï¼Œå¯«ä½œå…§å®¹è¦æ±‚çš„ä¸åªæ˜¯å–ææƒ…ç¯€å¯ä»¥èˆ‡çµæ§‹æ®µé‡é»åŠé¡Œç›®æ§‹æˆé‚è¼¯é—œä¿‚ï¼Œæ›´è¦ç”¨åˆé©çš„æƒ…ç¯€è©³ç•¥å‰ªè£å’Œæ‰£é¡Œå°æ®µå»çªé¡¯èˆ‡è©²éƒ¨ä»½çš„é‚è¼¯é—œä¿‚ï¼Œä½¿å¯«ä½œå…§å®¹æ˜ç¢ºå‘¼æ‡‰çµæ§‹æ®µé‡é»åŠé¡Œç›®ã€‚ã€è‹¥é›¢é¡Œï¼Œç¯„ä¾‹ä¸å¿…æ ¹æ“šåŸæ–‡é›¢é¡Œå…§å®¹æ”¹å¯«ï¼Œè€Œæ”¹å¯«éƒ¨ä»½å¿…é ˆåŒ…å«æ‰£é¡Œå°æ®µï¼ˆéƒ¨ä»½å¥å­ç›´æ¥å‘¼æ‡‰çµæ§‹æ®µé‡é»æˆ–é¡Œç›®ï¼‰ã€‚é»è©•åˆ†ç‚ºä¸‰éƒ¨åˆ†ï¼š### é»è©•ã€### å»ºè­°ã€### æ”¹å¯«ç¯„ä¾‹ã€‚åªé¸å–æœ€é‡è¦çš„ä¸€è‡³å…©é»è©•è«–ï¼Œæ‡‰å…ˆèšç„¦åœ¨è©•è«–å¯«ä½œå…§å®¹æ˜¯å¦åœ¨æ‰£é€£é¡Œç›®åŠçµæ§‹æ®µé‡é»çš„æ–¹å‘ä»¥åŠå…¶è©³ç•¥å‰ªè£ï¼Œå…¶æ¬¡æ–¹ç‚ºæ–‡å¥ï¼ˆåŒ…æ‹¬ç¤ºç¾æ•˜äº‹å’Œå¯†åº¦ï¼‰ã€‚è‹¥çµæ§‹æ®µé‡é»æˆ–æƒ…ç¯€å¤§è¦èˆ‡é¡Œç›®é—œä¿‚è–„å¼±ï¼Œé ˆåœ¨é»è©•ä¸­æŒ‡å‡ºä¸¦é‡é»èªªæ˜ã€‚é»è©•å…§å®¹è¦ç²¾ç°¡ã€ä¸€èªä¸­çš„ï¼Œåƒ…å°‡æœ€é—œéµã€å½±éŸ¿æœ€å¤§çš„ä¸€è‡³å…©é …è©•èªé»å‡ºä¾†ï¼Œè‹¥æ‰£é¡Œå’Œè©³ç•¥å‰ªè£ç­‰éƒ½è™•ç†ä¸å¾—ç•¶ï¼Œå‰‡ä¸éœ€è¦è©³è©•æ–‡å¥ã€‚ç‰‡æ®µæå¯«éœ€äº¤æ›¿é‹ç”¨å°ç‰©ä»¶ã€å‹•ä½œã€å°è©±å’Œå…§å¿ƒç¨ç™½ï¼Œæé«˜æ–‡å¥å¯†åº¦ï¼ˆè©åŒ¯æ·±åº¦é«˜ã€ç‰©è±¡è±å¯Œã€å¯¦è©æ¯”ä¾‹é«˜ï¼‰ï¼Œä½†å¿…é ˆæ³¨æ„ï¼šé ï¼ˆä¾‹å¦‚é€£ç”¨å°ç‰©ä»¶åšä¸»èªçš„å¥å­ï¼‰å‰‡ä¸å®œï¼Œé©æ™‚éœ€è¦ä»¥äººç‰©ä½œä¸»èªï¼Œäº¤æ›¿å»ç”¨ï¼Œæœ‰æ™‚åŠ å…¥å…§å¿ƒç¨ç™½æœƒä»¤æ–‡å¥é¡¯å¾—æ›´è‡ªç„¶ï¼Œå¯†åº¦ä¸å®œéé«˜ï¼Œé©æ™‚è¦åŠ å…¥è™›è©æ”¾ç·©ç¯€å¥ï¼Œå¼µå¼›æœ‰åº¦ã€‚æ­¤å¤–ï¼Œè¦æ§åˆ¶è©³ç•¥ç¯€å¥ï¼Œè©³å¯«èˆ‡é¡Œç›®ç›¸é—œçš„éƒ¨åˆ†ï¼Œç•¥å¯«æ¬¡è¦å…§å®¹ã€‚æ–‡å¥å¯†åº¦ä¹Ÿæ˜¯å¥½æ–‡ç­†çš„æ¨™æº–ï¼Œéœ€ç´å…¥è€ƒé‡ã€‚é»è©•å’Œå»ºè­°ä¸æ‡‰ä½¿ç”¨åˆ—é»å½¢å¼ï¼Œæ‡‰ä»¥æ®µè½å‘ˆç¾ã€‚æ­¤å¤–ï¼Œå‡å¦‚æ•´é«”è¡¨ç¾çœŸçš„ä¸éŒ¯ï¼Œæ²’æœ‰å¤§å•é¡Œï¼Œåœ¨é»è©•æ™‚ç¨±è®šå³å¯ï¼Œä¸å¿…å¹æ¯›æ±‚ç–µåœ°æ‰¹è©•ï¼Œä½†åœ¨å¯«ä½œå…§å®¹çš„ã€Œæ‰£é¡Œã€é‚è¼¯ä¸Šå¿…é ˆåš´è¬¹æŠŠé—œã€‚"
            },
            "å¤§ç¶±": {
                commentNote: "å¿…é ˆç”¨ç¹é«”å­—ã€‚é»è©•æ™‚ï¼Œå¿…é ˆå°±ä¸Šè¿°ç”Ÿæˆçš„é¡Œç›®é»è©•å¤§ç¶±å…§å®¹æ˜¯å¦æ‰£é¡Œï¼Œå‡å¦‚å¤§ç¶±é›¢é¡Œï¼Œç¯„ä¾‹ä¾¿ä¸å¿…æ ¹æ“šé›¢é¡Œå…§å®¹æ”¹å¯«ã€‚æ­¤å¤–ï¼Œé»è©•æ‡‰åˆ†ç‚ºä¸‰å€‹éƒ¨ä»½ï¼šé»è©•ã€å»ºè­°ã€æ”¹å¯«ç¯„ä¾‹ã€‚åœ¨å¯«ä½œå¤§ç¶±æ™‚ï¼Œå­¸ç”Ÿæ‡‰å±•ç¤ºä»–å€‘çµ„ç¹”æ€è·¯å’Œçµæ§‹æ•…äº‹çš„èƒ½åŠ›ã€‚è©•åˆ†æ™‚ï¼Œè«‹æ³¨æ„å¤§ç¶±çš„é‚è¼¯æ€§ã€æ¢ç†æ€§ä»¥åŠæ˜¯å¦åŒ…å«äº†æ•…äº‹çš„èµ·æ‰¿è½‰åˆæˆ–ä¸‰ç·šçµæ§‹ï¼ˆå³æ‰€è¬‚ã€Œæ•£æ•˜ã€ï¼Œæœ‰ä»¥ä¸‹ä¸‰é»è¦æ³¨æ„ï¼šå…¶ä¸€ï¼Œä¸‰ç·šçš„åˆ†é¡ç¯„ç–‡ç›¸åŒï¼›å…¶äºŒï¼Œä¸‰ç·šæˆ–æœ‰å±¤éé—œä¿‚ï¼Œæˆ–èƒ½å¾ä¸‰å€‹è§’åº¦å‘ˆç¾åŒä¸€å€‹ä¸»é¡Œï¼›å…¶ä¸‰ï¼Œä¸‰ç·šçš„æƒ…ç¯€ç™¼å±•ä¸èƒ½éæ–¼ç›¸ä¼¼ï¼›å…¶å››ï¼Œæ‰€åˆ†ä¹‹è§’åº¦èƒ½çªé¡¯èˆ‡ä¸»é¡Œç›¸é—œçš„ç«‹æ„ã€‚ã€Œä¸‰ç·šã€ä¾‹å­å¦‚ä¸‹ï¼šé¡Œç›®ç‚ºã€Œå‹‡æ°£ã€ï¼Œå‰‡å¯ç”¨ã€Œå¹´å°‘æ™‚çš„å‹‡æ°£ã€ç‚ºä¸€ç·šã€ã€Œå¹´é’æ™‚çš„å‹‡æ°£ã€ç‚ºäºŒç·šã€ã€Œå¹´è€æ™‚çš„å‹‡æ°£ã€ç‚ºä¸‰ç·šï¼›åˆå¦‚ä»¥ã€Œé‡éŠèˆŠåœ°æ‰€è¦‹æœ‰æ„Ÿã€ï¼Œå‰‡å¯ç”¨åœ¨æ•…é„‰çš„ä¸åŒã€Œåœ°ã€æ‰€è¦‹ä½œä¸‰ç·šåˆ†é¡ï¼Œä¾‹å¦‚è€å±‹ã€å¾Œå±±ç­‰ã€‚å¿…é ˆç¢ºä¿æ¯æ¢ç·šçš„ã€Œçµæ§‹æ®µé‡é»ã€æ¸…æ™°é»æ˜ä¸‰ç·šçš„åˆ†é¡ç¯„ç–‡ã€æƒ³çªé¡¯é¡Œç›®çš„ç”šéº¼è¦é»ã€èˆ‡é¡Œç›®å¦‚ä½•æ‰£é€£ç­‰ï¼Œä»¥åŠã€Œåˆã€èƒ½çµ±æ”ç¸½çµå…¨æ–‡ç«‹æ„ï¼‰ã€‚è¦é€éƒ¨åˆ†åˆ†ææ¯å€‹çµæ§‹æ®µèˆ‡é¡Œç›®çš„é—œä¿‚æœ‰å¤šå¤§ï¼Œä¸¦åœ¨é»è©•ä¸­æ˜ç¢ºæŒ‡å‡ºã€‚æ­¤å¤–ï¼Œåœ¨ã€Œæ”¹å¯«å¾Œçš„å¤§ç¶±ã€,å…¶ã€Œçµæ§‹æ®µé‡é»ã€å¿…é ˆäº¤ä»£è©²éƒ¨ä»½èˆ‡é¡Œç›®ä¹‹é–“çš„é‚è¼¯é—œä¿‚ï¼Œå³æ€æ¨£åšåˆ°æ‰£é¡Œã€‚æ­¤å¤–ï¼Œç”±æ–¼æ˜¯æ‡‰è©¦æ–‡ç« ï¼Œå› æ­¤æ”¹å¯«å¾Œçš„å¤§ç¶±é¿å…éä»½å…·ç†è«–å“²å­¸æ€§åŠæ–‡å­¸æ€§ï¼Œä»¥è‡³æ–¼è„«é›¢äº†ç¾å¯¦å’Œæ—¥å¸¸ç”Ÿæ´»ï¼Œäº¦åœç¹äººåœ¨ç¶“æ­·çš„æƒ…æ„Ÿå’Œé«”æ‚Ÿè¨­å®šï¼Œå¿…é ˆæ¸›å°‘æ¦‚å¿µæ¨¡ç³Šçš„è¡“èªï¼Œä¾‹å¦‚ã€Œæƒ…æ„Ÿè¼‰é«”ã€åŠã€Œæ™‚ç©ºçš„å…±å‰µã€ï¼Œè«‹ç”¨æ—¥å¸¸åŒ–ç”¨èªæè¿°ã€‚æ­¤å¤–ï¼Œã€Œæ”¹å¯«å¾Œçš„å¤§ç¶±ã€ä¸å®œåªåœç¹ä¸€ä»¶äº‹æ•˜å¯«ï¼Œé€™æ¨£æœƒå®¹æ˜“å¯«å¾—å¤ªæŠ½è±¡ï¼Œæ‡‰é©æ™‚åŠ æ’äººç‰©èˆ‡äººç‰©ä¹‹é–“çš„å›æ†¶æˆ–å…¶ä»–ç¶“æ­·ï¼Œä»¤æ–‡ç« çœ‹èµ·ä¾†æ›´å…·é«”å¯¦åœ¨ã€‚æ­¤å¤–ï¼Œå¤§ç¶±ä¸æ˜¯å…¨ç¯‡æ–‡ç« ï¼Œæœ€é‡è¦çš„æ˜¯åœ¨é»è©•æ™‚åˆ†æå…¶çµæ§‹æ®µåŠæƒ…ç¯€å¤§è¦çš„æ€è·¯æ˜¯å¦æ‰£ç·Šé¡Œç›®ï¼Œæ–¹å‘æ˜¯å¦åˆç†ã€æ­£ç¢ºã€‚å‡å¦‚æ•´é«”è¡¨ç¾çœŸçš„ä¸éŒ¯ï¼Œæ²’æœ‰å¤§å•é¡Œï¼Œåœ¨é»è©•æ™‚ç¨±è®šå³å¯ï¼Œä¸å¿…å¹æ¯›æ±‚ç–µåœ°æ‰¹è©•ã€‚"
            },
            "æ•˜äº‹ç‰©è±¡": {
                commentNote: "å¿…é ˆç”¨ç¹é«”å­—ã€‚åœ¨ã€Œæ•˜äº‹ç‰©è±¡ã€ä¸­ï¼Œå­¸ç”Ÿéœ€è¦é‹ç”¨è±å¯Œçš„ç‰©è±¡ä¾†å¢å¼·æ•…äº‹çš„ç”Ÿå‹•æ€§å’ŒçœŸå¯¦æ„Ÿã€‚ç‰©è±¡æ‡‰èˆ‡é¡Œç›®ã€å–æå’Œæ•…äº‹èƒŒæ™¯ç·Šå¯†ç›¸é—œï¼Œä¸¦ä¸”èƒ½å¤ æœ‰æ•ˆåœ°è¡¨é”äººç‰©çš„æƒ…æ„Ÿå’Œæ•…äº‹çš„ä¸»é¡Œã€‚è«‹ç¢ºä¿ç”Ÿæˆçš„ç‰©è±¡ä¸é‡è¤‡ï¼Œä¸¦ä¸”æ’ç‰ˆæ¸…æ™°æ˜“è®€ã€‚æ­¤å¤–ï¼Œæ¯å€‹ç‰©è±¡éƒ½å¿…é ˆç”±å…©å€‹å­—æ§‹æˆã€‚"
            },
            "é–±è®€": {
                commentNote: "å¿…é ˆç”¨ç¹é«”å­—ã€‚é»è©•æ™‚ï¼Œéœ€è©•ä¼°ç­”é¡Œæ–¹å‘æ˜¯å¦åˆç†ã€æ–‡æœ¬ä¾æ“šæ˜¯å¦å……å¯¦å…·é«”ã€é—¡é‡‹æ¨è«–æ˜¯å¦åš´è¬¹ã€ä¸»é¡Œå¥æ˜¯å¦æ¸…æ™°ã€‚æ–‡æœ¬ä¾æ“šæ‡‰æ¦‚æ‹¬æ­¸ç´è€Œéç›´æ¥å¼•ç”¨åŸæ–‡ï¼Œé™¤éé¡Œç›®ä¸­æœ‰ã€æ‘˜éŒ„ã€å­—çœ¼ã€‚æ”¹å¯«ç¯„ä¾‹æ‡‰ä½¿ç­”æ¡ˆæ›´åœ“è¶³ï¼Œä½†è‹¥å­¸ç”Ÿç­”é¡Œæ–¹å‘éŒ¯èª¤ï¼Œå‰‡ä¸è·Ÿå¾éŒ¯èª¤æ–¹å‘æ”¹å¯«ã€‚é»è©•ä»¥æ®µè½å½¢å¼å‘ˆç¾ï¼Œä¸ä½¿ç”¨åˆ—é»ã€‚åœ¨ã€Œæ”¹å¯«ç¯„ä¾‹ã€å‰ï¼ŒåŠ å…¥ç­”é¡Œæ­¥é©ŸåŠæ€è·¯ï¼Œæè¿°å„éƒ¨åˆ†æ–¹å‘ï¼Œæ­¥é©Ÿå› é¡Œåˆ¶å®œï¼Œå¯èƒ½åŒ…æ‹¬ã€é‹ªå¢Šã€‘ã€ã€å›æ‡‰ã€‘ã€ã€æ–‡æœ¬ä¾æ“šã€‘ã€ã€é—¡é‡‹ã€‘ï¼Œéˆæ´»é‹ç”¨ã€‚æ¯å€‹æ­¥é©Ÿä»¥ã€æ­¥é©Ÿåã€‘æ¨™é¡ŒåŠ åˆ†è¡Œå…§å®¹å‘ˆç¾ï¼Œæ’ç‰ˆæ•´é½Šã€‚è¡¨æ ¼ä¸­åªåŒ…å«æ–‡å­—å’Œæ¨™é»ï¼Œä¸å«ã€---ã€ç­‰ç¬¦è™Ÿã€‚",
                guideNote: "å¿…é ˆç”¨ç¹é«”å­—ã€‚åƒ…ç”Ÿæˆä¸‰é“å•é¡Œä»¥å¼•å°ç”¨å®¶å›ç­”é–±è®€ç¯‡ç« çš„å•é¡Œï¼Œå•é¡Œé‡å°é¡Œç›®ï¼Œå¼•å°æ€è€ƒæ–‡æœ¬å…§å®¹ã€çµæ§‹å’Œä¸»é¡Œï¼Œä¸å«å…¶ä»–å…§å®¹ã€‚ç”Ÿæˆ15å€‹ç”±å…©å€‹å­—æ§‹æˆçš„ç­”é¡Œè©åŒ¯ï¼Œè©åŒ¯éœ€èˆ‡ç­”é¡Œæ–¹å‘ç›¸é—œä¸”ä¸é‡è¤‡ï¼Œæ—¨åœ¨ä»¤ç”¨å®¶åœ¨ç­”é¡Œæ™‚æœ‰æ›´è±å¯Œçš„è©åŒ¯ï¼Œç¢ºä¿ä¸èƒ½æœ‰ã€Œ|--------|ã€åŠã€Œ| è©åŒ¯ |ã€ï¼Œæ’ç‰ˆæ•´é½Šã€‚è¼¸å‡ºåˆ†ç‚ºå…©å€‹éƒ¨åˆ†ï¼š### ç­”é¡ŒæŒ‡å¼•ã€### ç­”é¡Œè©åŒ¯ã€‚ç­”é¡ŒæŒ‡å¼•ä»¥å•é¡Œå½¢å¼å‘ˆç¾ï¼Œæ¯å€‹å•é¡Œå ä¸€è¡Œã€‚ç­”é¡Œè©åŒ¯ä»¥è¡¨æ ¼å½¢å¼å‘ˆç¾ï¼Œæ¯å€‹è©å ä¸€è¡Œã€‚æ­¤å¤–ï¼Œå‡å¦‚æ•´é«”è¡¨ç¾çœŸçš„ä¸éŒ¯ï¼Œæ²’æœ‰å¤§å•é¡Œï¼Œåœ¨é»è©•æ™‚ç¨±è®šå³å¯ï¼Œä¸å¿…å¹æ¯›æ±‚ç–µåœ°æ‰¹è©•ã€‚"
            },
            "èª²å¤–æ›¸ç±": {
                chatNote: "å¿…é ˆç”¨ç¹é«”å­—ï¼Œå¤šç”¨EMOJIï¼Œå¶çˆ¾å¯ä»¥ç”¨ä¸€ä¸‹ç¶²çµ¡ç”¨èªã€‚",
                seriousChatNote: "å¿…é ˆç”¨ç¹é«”å­—ï¼Œç”¨èªè²¼è¿‘æ—¥å¸¸ç”Ÿæ´»ï¼Œå›æ‡‰ä¸è¦ç†è«–åŒ–ï¼Œä¸è¦ç”¨ç¶²çµ¡ç”¨èªï¼Œä¹Ÿä¸è¦ç”¨EMOJIã€‚"
            },
            "æ•´åˆæ‹“å±•": {
                topicPrompt: "è«‹ç”Ÿæˆä¸€é“é©åˆä¸­å­¸ç”Ÿç·´ç¿’æ•´åˆæ‹“å±•çš„é¡Œç›®ï¼Œé¡Œç›®æ‡‰åŒ…å«ä¸»é¡Œå¥ï¼ˆä¸»é¡Œå¥çµ•å°ä¸èƒ½æ˜¯å•å¥ï¼‰å’ŒæŠ„éŒ„è³‡æ–™ï¼ˆæŠ„éŒ„è³‡æ–™å¿…é ˆä¸åŒ…å«ä»»ä½•æ•¸æ“šï¼Œä¸»è¦åŒ…æ‹¬æ´»å‹•å…§å®¹åŠç´°ç¯€ï¼Œæ ¼å¼å¦‚ã€Œç¤¾å€æ¼«æ­¥ç”±å°è³å“¡å¸¶é ˜åƒåŠ è€…éŠè¦½ç¤¾å€ï¼Œå…±åŒèª¦è®€èˆ‡ç¤¾å€ç›¸é—œçš„æ–‡å­¸ä½œå“ï¼Œæ„Ÿå—ç¤¾å€é­…åŠ›ã€‚ã€ä¸å¾—åŒ…å«å¼•è™Ÿæˆ–äººç‰©å°è©±ï¼Œè€Œä¸”ä¸å¾—è¶…é30å­—ï¼‰ï¼Œä¸¦ç¬¦åˆä»¥ä¸‹æ–‡é¡å’Œå–æç¯„åœã€‚æ–‡é¡ï¼šæ›¸ä¿¡ã€è©•è«–ã€å»ºè­°æ›¸ã€æ¼”è¬›è¾­ã€å ±å‘Šã€å°ˆé¡Œæ–‡ç« ã€‚å–æç¯„åœï¼šä¾‹å¦‚ã€Œè«‹éš¨æ©Ÿé¸æ“‡ä¸€å€‹ä¸»é¡Œï¼Œä¸”è©²ä¸»é¡Œå¿…é ˆèˆ‡ä»¥ä¸‹åˆ—å‡ºçš„æ‰€æœ‰ä¸»é¡Œï¼ˆé‹å‹•ã€ç”Ÿæ¶¯è¦åŠƒã€è²¬ä»»ã€æ•™è‚²ã€æ–‡åŒ–ã€ç¤¾æœƒã€æ­·å²ã€åœ°ç†ã€è—è¡“ã€é«”è‚²ã€æ³•å¾‹ã€å¥åº·ã€å¿ƒç†ã€å®¶åº­ã€å‹èª¼ã€å°±æ¥­ã€ç¶“æ¿Ÿã€ç”Ÿæ…‹ã€èƒ½æºã€è³‡æºã€å®‰å…¨ã€ç¶²è·¯ã€åª’é«”ã€è³‡è¨Šã€é“å¾·ã€èª ä¿¡ã€å…¬å¹³ã€è‡ªç”±ã€æ¬Šåˆ©ã€ç¾©å‹™ã€éš±ç§ã€ç¦®å„€ã€æ¦œæ¨£ã€å‰µæ–°ã€å‰µæ¥­ã€æ¶ˆè²»ã€å„²è“„ã€æ°‘æ—ã€èªè¨€ã€å®—æ•™ã€å‚³çµ±ã€ç¾ä»£ã€åŸé„‰ã€ç¤¾å€ã€å…¬ç›Šã€æ…ˆå–„ã€ç½å®³ã€é†«ç™‚ã€ç–¾ç—…ã€é£²é£Ÿã€æ—…éŠã€å»ºç¯‰ã€å¨›æ¨‚ã€éŸ³æ¨‚ã€é›»å½±ã€æ–‡å­¸ã€äººå£ã€æ€§åˆ¥ã€å¹´é½¡ã€è·æ¥­ã€å­¸æ¥­ã€è€ƒè©¦ã€å‡å­¸ã€æ ¡åœ’ã€å¸«ç”Ÿã€åŒå­¸ã€èª²å¤–ã€ç¤¾åœ˜ã€ç«¶è³½ã€å¿—é¡˜ã€å£“åŠ›ã€è‡ªå¾‹ã€æ™‚é–“ã€èˆˆè¶£ã€ç¿’æ…£ã€éŠæˆ²ã€ç¡çœ ã€æ°£å€™ã€æ±™æŸ“ã€é–±è®€ã€ï¼Œä½†å‡ºé¡Œè«‹å¤šå…ƒåŒ–ä¸€é»ï¼Œäº¦ä¸è¦æ¯æ¬¡éƒ½æ˜¯èˆ‡å¥½è™•ç›¸é—œçš„ï¼Œå¦å‰‡ç”¨å®¶å¤šç”Ÿæˆå¹¾æ¬¡ï¼Œä¾¿æœƒé‡åˆ°é¡ä¼¼çš„é¡Œç›®ã€‚è¦æ±‚ï¼š1. ä¸»é¡Œå¥ç°¡æ½”ï¼Œ20å­—ä»¥å…§ã€‚2. æŠ„éŒ„è³‡æ–™ç‚ºä¸€æ®µæ–‡å­—ï¼Œä¸è¶…é100å­—ã€‚3. è¼¸å‡ºæ ¼å¼ç‚ºï¼šä¸»é¡Œå¥ï¼š...\næŠ„éŒ„è³‡æ–™ï¼š...\n4. å…§å®¹ç°¡æ½”æ˜äº†ï¼Œé¿å…å†—é•·ã€‚5. é¡Œç›®å¤šæ¨£åŒ–ï¼Œé¿å…é‡è¤‡ã€‚",
                commentNote: "å¿…é ˆç”¨ç¹é«”å­—ã€‚é»è©•æ™‚ï¼Œéœ€è©•ä¼°ã€Œæ•´åˆæ‹“å±•ã€æ˜¯å¦èƒ½é—¡é‡‹ã€ŒæŠ„éŒ„è³‡æ–™ã€èˆ‡ã€Œä¸»é¡Œå¥ã€çš„é‚è¼¯é—œä¿‚ã€‚éœ€åˆ¤æ–·ï¼š1.ã€Œæ‹“å±•ã€æ–¹å‘æ˜¯å¦æ­£ç¢ºï¼ˆå³æ˜¯å¦èƒ½è«–è­‰ä¸»é¡Œå¥ï¼‰ï¼›2.æ¨è«–æ˜¯å¦åš´è¬¹ï¼›3.æ˜¯å¦å…·é«”ä¸ç©ºæ³›ã€‚ã€Œé»è©•ã€æ™‚ï¼Œè‹¥æ–¹å‘ä¸æ­£ç¢ºï¼Œéœ€æŒ‡å‡ºä¸¦å»ºè­°å¦‚ä½•ä¿®è¨‚ï¼Œéœ€æŒ‡å°ç·Šæ‰£ä¸»é¡Œå¥ï¼Œäº¦é ˆåˆ†æä¸»é¡Œå¥å’Œé¡Œç›®ä»»å‹™çš„é—œä¿‚æ˜¯å¦ç·Šå¯†ï¼Œä¾‹å¦‚é¡Œç›®ä»»å‹™ç‚ºæå‡ºå»ºè­°ï¼Œä½†ä¸»é¡Œå¥ç„¦é»å»æ˜¯æè¿°å•é¡Œï¼Œå‰‡å±¬æ–¼ä¸å¦¥ç•¶ã€‚ã€Œæ”¹å¯«ã€æ™‚äº¦ä¸èƒ½é †è‘—ã€Œæ•´åˆæ‹“å±•ã€éŒ¯èª¤æ€è·¯æ”¹å–„ï¼Œéœ€æ‰£ç·Šä¸»é¡Œå¥ï¼Œå‡å¦‚ä¸»é¡Œå¥æœ¬èº«å°±æœªèƒ½ç·Šæ‰£é¡Œç›®çš„ä»»å‹™ï¼Œå‰‡ä¸æ‡‰åœç¹æœ¬èº«éŒ¯èª¤çš„ä¸»é¡Œå¥æ”¹å¯«ï¼Œè¦åœ¨ã€Œæ”¹å¯«ã€éƒ¨ä»½é‡å°ä¸€å€‹æ­£ç¢ºçš„ä¸»é¡Œå¥ä½œæ”¹å¯«ã€‚æ­¤å¤–ï¼Œæ”¹å¯«éƒ¨ä»½ä¸å®œåˆ†ç‚ºå¤ªå¤šè§’åº¦è«–è¿°ï¼Œé€™æ¨£æœƒä»¤é—¡é‡‹è¼ƒé›¶æ•£ï¼Œé ˆå°±æœ€å¤š2å€‹è§’åº¦æ·±å…¥åˆ†æã€é—¡é‡‹ã€‚æ”¹å¯«éƒ¨ä»½ä¸å¾—è¶…é180å­—ï¼Œä¸”ä¸å¾—è™›æ§‹è³‡æ–™ï¼ŒåŒ…æ‹¬æ•¸æ“šåŠèª¿æŸ¥ï¼Œä¸è¦è‡ªæ“¬ã€Œæ ¹æ“šèª¿æŸ¥ã€ä¹‹é¡ï¼Œåªå¯æ ¹æ“šæŠ„éŒ„è³‡æ–™è£œå……åˆç†ç´°ç¯€ï¼Œã€Œæ”¹å¯«ã€éƒ¨ä»½ä¸è¦é‡è¤‡ç”¨å®¶è¼¸å…¥çš„ã€ŒæŠ„éŒ„è³‡æ–™ã€ï¼Œæœƒç™½ç™½æµªè²»ç©ºé–“ã€‚æ­¤å¤–ï¼Œã€Œæ”¹å¯«ã€äº¦è¦åš´è¬¹å°æ‡‰ä¸»é¡Œå¥åŠæŠ„éŒ„è³‡æ–™é—œä¿‚ï¼Œä¾‹å¦‚ä¸»é¡Œå¥æè¿°æ´»å‹•å•é¡Œï¼Œå‰‡åœ¨ã€Œæ”¹å¯«ã€çš„éƒ¨ä»½ä¸å®œèšç„¦åœ¨æ”¹å–„æªæ–½ï¼Œå¿…é ˆæ³¨æ„è©³ç•¥ã€è¼•é‡ï¼Œæ‰èƒ½çªé¡¯ä¸»é¡Œå¥ã€‚æ­¤å¤–ï¼Œã€Œæ”¹å¯«ã€äº¦è¦ç•™æ„é¡Œç›®ä»»å‹™ï¼Œä¸è¦åœ¨ã€Œæ”¹å¯«ã€æ™‚æœƒé †è‘—ç”¨å®¶è©³ç•¥ä¸ç•¶æˆ–éŒ¯èª¤çš„ã€Œæ•´åˆæ‹“å±•ã€æ€è·¯æ”¹å¯«ã€‚æ­¤å¤–ï¼Œã€Œæ”¹å¯«ã€éƒ¨ä»½ä¸è¦å¤ªæ•¸æ“šåŒ–ï¼Œä¾‹å¦‚åšè¨ˆç®—åŠåˆ†ææ•¸æ“šç­‰ï¼Œé€™éƒ¨ä»½æœ€é‡è¦æ˜¯äº¤ä»£äº‹ç†çš„é‚è¼¯é—œä¿‚ã€‚é»è©•åˆ†ç‚ºä¸‰éƒ¨åˆ†ï¼š### é»è©•ã€### å»ºè­°ã€### æ”¹å¯«ã€‚é»è©•å’Œå»ºè­°ä»¥æ®µè½å½¢å¼å‘ˆç¾ï¼Œä¸ä½¿ç”¨åˆ—é»ã€‚æ‹“å±•æ–¹æ³•ï¼šä»¥æŠ„éŒ„è³‡æ–™ç‚ºèµ·é»ï¼Œä¸»é¡Œå¥ç‚ºçµ‚é»ï¼Œé‹ç”¨æ©«å‘æ‹“å±•ï¼ˆé€æ­¥æ¨è«–ï¼Œå›ç­”ã€Œç‚ºä½•ã€æˆ–ã€Œå¦‚ä½•ã€ï¼‰æˆ–ç›´å‘æ‹“å±•ï¼ˆè£œå……å…·é«”ä¾‹å­æˆ–ç´°ç¯€ï¼‰ã€‚æ”¹å¯«éƒ¨ä»½å¿…é ˆæ³¨æ„è¦é‹ç”¨å¥½æ©«å‘æ‹“å±•åŠç›´å‘æ‹“å±•çš„æŠ€å·§ã€‚å¸¸è¦‹å•é¡ŒåŒ…æ‹¬ï¼šæ¨è«–æ–¹å‘éŒ¯èª¤ã€æœªæ¨è«–åˆ°åº•ã€æ¨è«–é»é‡è¤‡ã€æ¨è«–è·³è„«ã€æœ‰é‡ç„¡è³ªï¼Œéœ€é‡å°æ€§æŒ‡å‡ºï¼Œæ”¹å¯«æ™‚äº¦è¦é¿å…çŠ¯ä¸‹é€™äº›å•é¡Œã€‚",
                guideNote: "å¿…é ˆç”¨ç¹é«”å­—ã€‚åƒ…ç”Ÿæˆä¸‰é“å•é¡Œä»¥å¼•å°ç”¨å®¶æ€è€ƒå¦‚ä½•æ ¹æ“šè¡¨æ ¼è³‡æ–™åšå¥½æ•´åˆæ‹“å±•ï¼Œå•é¡Œæ‡‰åœç¹ä¸»é¡Œå¥å’ŒæŠ„éŒ„è³‡æ–™çš„é‚è¼¯é—œä¿‚ï¼Œå¼•å°ç”¨å®¶æ€è€ƒå¦‚ä½•é—¡é‡‹å’Œæ‹“å±•ã€‚è«‹ä¸è¦é‹ç”¨æ­åŒ–å¥åŠè©åŒ¯ï¼Œä¾‹å¦‚ã€Œé—œè¯æ€§ã€ã€ã€Œå¯¦æ•ˆæ€§ã€ï¼Œé€™äº›å­—è©æ„ç¾©ä¸æ˜ç¢ºï¼Œä½†ç”¨ç”Ÿæ´»åŒ–ä¸€é»ã€å…·é«”ä¸€é»çš„å­—è©ç”Ÿæˆå•é¡Œã€‚è¼¸å‡ºåˆ†ç‚ºä¸€å€‹éƒ¨åˆ†ï¼š### æŒ‡å¼•å•é¡Œã€‚æŒ‡å¼•å•é¡Œä»¥å•é¡Œå½¢å¼å‘ˆç¾ï¼Œæ¯å€‹å•é¡Œå ä¸€è¡Œã€‚"
            },
           "è­°è«–": {
                outlineCommentNote: "å¿…é ˆç”¨ç¹é«”å­—ã€‚é»è©•æ™‚ï¼Œå¿…é ˆå°±ä¸Šè¿°ç”Ÿæˆæˆ–è¼¸å…¥çš„é¡Œç›®é»è©•å¤§ç¶±å…§å®¹æ˜¯å¦æ‰£é¡Œã€‚å¿…é ˆå¾ä»¥ä¸‹è§’åº¦é»è©•ï¼š1. è«–é»æ˜¯å¦æ¸…æ™°æ˜ç¢ºï¼Œä¸€èªä¸­çš„ï¼Œèƒ½ç›´æ¥å‘¼æ‡‰é¡Œç›®ï¼›2. ç”¨å®¶æä¾›çš„è«–æ“šèˆ‡è«–é»æ˜¯å¦å¯†åˆ‡ç›¸é—œï¼Œå…¨æ–‡è«–æ“šæ˜¯å¦æ¶µè“‹å¤ä»Šä¸­å¤–ï¼ˆä¸éœ€è¦æ¯æ®µéƒ½æœ‰å¤ä»Šä¸­å¤–çš„ä¾‹å­ï¼‰ï¼›3. æ®µå…§è«–æ“šçš„è©³ç•¥æœ‰å¹¾ç¨®æ¨¡å¼ï¼šå…©å€‹è©³çš„è«–æ“šï¼Œæˆ–ä¸€è©³æ•¸ç•¥ï¼Œæˆ–æ•¸ç•¥ï¼Œå› æ‡‰æ®µè½è«–è¿°éœ€è¦è€Œå®šï¼Œä»¥è£½é€ è®ŠåŒ–ï¼›4. è«–è­‰æ–¹å‘æ˜¯å¦åˆç†ï¼Œèƒ½åˆç†è§£é‡‹è«–æ“šèˆ‡è«–é»çš„é—œä¿‚ï¼ˆä½†è¦ç†è§£é€™éƒ¨ä»½åªæ˜¯å¤§ç¶±ï¼Œä¸å¯èƒ½è«–è­‰å¾—éå¸¸å…·é«”å’Œè©³ç´°ï¼Œåªè¦æ–¹å‘æ­£ç¢ºå³å¯æ¥å—ï¼‰ï¼›5. å…¨æ–‡è„ˆçµ¡æ˜¯å¦åˆ†æ˜ï¼Œå¯é‹ç”¨å‰ä¸­å¾Œæ§‹å»ºæ³•ï¼ˆå‰ï¼šèƒŒå¾Œæ¦‚å¿µ/æ¦‚å¿µèƒŒæ™¯ã€ç¾å¯¦ä¾‹å­ã€é§è«–ï¼›ä¸­ï¼šåˆ†é¡è«–è¿°ï¼Œä¾‹å¦‚é¡Œç›®ç‚ºã€Šè«‡æ†¤æ€’ã€‹ï¼Œå¯åˆ†ç‚ºã€Œå…¬æ€’ã€å’Œã€Œç§æ€’ã€ï¼Œæˆ–åˆ†æ‹†è«–è¿°ï¼Œä¾‹å¦‚é¡Œç›®ç‚ºã€Œé¢å°ä¸åŒæ„è¦‹ï¼Œæœ‰äººèªç‚ºæ‡‰æ“šç†åŠ›çˆ­ï¼Œå …å®ˆç«‹å ´ï¼›æœ‰äººèªç‚ºæ‡‰å½¼æ­¤åŒ…å®¹ï¼Œæ±‚åŒå­˜ç•°ã€‚ä¸Šè¿°å…©ç¨®æ…‹åº¦ï¼Œå“ªä¸€ç¨®è¼ƒç‚ºç†æƒ³ï¼Ÿè©¦è«‡è«‡ä½ çš„çœ‹æ³•ã€‚ã€ï¼Œå¯ä¸€æ®µè«–è¿°ã€Œæ±‚åŒã€ï¼Œå¦ä¸€æ®µè«–è¿°ã€Œå­˜ç•°ã€ï¼›å¾Œï¼šä¾‹å¤–æƒ…æ³/å…¶ä»–çœ‹æ³•ã€æ–¹æ³•ï¼‰ã€‚å³ä½¿é‹ç”¨ã€Œé™³SIRèªæ°£ã€ï¼Œã€Œå»ºè­°ã€åŠã€Œæ”¹å¯«å¾Œçš„å¤§ç¶±ã€éƒ½å¿…é ˆæ­£ç¶“åš´è‚…ï¼Œä¸è¦é‹ç”¨EMOJIã€‚æ­¤å¤–ï¼Œå‡å¦‚å…¨æ–‡æœ‰å…­æ®µæˆ–ä»¥ä¸Šï¼Œå‰‡æ‡‰åœ¨ç¬¬äºŒæ®µæˆ–æœ«äºŒçš„æ®µè½åšé§è«–ï¼Œé»è©•ã€å»ºè­°åŠæ”¹å¯«å¾Œçš„å¤§ç¶±éƒ½è¦æ³¨æ„é€™é»ã€‚æ­¤å¤–ï¼Œä¸è¦åˆ—é»å’Œé‹ç”¨ã€Œ*ã€ç­‰ç¬¦è™Ÿï¼Œå¿…é ˆä»¥æ®µè½å’Œå®Œæ•´å¥å­æ–¹å¼ç”Ÿæˆæ”¹å¯«å¾Œçš„å¤§ç¶±ã€‚æ­¤å¤–ï¼Œåœ¨å»ºè­°å’Œæ”¹å¯«å¾Œçš„å¤§ç¶±éƒ¨ä»½ï¼Œè‹¥è§¸åŠä¸€äº›ä¾‹å­æˆ–å…¸æ•…ï¼Œå¿…é ˆå…·é«”èªªæ˜è©²ä¾‹å­æˆ–å…¸æ•…çš„ä¾†é¾å»è„ˆï¼Œä»¥åŠè¦æ¸…æ¥šèªªæ˜å¦‚ä½•é‹ç”¨è©²ä¾‹å­æˆ–å…¸æ•…å»è­‰ç«‹è«–é»ã€‚æ­¤å¤–ï¼Œç„¡è«–é»è©•ã€å»ºè­°æˆ–æ”¹å¯«å¾Œçš„å¤§ç¶±ï¼Œç”¨èªéƒ½å¿…é ˆç”Ÿæ´»åŒ–ï¼Œè¦æ‘’æ£„éæ–¼æŠ½è±¡å’Œç†è«–çš„è¡¨é”ã€‚æ­¤å¤–ï¼Œé»è©•æ‡‰åˆ†ç‚ºä¸‰å€‹éƒ¨ä»½ï¼šé»è©•ã€å»ºè­°ã€æ”¹å¯«ç¯„ä¾‹ã€‚åªé¸å–æœ€é‡è¦çš„ä¸€è‡³å…©é»è©•è«–ï¼Œæ‡‰å…ˆèšç„¦åœ¨è«–é»ã€è«–æ“šå’Œè«–è­‰çš„è³ªé‡ï¼Œå…¶æ¬¡æ–¹ç‚ºçµæ§‹ã€‚é»è©•å…§å®¹è¦ç²¾ç°¡ã€ä¸€èªä¸­çš„ã€‚è‹¥å¤§ç¶±é›¢é¡Œï¼Œæ”¹å¯«å¾Œçš„å¤§ç¶±ä¸å¿…æ ¹æ“šé›¢é¡Œå…§å®¹æ”¹å¯«ã€‚",
                writingCommentNote: "å¿…é ˆç”¨ç¹é«”å­—ã€‚é»è©•æ™‚ï¼Œå¿…é ˆå°±ç”¨å®¶æä¾›çš„å…§å®¹å»é»è©•ï¼Œä¸è¦æé€ ç”¨å®¶æ²’æœ‰è¼¸å…¥çš„å…§å®¹ä½œé»è©•ã€‚é ˆè©•ä¼°æ–‡ç« æ˜¯å¦ç¬¦åˆä»¥ä¸‹æ¨™æº–ï¼š1. è«–é»æ¸…æ™°æ˜ç¢ºï¼Œä¸€èªä¸­çš„ï¼Œèƒ½ç›´æ¥å‘¼æ‡‰é¡Œç›®ï¼›2. è«–æ“šèˆ‡è«–é»å¯†åˆ‡ç›¸é—œï¼Œå…¨æ–‡è«–æ“šæ¶µè“‹å¤ä»Šä¸­å¤–ï¼ˆä¸éœ€è¦æ¯æ®µéƒ½æœ‰å¤ä»Šä¸­å¤–çš„ä¾‹å­ï¼Œä¸è¦æé€ ç”¨å®¶æ²’æœ‰è¼¸å…¥çš„ä¾‹å­ä½œé»è©•ï¼Œå‡å¦‚ç¼ºå°‘ä¾‹å­ï¼Œç›´è¨€å…¶å•é¡Œå³å¯ã€‚è¦æ³¨æ„éçŒ¶ä¸åŠï¼Œå……å¡ä¾‹å­å‰‡æ„Ÿè¦ºç”Ÿç¡¬ï¼‰ï¼›3. è«–è­‰åš´è¬¹ï¼Œèƒ½å…·é«”è§£é‡‹è«–æ“šèˆ‡è«–é»çš„é—œä¿‚ï¼›4. æ³¨æ„æ–‡å¥å¯†åº¦ï¼ˆè©åŒ¯é‡ã€å¯¦è©åŠè™›è©æ¯”ä¾‹ï¼Œä½†éçŒ¶ä¸åŠï¼Œéé‡ä½¿ç”¨å¯¦è©å‰‡ç”Ÿç¡¬ï¼Œé©æ™‚åŠ å…¥è™›è©ï¼Œæ‰èƒ½ä½¿æ–‡å¥ç¯€å¥éŒ¯è½æœ‰è‡´ï¼‰åŠä¿®è¾­é‹ç”¨ï¼ˆå®œé©æ™‚é‹ç”¨æ’æ¯”å’Œæ¯”å–»ï¼‰ã€‚é»è©•åˆ†ç‚ºä¸‰éƒ¨åˆ†ï¼š### é»è©•ã€### å»ºè­°ã€### æ”¹å¯«ç¯„ä¾‹ã€‚é»è©•å’Œå»ºè­°ä»¥æ®µè½å½¢å¼å‘ˆç¾ï¼Œä¸ä½¿ç”¨åˆ—é»ã€‚å³ä½¿é‹ç”¨ã€Œé™³SIRèªæ°£ã€ï¼Œã€Œå»ºè­°ã€åŠã€Œæ”¹å¯«ç¯„ä¾‹ã€éƒ½å¿…é ˆæ­£ç¶“åš´è‚…åœ°è¡¨è¿°ï¼Œä¸è¦é‹ç”¨EMOJIã€‚ã€Œæ”¹å¯«ç¯„ä¾‹ã€æ‡‰ä»¥ç´”æ®µè½æ–¹å¼è¡¨è¿°ï¼Œä¸è¦é‹ç”¨EMOJIï¼Œä¸è¦é™„æœ‰ã€åŸæ–‡æ®µè½ã€‘åŠã€æ”¹å¯«æ®µè½ã€‘ç­‰æ¨™é¡Œ",
                guideNote: "å¿…é ˆç”¨ç¹é«”å­—ã€‚æ ¹æ“šç”¨æˆ¶è¼¸å…¥çš„é¡Œç›®ã€è«–é»ã€è«–æ“šå’Œè«–è­‰ï¼Œæä¾›ç›¸æ‡‰çš„åƒè€ƒå»ºè­°ï¼Œä½†æ‡‰é‡è³ªä¸é‡é‡ï¼ŒæŒ‡å¼•è«–é»ã€è«–æ“šæˆ–è«–è­‰éƒ½å®œåªèˆ‰ä¸€é …ï¼Œè€Œä¸”è«–è­‰å¿…é ˆç·Šæ‰£ç”¨å®¶æä¾›æˆ–ä½ ä¸Šè¿°ç”Ÿæˆçš„è«–æ“šä½œè«–è¿°ã€‚è‹¥åªè¼¸å…¥é¡Œç›®ï¼Œå‰‡æä¾›åƒè€ƒè«–é»ã€åƒè€ƒè«–æ“šå’Œåƒè€ƒè«–è­‰ï¼›è‹¥è¼¸å…¥é¡Œç›®å’Œè«–é»ï¼Œå‰‡æä¾›åƒè€ƒè«–æ“šå’Œåƒè€ƒè«–è­‰ï¼›è‹¥è¼¸å…¥é¡Œç›®å’Œè«–æ“šï¼Œå‰‡æä¾›åƒè€ƒè«–é»å’Œåƒè€ƒè«–è­‰ï¼Œå¦‚æ­¤é¡æ¨ã€‚è¼¸å‡ºåˆ†ç‚ºç›¸æ‡‰éƒ¨åˆ†ï¼š### åƒè€ƒè«–é»ã€### åƒè€ƒè«–æ“šã€### åƒè€ƒè«–è­‰ï¼ˆè¦–ç”¨æˆ¶è¼¸å…¥æƒ…æ³è€Œå®šï¼‰ã€‚æ¯éƒ¨åˆ†ä»¥æ®µè½å½¢å¼å‘ˆç¾ã€‚"
            }
        };

        // ç¯„ç–‡åˆ‡æ›
        document.getElementById("writingBtn").addEventListener("click", function() {
            showContainer("writingContainer");
        });
        document.getElementById("readingBtn").addEventListener("click", function() {
            showContainer("readingContainer");
        });

document.getElementById("manuscriptPaperBtn").addEventListener("click", function() {
    window.open("https://kenchan20141.github.io/manuscriptpaper/", "_blank");
});

        document.getElementById("aiGeneratorBtn").addEventListener("click", function() {
    window.open("https://kenchan20141.github.io/generator/", "_blank");
});

         document.getElementById("zhuoyuBtn").addEventListener("click", function() {
    window.open("https://kenchan20141.github.io/WCT/", "_blank");
});

        // ç‚ºã€Œæ‰‹å¯«æ–‡å­—è½‰æ›é›»è…¦æ–‡å­—ã€æŒ‰éˆ•æ·»åŠ é»æ“Šäº‹ä»¶è™•ç†å‡½æ•¸
document.getElementById("ocrBtn").addEventListener("click", function() {
    if (confirm("è«‹å°å¿ƒä¿è­·å€‹äººç§éš±ï¼Œä¸Šå‚³æª”æ¡ˆå‰ï¼Œå¿…é ˆå…ˆç¢ºèªåœ–ç‰‡æˆ–PDFé é¢æ²’æœ‰é€éœ²ä»»ä½•å€‹äººè³‡æ–™ï¼Œä¾‹å¦‚å§“åå’Œå­¸æ ¡åç¨±ç­‰ã€‚")) {
        window.open("https://www.i2ocr.com/free-online-image-ocr", "_blank");
    }
});


document.getElementById("zhiyunBtn").addEventListener("click", function() {
    window.open("https://script.google.com/a/macros/ccckyc.edu.hk/s/AKfycby1T18HxuFICIaR0LYWRuaqlpmglkL191bVl39MH69zj5CQ-uhozF17edtJ_T54NhZ5/exec", "_blank");
});

document.getElementById("selfLearningBtn").addEventListener("click", function() {
    window.open("https://621d05f47d591.site123.me/", "_blank");
});

document.getElementById("beishuBtn").addEventListener("click", function() {
    window.open("https://kenchan20141.github.io/timer/", "_blank");
});


document.getElementById("sansiBtn").addEventListener("click", function() {
    window.open("https://sansi.vercel.app/", "_blank");
});


document.getElementById("yuyiluBtn").addEventListener("click", function(event) {
    const menu = document.getElementById("yuyiluMenu");
    const btnRect = this.getBoundingClientRect(); // ç²å–æŒ‰éˆ•ä½ç½®
    menu.style.top = btnRect.bottom + "px"; // é¸å–®é ‚éƒ¨å°é½ŠæŒ‰éˆ•åº•éƒ¨
    menu.style.left = btnRect.left + "px"; // é¸å–®å·¦é‚Šå°é½ŠæŒ‰éˆ•å·¦é‚Š
    menu.style.display = menu.style.display === "block" ? "none" : "block";
});


// é»æ“Šå…¶ä»–åœ°æ–¹æ™‚éš±è—é¸å–®
document.addEventListener("click", function(event) {
    const menu = document.getElementById("yuyiluMenu");
    if (!menu.contains(event.target) && event.target !== document.getElementById("yuyiluBtn")) {
        menu.style.display = "none";
    }
});

        
        document.getElementById("booksBtn").addEventListener("click", function() {
            showContainer("booksContainer");
            loadBooksChat();
        });
        document.getElementById("expandBtn").addEventListener("click", function() {
            showContainer("expandContainer");
        });
        document.getElementById("argumentBtn").addEventListener("click", function() {
            showContainer("argumentContainer");
        });


        function showContainer(containerId) {
            document.getElementById("writingContainer").style.display = "none";
            document.getElementById("readingContainer").style.display = "none";
            document.getElementById("booksContainer").style.display = "none";
            document.getElementById("expandContainer").style.display = "none";
            document.getElementById("argumentContainer").style.display = "none";
            document.getElementById(containerId).style.display = "block";
            if (containerId === "writingContainer") {
                toggleWritingType();
                loadOutline();
            }
            if (containerId === "readingContainer") toggleReadingFunction();
            if (containerId === "expandContainer") toggleExpandFunction();
            if (containerId === "booksContainer") toggleBooksDiscussionState();
            if (containerId === "argumentContainer") toggleArgumentType();
        }


// åˆ‡æ›å·¥å…·åŠŸèƒ½æ¦‚è¦½çš„é¡¯ç¤ºå’Œéš±è—
function toggleOverview() {
    const overviewContainer = document.getElementById("overviewContainer");
    const toggleBtn = document.getElementById("toggleOverviewBtn");
    if (overviewContainer.style.display === "none") {
        overviewContainer.style.display = "block";
        toggleBtn.textContent = "éš±è—ã€ŒåŠŸèƒ½æ¦‚è¦½ã€";
    } else {
        overviewContainer.style.display = "none";
        toggleBtn.textContent = "é¡¯ç¤ºã€ŒåŠŸèƒ½æ¦‚è¦½ã€";
    }
}
        

        // åˆ‡æ›å¯«ä½œé¡å‹
        function toggleWritingType() {
            const writingType = document.getElementById("writingType").value;
            const outlineStructureArea = document.getElementById("outlineStructureArea");
            const narrativeElementsArea = document.getElementById("narrativeElementsArea");
            const writingContent = document.getElementById("writingContent");
            const outlineTableArea = document.getElementById("outlineTableArea");
            const writingToneLabel = document.getElementById("writingToneLabel");
            const writingTone = document.getElementById("writingTone");
            const outlineButtons = document.getElementById("outlineButtons");

            if (writingType === "å¤§ç¶±") {
                outlineStructureArea.style.display = "block";
                narrativeElementsArea.style.display = "none";
                writingContent.style.display = "none";
                outlineTableArea.style.display = "block";
                generateOutlineTable();
                loadOutline();
                writingToneLabel.style.display = "block";
                writingTone.style.display = "block";
                outlineButtons.style.display = "block";
            } else if (writingType === "æ•˜äº‹ç‰©è±¡") {
                outlineStructureArea.style.display = "none";
                narrativeElementsArea.style.display = "block";
                writingContent.style.display = "none";
                outlineTableArea.innerHTML = "";
                outlineTableArea.style.display = "none";
                writingToneLabel.style.display = "none";
                writingTone.style.display = "none";
                outlineButtons.style.display = "none";
            } else { // ç‰‡æ®µæå¯«
                outlineStructureArea.style.display = "none";
                narrativeElementsArea.style.display = "none";
                writingContent.style.display = "block";
                outlineTableArea.innerHTML = "";
                outlineTableArea.style.display = "none";
                writingToneLabel.style.display = "block";
                writingTone.style.display = "block";
                outlineButtons.style.display = "none";
            }
            toggleTopicInput();
        }

        // ä¿å­˜å¤§ç¶±
        function saveOutline() {
            const structure = document.getElementById("structure").value;
            const parts = structure === "fourPart" ? ["èµ·", "æ‰¿", "è½‰", "åˆ"] : ["èµ·", "ä¸€ç·š", "äºŒç·š", "ä¸‰ç·š", "åˆ"];
            const outlineData = parts.map((part, index) => {
                const focusId = structure + "Focus" + (index + 1);
                const plotId = structure + "Plot" + (index + 1);
                const focus = document.getElementById(focusId)?.value.trim() || "";
                const plot = document.getElementById(plotId)?.value.trim() || "";
                return { part, focus, plot };
            });
            localStorage.setItem("outlineData", JSON.stringify(outlineData));
            localStorage.setItem("outlineStructure", structure);
            alert("å¤§ç¶±å·²å„²å­˜");
        }

        // æ¸…ç©ºå¤§ç¶±
        function clearOutline() {
            if (confirm("ç¢ºå®šè¦æ¸…ç©ºå¤§ç¶±å—ï¼Ÿ")) {
                const structure = document.getElementById("structure").value;
                const parts = structure === "fourPart" ? ["èµ·", "æ‰¿", "è½‰", "åˆ"] : ["èµ·", "ä¸€ç·š", "äºŒç·š", "ä¸‰ç·š", "åˆ"];
                parts.forEach((part, index) => {
                    const focusId = structure + "Focus" + (index + 1);
                    const plotId = structure + "Plot" + (index + 1);
                    if (document.getElementById(focusId)) document.getElementById(focusId).value = "";
                    if (document.getElementById(plotId)) document.getElementById(plotId).value = "";
                });
                localStorage.removeItem("outlineData");
                localStorage.removeItem("outlineStructure");
            }
        }

        // åŠ è¼‰å¤§ç¶±
        function loadOutline() {
            const savedStructure = localStorage.getItem("outlineStructure");
            const savedData = localStorage.getItem("outlineData");
            if (savedStructure && savedData) {
                document.getElementById("structure").value = savedStructure;
                generateOutlineTable();
                try {
                    const parsedData = JSON.parse(savedData);
                    parsedData.forEach((item, index) => {
                        const focusId = savedStructure + "Focus" + (index + 1);
                        const plotId = savedStructure + "Plot" + (index + 1);
                        const focusElement = document.getElementById(focusId);
                        const plotElement = document.getElementById(plotId);
                        if (focusElement) focusElement.value = item.focus;
                        if (plotElement) plotElement.value = item.plot;
                    });
                } catch (e) {
                    console.error("Error parsing outlineData:", e);
                }
            }
        }

        // ä¿å­˜èª²å¤–æ›¸ç±å°è©±
        function saveBooksChat() {
            const chatHistoryDiv = document.getElementById("chatHistory");
            const bookTitle = document.getElementById("bookTitle").value.trim();
            const author = document.getElementById("author").value.trim();
            const discussionQuestion = document.getElementById("discussionQuestion").value.trim();
            const booksTone = document.getElementById("booksTone").value;
            localStorage.setItem("booksChatHistory", chatHistoryDiv.innerHTML);
            localStorage.setItem("booksChatState", JSON.stringify({
                bookTitle, author, discussionQuestion, booksTone
            }));
            alert("å°è©±å·²å„²å­˜");
        }

        // æ¸…ç©ºèª²å¤–æ›¸ç±å°è©±
        function clearBooksChat() {
            if (confirm("ç¢ºå®šè¦æ¸…ç©ºå°è©±å—ï¼Ÿ")) {
                document.getElementById("chatHistory").innerHTML = "";
                document.getElementById("bookTitle").value = "";
                document.getElementById("author").value = "";
                document.getElementById("discussionQuestion").value = "";
                document.getElementById("userInput").value = "";
                document.getElementById("userInput").style.display = "none";
                document.getElementById("continueBtn").style.display = "none";
                localStorage.removeItem("booksChatHistory");
                localStorage.removeItem("booksChatState");
                chatHistory = [];
                bookTitle = "";
                author = "";
                discussionQuestion = "";
                booksTone = "";
            }
        }

        // åŠ è¼‰èª²å¤–æ›¸ç±å°è©±ä¸¦æ¢å¾©ç‹€æ…‹
        function loadBooksChat() {
            const savedChat = localStorage.getItem("booksChatHistory");
            const savedState = localStorage.getItem("booksChatState");
            if (savedChat) {
                document.getElementById("chatHistory").innerHTML = savedChat;
            }
            if (savedState) {
                const state = JSON.parse(savedState);
                document.getElementById("bookTitle").value = state.bookTitle || "";
                document.getElementById("author").value = state.author || "";
                document.getElementById("discussionQuestion").value = state.discussionQuestion || "";
                document.getElementById("booksTone").value = state.booksTone || "casual";
                bookTitle = state.bookTitle || "";
                author = state.author || "";
                discussionQuestion = state.discussionQuestion || "";
                booksTone = state.booksTone || "casual";
                if (savedChat) {
                    document.getElementById("userInput").style.display = "block";
                    document.getElementById("continueBtn").style.display = "block";
                }
            }
        }

        // åˆ‡æ›èª²å¤–æ›¸ç±è¨è«–ç‹€æ…‹
        function toggleBooksDiscussionState() {
            const savedChat = localStorage.getItem("booksChatHistory");
            if (savedChat) {
                document.getElementById("userInput").style.display = "block";
                document.getElementById("continueBtn").style.display = "block";
            } else {
                document.getElementById("userInput").style.display = "none";
                document.getElementById("continueBtn").style.display = "none";
            }
        }

        // åˆ‡æ›é–±è®€åŠŸèƒ½
        function toggleReadingFunction() {
            const readingFunction = document.getElementById("readingFunction").value;
            const studentAnswerArea = document.getElementById("studentAnswerArea");
            const readingToneLabel = document.getElementById("readingToneLabel");
            const readingTone = document.getElementById("readingTone");
            if (readingFunction === "comment") {
                studentAnswerArea.style.display = "block";
                readingToneLabel.style.display = "block";
                readingTone.style.display = "block";
            } else {
                studentAnswerArea.style.display = "none";
                readingToneLabel.style.display = "none";
                readingTone.style.display = "none";
            }
        }

        // åˆ‡æ›æ•´åˆæ‹“å±•åŠŸèƒ½
        function toggleExpandFunction() {
            const expandFunction = document.getElementById("expandFunction").value;
            const expandWritingArea = document.getElementById("expandWritingArea");
            const expandGuideArea = document.getElementById("expandGuideArea");
            const expandTopicSelectionArea = document.getElementById("expandTopicSelectionArea");
            const expandToneLabel = document.getElementById("expandToneLabel");
            const expandTone = document.getElementById("expandTone");
            if (expandFunction === "comment") {
                expandWritingArea.style.display = "block";
                expandGuideArea.style.display = "none";
                expandTopicSelectionArea.style.display = "block";
                expandToneLabel.style.display = "block";
                expandTone.style.display = "block";
            } else {
                expandWritingArea.style.display = "none";
                expandGuideArea.style.display = "block";
                expandTopicSelectionArea.style.display = "none";
                expandToneLabel.style.display = "none";
                expandTone.style.display = "none";
            }
        }

        // åˆ‡æ›é¡Œç›®è¼¸å…¥æ–¹å¼ï¼ˆå¯«ä½œï¼‰
        function toggleTopicInput() {
            const writingType = document.getElementById("writingType").value;
            const option = document.getElementById("topicOption").value;
            const customTopicArea = document.getElementById("customTopicArea");
            if (option === "generate") {
                document.getElementById("generateTopicArea").style.display = "block";
                customTopicArea.style.display = "none";
                document.getElementById("topicResult").innerHTML = "";
                localStorage.removeItem("currentTopic");
                localStorage.removeItem("currentFocus");
                localStorage.removeItem("currentPlot");
            } else {
                document.getElementById("generateTopicArea").style.display = "none";
                customTopicArea.style.display = "block";
                document.getElementById("topicResult").innerHTML = "";
                localStorage.removeItem("currentTopic");
                localStorage.removeItem("currentFocus");
                localStorage.removeItem("currentPlot");
                if (writingType === "ç‰‡æ®µæå¯«") {
                    customTopicArea.innerHTML = `
                        <table>
                            <tr><th colspan="2">è‡ªè¨‚é¡Œç›®</th></tr>
                            <tr><td colspan="2"><input type="text" id="customTitle" placeholder="è«‹è¼¸å…¥è‡ªè¨‚é¡Œç›®"></td></tr>
                            <tr><td>çµæ§‹æ®µé‡é»/å…¨æ–‡é‡é»</td><td>æƒ…ç¯€å¤§è¦</td></tr>
                            <tr><td><textarea id="customFocus" rows="3" placeholder="è«‹è¼¸å…¥çµæ§‹æ®µé‡é»"></textarea></td>
                                <td><textarea id="customPlot" rows="3" placeholder="è«‹è¼¸å…¥æƒ…ç¯€å¤§è¦"></textarea></td></tr>
                        </table>
                        <button onclick="setCustomTopic()">ç¢ºèªé¡Œç›®</button>
                    `;
                } else {
                    customTopicArea.innerHTML = `
                        <input type="text" id="customTopic" placeholder="è«‹è¼¸å…¥è‡ªè¨‚é¡Œç›®">
                        <button onclick="setCustomTopic()">ç¢ºèªé¡Œç›®</button>
                    `;
                }
            }
        }

        // åˆ‡æ›é¡Œç›®è¼¸å…¥æ–¹å¼ï¼ˆæ•´åˆæ‹“å±•ï¼‰
        function toggleExpandTopicInput() {
            const option = document.getElementById("expandTopicOption").value;
            const customTopicArea = document.getElementById("expandCustomTopicArea");
            if (option === "generate") {
                document.getElementById("expandGenerateTopicArea").style.display = "block";
                customTopicArea.style.display = "none";
                document.getElementById("expandTopicResult").innerHTML = "";
                localStorage.removeItem("expandCurrentTitle");
                localStorage.removeItem("expandCurrentTheme");
                localStorage.removeItem("expandCurrentData");
            } else {
                document.getElementById("expandGenerateTopicArea").style.display = "none";
                customTopicArea.style.display = "block";
                document.getElementById("expandTopicResult").innerHTML = "";
                localStorage.removeItem("expandCurrentTitle");
                localStorage.removeItem("expandCurrentTheme");
                localStorage.removeItem("expandCurrentData");
            }
        }

        // åˆ‡æ›è­°è«–åŠŸèƒ½
        function toggleArgumentType() {
            const argumentType = document.getElementById("argumentType").value;
            const outlineArea = document.getElementById("argumentOutlineArea");
            const writingArea = document.getElementById("argumentWritingArea");
            const guideArea = document.getElementById("argumentGuideArea");
            const topicSelectionArea = document.getElementById("argumentTopicSelectionArea");

            if (argumentType === "outline") {
                outlineArea.style.display = "block";
                writingArea.style.display = "none";
                guideArea.style.display = "none";
                topicSelectionArea.style.display = "block";
                generateArgumentOutlineTable();
            } else if (argumentType === "writing") {
                outlineArea.style.display = "none";
                writingArea.style.display = "block";
                guideArea.style.display = "none";
                topicSelectionArea.style.display = "block";
            } else if (argumentType === "guide") {
                outlineArea.style.display = "none";
                writingArea.style.display = "none";
                guideArea.style.display = "block";
                topicSelectionArea.style.display = "none";
            }
            toggleArgumentTopicInput();
        }

        // åˆ‡æ›é¡Œç›®è¼¸å…¥æ–¹å¼ï¼ˆè­°è«–ï¼‰
        function toggleArgumentTopicInput() {
            const option = document.getElementById("argumentTopicOption").value;
            const customTopicArea = document.getElementById("argumentCustomTopicArea");
            if (option === "generate") {
                document.getElementById("argumentGenerateTopicArea").style.display = "block";
                customTopicArea.style.display = "none";
                document.getElementById("argumentTopicResult").innerHTML = "";
                localStorage.removeItem("argumentCurrentTopic");
            } else {
                document.getElementById("argumentGenerateTopicArea").style.display = "none";
                customTopicArea.style.display = "block";
                document.getElementById("argumentTopicResult").innerHTML = "";
                localStorage.removeItem("argumentCurrentTopic");
            }
        }

        // ç”Ÿæˆè­°è«–é¡Œç›®
        async function generateArgumentTopic() {
            let selectedTopic;
            do {
                selectedTopic = argumentTopics[Math.floor(Math.random() * argumentTopics.length)];
            } while (selectedTopic === lastArgumentTopic && argumentTopics.length > 1);
            lastArgumentTopic = selectedTopic;
            localStorage.setItem("lastArgumentTopic", lastArgumentTopic);
            document.getElementById("argumentTopicResult").innerHTML = "ä»Šæ—¥é¡Œç›®ï¼š<strong>" + selectedTopic + "</strong>";
            localStorage.setItem("argumentCurrentTopic", selectedTopic);
        }

        // è¨­å®šè‡ªè¨‚é¡Œç›®ï¼ˆè­°è«–ï¼‰
        function setArgumentCustomTopic() {
            const customTopic = document.getElementById("argumentCustomTopic").value.trim();
            if (!customTopic) {
                alert("è«‹è¼¸å…¥è‡ªè¨‚é¡Œç›®");
                return;
            }
            document.getElementById("argumentTopicResult").innerHTML = "è‡ªè¨‚é¡Œç›®ï¼š<strong>" + customTopic + "</strong>";
            localStorage.setItem("argumentCurrentTopic", customTopic);
        }

        // ç”Ÿæˆè­°è«–å¤§ç¶±è¡¨æ ¼
        function generateArgumentOutlineTable() {
    const savedData = localStorage.getItem("argumentOutlineData");
    let outlineData = [];
    if (savedData) {
        try {
            outlineData = JSON.parse(savedData);
        } catch (e) {
            console.error("Error parsing argumentOutlineData:", e);
        }
    }
    if (outlineData.length === 0) {
        outlineData = [
            { part: "èµ·", point: "", evidence: "" },
            { part: "çµæ§‹æ®µä¸€", point: "", evidence: "" },
            { part: "çµæ§‹æ®µäºŒ", point: "", evidence: "" },
            { part: "çµæ§‹æ®µä¸‰", point: "", evidence: "" },
            { part: "åˆ", point: "", evidence: "" }
        ];
    }
    let tableHTML = "<div class='table-container'><table id='argumentOutlineTable'><tr><th>éƒ¨ä»½</th><th>è«–é»</th><th>è«–æ“šåŠè«–è­‰</th></tr>";
    outlineData.forEach((item, index) => {
        tableHTML += `<tr><td>${item.part}</td><td><textarea id="argumentPoint${index}" rows="3">${item.point}</textarea></td><td><textarea id="argumentEvidence${index}" rows="3">${item.evidence}</textarea></td></tr>`;
    });
    tableHTML += "</table></div>";
    document.getElementById("argumentOutlineTableArea").innerHTML = tableHTML;
}

function addArgumentStructureSegment() {
    const table = document.getElementById("argumentOutlineTable");
    const rows = table.rows;
    let structureSegmentCount = 0;
    for (let i = 1; i < rows.length - 1; i++) { // è·³éè¡¨é ­å’Œã€Œåˆã€
        if (rows[i].cells[0].innerText.startsWith("çµæ§‹æ®µ")) {
            structureSegmentCount++;
        }
    }
    const newSegmentNumber = structureSegmentCount + 1;
    const chineseNumbers = ["ä¸€", "äºŒ", "ä¸‰", "å››", "äº”", "å…­", "ä¸ƒ", "å…«", "ä¹", "å"];
    const segmentName = `çµæ§‹æ®µ${chineseNumbers[newSegmentNumber - 1] || newSegmentNumber}`;
    const newRowIndex = rows.length - 1; // åœ¨ã€Œåˆã€ä¹‹å‰æ’å…¥
    const newRow = table.insertRow(newRowIndex);
    const cell1 = newRow.insertCell(0);
    const cell2 = newRow.insertCell(1);
    const cell3 = newRow.insertCell(2);
    cell1.innerText = segmentName;
    cell2.innerHTML = `<textarea id="argumentPoint${newRowIndex - 1}" rows="3"></textarea>`;
    cell3.innerHTML = `<textarea id="argumentEvidence${newRowIndex - 1}" rows="3"></textarea>`;
}

        // ä¿å­˜è­°è«–å¤§ç¶±
        function saveArgumentOutline() {
    const table = document.getElementById("argumentOutlineTable");
    const rows = table.rows;
    const outlineData = [];
    for (let i = 1; i < rows.length; i++) { // è·³éè¡¨é ­
        const part = rows[i].cells[0].innerText;
        const pointTextarea = rows[i].cells[1].querySelector("textarea");
        const evidenceTextarea = rows[i].cells[2].querySelector("textarea");
        const point = pointTextarea ? pointTextarea.value.trim() : "";
        const evidence = evidenceTextarea ? evidenceTextarea.value.trim() : "";
        outlineData.push({ part, point, evidence });
    }
    localStorage.setItem("argumentOutlineData", JSON.stringify(outlineData));
    alert("å¤§ç¶±å·²å„²å­˜");
}

        // æ¸…ç©ºè­°è«–å¤§ç¶±
        function clearArgumentOutline() {
            if (confirm("ç¢ºå®šè¦æ¸…ç©ºå¤§ç¶±å—ï¼Ÿ")) {
                const table = document.getElementById("argumentOutlineTable");
                const rows = table.rows;
                for (let i = 1; i < rows.length; i++) {
                    document.getElementById(`argumentPoint${i - 1}`).value = "";
                    document.getElementById(`argumentEvidence${i - 1}`).value = "";
                }
                localStorage.removeItem("argumentOutlineData");
            }
        }

        // æäº¤è­°è«–å¤§ç¶±
// æäº¤è­°è«–å¤§ç¶±
async function submitArgumentOutline() {
    const topic = localStorage.getItem("argumentCurrentTopic");
    if (!topic) {
        alert("è«‹å…ˆè¨­å®šé¡Œç›®");
        return;
    }
    const table = document.getElementById("argumentOutlineTable");
    const rows = table.rows;
    const outlineData = [];
    for (let i = 1; i < rows.length; i++) { // è·³éè¡¨é ­
        const part = rows[i].cells[0].innerText;
        const pointTextarea = rows[i].cells[1].querySelector("textarea");
        const evidenceTextarea = rows[i].cells[2].querySelector("textarea");
        const point = pointTextarea ? pointTextarea.value.trim() : "";
        const evidence = evidenceTextarea ? evidenceTextarea.value.trim() : "";
        if (!point || !evidence) {
            alert("è«‹å¡«å¯«æ‰€æœ‰å¤§ç¶±è¡¨æ ¼");
            return;
        }
        outlineData.push({ part, point, evidence });
    }
    const tone = document.getElementById("argumentOutlineTone").value;
    let toneNote = tone === "chen" ? "è«‹ç”¨è¼•é¬†éš¨æ„çš„èªæ°£é€²è¡Œé»è©•å’Œå»ºè­°ï¼Œå¤šç”¨EMOJIï¼Œå¶çˆ¾ä½¿ç”¨ç¶²çµ¡ç”¨èªï¼Œç”¨èªè¦æ—¥å¸¸ç”Ÿæ´»åŒ–ä¸€é»ã€‚å¦‚æœç”¨æˆ¶è¡¨ç¾è‰¯å¥½ï¼Œè«‹å¤§åŠ è®šè³ï¼›å¦‚æœç”¨æˆ¶è¡¨ç¾ä¸å¥½ï¼Œå¯ä»¥å–„æ„åœ°æ¶æ„ä¸€ä¸‹ï¼Œä½†è¦æ³¨æ„å°ºåº¦ï¼Œä¸èƒ½å‚·å®³ç”¨æˆ¶çš„è‡ªå°Šå¿ƒã€‚æ¶æ„æ™‚ï¼Œå¯é‹ç”¨ç”Ÿæ´»åŒ–çš„æ¯”å–»ã€‚(ã€Œé»è©•ã€è«‹ç”¨ã€Œé™³SIRèªæ°£ã€ï¼Œè€Œã€Œå»ºè­°ã€åŠã€Œæ”¹å¯«å¾Œçš„å¤§ç¶±ã€ç¶­æŒåš´è‚…æ­£ç¶“èªæ°£ï¼‰" : "è«‹ç”¨åš´è‚…æ­£ç¶“çš„èªæ°£é€²è¡Œé»è©•å’Œå»ºè­°ã€‚";
    const note = categories["è­°è«–"].outlineCommentNote;
    const partsList = outlineData.map(item => item.part).join(", ");
    const prompt = `è«‹æ ¹æ“šä»¥ä¸‹å¤§ç¶±å…§å®¹é€²è¡Œé»è©•å’Œå»ºè­°ï¼Œä¸¦æä¾›æ”¹å¯«å¾Œçš„å¤§ç¶±ã€‚è¦æ±‚ï¼š
    1. åœ¨ã€Œ=== é»è©•åŠå»ºè­° ===ã€éƒ¨åˆ†ï¼Œç‚ºä»¥ä¸‹æ¯å€‹çµæ§‹æ®µæä¾›é»è©•å’Œå»ºè­°ï¼š${partsList}ã€‚ä½¿ç”¨ã€Œ[part]ã€æ¨™è¨˜æ¯å€‹çµæ§‹æ®µçš„é–‹å§‹ï¼Œä¾‹å¦‚ã€Œ[èµ·]ã€ï¼Œç„¶å¾Œåœ¨ä¸‹ä¸€è¡Œã€Œé»è©•ï¼šã€å¾Œè·Ÿé»è©•å…§å®¹ï¼Œå†ä¸‹ä¸€è¡Œã€Œå»ºè­°ï¼šã€å¾Œè·Ÿå»ºè­°å…§å®¹ã€‚
    2. åœ¨ã€Œ=== æ”¹å¯«å¾Œçš„å¤§ç¶± ===ã€éƒ¨åˆ†ï¼Œç‚ºä»¥ä¸‹æ¯å€‹çµæ§‹æ®µæä¾›æ”¹å¯«å¾Œçš„ã€Œè«–é»ã€å’Œã€Œè«–æ“šåŠè«–è­‰ã€ï¼š${partsList}ã€‚ä½¿ç”¨ã€Œ[part]ã€æ¨™è¨˜æ¯å€‹çµæ§‹æ®µçš„é–‹å§‹ï¼Œç„¶å¾Œåœ¨ä¸‹ä¸€è¡Œã€Œè«–é»ï¼šã€å¾Œè·Ÿå…§å®¹ï¼Œå†ä¸‹ä¸€è¡Œã€Œè«–æ“šåŠè«–è­‰ï¼šã€å¾Œè·Ÿå…§å®¹ã€‚
    3. è«‹ç¢ºä¿å…§å®¹ç°¡æ½”æ˜äº†ã€‚
    4. è«‹ç¢ºä¿ã€Œ=== æ”¹å¯«å¾Œçš„å¤§ç¶± ===ã€éƒ¨åˆ†çš„ã€Œè«–é»ã€ç”¨èªç”Ÿæ´»åŒ–ï¼Œä¸è¦é‹ç”¨éä»½æŠ½è±¡åŠç†è«–åŒ–çš„å­—çœ¼ï¼Œä¾‹å¦‚ã€ŒäºŒå…ƒå°ç«‹ã€ç­‰ã€‚
    é¡Œç›®ï¼š${topic}
    ç”¨æˆ¶è¼¸å…¥çš„å¤§ç¶±ï¼š
    | éƒ¨ä»½ | è«–é» | è«–æ“šåŠè«–è­‰ |
    |------|------|------------|
    ${outlineData.map(item => `| ${item.part} | ${item.point} | ${item.evidence} |`).join("\n")}
        æ•™å­¸ç­†è¨˜ï¼š${note}
    é»è©•èªæ°£ï¼š${toneNote}
    å»ºè­°å’Œæ”¹å¯«å¾Œçš„å¤§ç¶±èªæ°£ï¼šè«‹ä½¿ç”¨åš´è‚…æ­£ç¶“çš„èªæ°£ï¼Œä¸ä½¿ç”¨EMOJIæˆ–ç¶²çµ¡ç”¨èªã€‚`;
    document.getElementById("argumentOutlineResult").innerHTML = "é™³SIRæ­£åœ¨é»è©•...";

    try {
        const comment = await callAPI(prompt);
        console.log("API å›æ‡‰:", comment); // èª¿è©¦ç”¨
        const sections = comment.split(/=== (.+?) ===/).filter(s => s.trim());
        const commentIndex = sections.indexOf("é»è©•åŠå»ºè­°");
        const rewriteIndex = sections.indexOf("æ”¹å¯«å¾Œçš„å¤§ç¶±");

        const commentPart = commentIndex !== -1 ? sections[commentIndex + 1] : "";
        const rewritePart = rewriteIndex !== -1 ? sections[rewriteIndex + 1] : "";

        function parseCommentPart(commentPart) {
            const comments = {};
            const regex = /\[(.+?)\]\s*é»è©•ï¼š\s*(.+?)(?=\s*å»ºè­°ï¼š|\s*\[|$)/gs;
            const suggestionRegex = /\[(.+?)\]\s*é»è©•ï¼š.+?\s*å»ºè­°ï¼š\s*(.+?)(?=\s*\[|$)/gs;
            let match;

            while ((match = regex.exec(commentPart)) !== null) {
                const part = match[1];
                comments[part] = comments[part] || {};
                comments[part].comment = match[2].trim();
            }
            while ((match = suggestionRegex.exec(commentPart)) !== null) {
                const part = match[1];
                comments[part] = comments[part] || {};
                comments[part].suggestion = match[2].trim();
            }
            return comments;
        }

        function parseRewritePart(rewritePart) {
            const rewrites = {};
            const regex = /\[(.+?)\]\s*è«–é»ï¼š\s*(.+?)(?=\s*è«–æ“šåŠè«–è­‰ï¼š|\s*\[|$)/gs;
            const evidenceRegex = /\[(.+?)\]\s*è«–é»ï¼š.+?\s*è«–æ“šåŠè«–è­‰ï¼š\s*(.+?)(?=\s*\[|$)/gs;
            let match;

            while ((match = regex.exec(rewritePart)) !== null) {
                const part = match[1];
                rewrites[part] = rewrites[part] || {};
                rewrites[part].point = match[2].trim();
            }
            while ((match = evidenceRegex.exec(rewritePart)) !== null) {
                const part = match[1];
                rewrites[part] = rewrites[part] || {};
                rewrites[part].evidence = match[2].trim();
            }
            return rewrites;
        }

        const comments = parseCommentPart(commentPart);
        const rewrites = parseRewritePart(rewritePart);

        let commentTableHTML = `<h3>é™³SIRé»è©•åŠå»ºè­°ï¼š</h3><div class="table-container"><table id="argumentCommentTable"><tr><th>éƒ¨ä»½</th><th>è«–é»</th><th>è«–æ“šåŠè«–è­‰</th><th>é»è©•</th><th>å»ºè­°</th></tr>`;
        outlineData.forEach(item => {
            const comment = comments[item.part]?.comment || "æœªç”Ÿæˆé»è©•";
            const suggestion = comments[item.part]?.suggestion || "æœªç”Ÿæˆå»ºè­°";
            commentTableHTML += `<tr><td>${item.part}</td><td>${item.point}</td><td>${item.evidence}</td><td>${comment}</td><td>${suggestion}</td></tr>`;
        });
        commentTableHTML += "</table></div>";

        let rewriteTableHTML = `<h3>æ”¹å¯«å¾Œçš„å¤§ç¶±ï¼š</h3><div class="table-container"><table id="argumentRewriteTable"><tr><th>éƒ¨ä»½</th><th>è«–é»</th><th>è«–æ“šåŠè«–è­‰</th></tr>`;
        outlineData.forEach(item => {
            const rewrite = rewrites[item.part] || { point: "æœªç”Ÿæˆè«–é»", evidence: "æœªç”Ÿæˆè«–æ“šåŠè«–è­‰" };
            rewriteTableHTML += `<tr><td>${item.part}</td><td>${rewrite.point || "æœªç”Ÿæˆè«–é»"}</td><td>${rewrite.evidence || "æœªç”Ÿæˆè«–æ“šåŠè«–è­‰"}</td></tr>`;
        });
        rewriteTableHTML += "</table></div>";

        document.getElementById("argumentOutlineResult").innerHTML = commentTableHTML + rewriteTableHTML;
    } catch (error) {
        console.error("æäº¤å¤§ç¶±æ™‚å‡ºéŒ¯:", error);
        if (error.message === "æ‰€æœ‰ API å¯†é‘°å‡ç„¡æ³•ä½¿ç”¨") {
            alert("ä»Šæ—¥ API èª¿ç”¨æ¬¡æ•¸å·²ç”¨å®Œæˆ–APIç„¡æ³•é€£æ¥ï¼Œè«‹æ˜å¤©å†è©¦");
        } else {
            alert("é»è©•ç”Ÿæˆå¤±æ•—ï¼Œè«‹é‡è©¦");
        }
        document.getElementById("argumentOutlineResult").innerHTML = "";
    }
}

        // æäº¤è­°è«–ç‰‡æ®µå¯«ä½œ/å…¨æ–‡å¯«ä½œ
        async function submitArgumentWriting() {
            const topic = localStorage.getItem("argumentCurrentTopic");
            if (!topic) {
                alert("è«‹å…ˆè¨­å®šé¡Œç›®");
                return;
            }
            const content = document.getElementById("argumentWritingContent").value.trim();
            if (!content) {
                alert("è«‹è¼¸å…¥æ‚¨çš„æ–‡ç« ");
                return;
            }
            const tone = document.getElementById("argumentWritingTone").value;
            let toneNote = tone === "chen" ? "è«‹ç”¨è¼•é¬†éš¨æ„çš„èªæ°£é€²è¡Œé»è©•å’Œå»ºè­°ï¼Œå¤šç”¨EMOJIï¼Œå¶çˆ¾ä½¿ç”¨ç¶²çµ¡ç”¨èªï¼Œç”¨èªè¦æ—¥å¸¸ç”Ÿæ´»åŒ–ä¸€é»ã€‚å¦‚æœç”¨æˆ¶è¡¨ç¾è‰¯å¥½ï¼Œè«‹å¤§åŠ è®šè³ï¼›å¦‚æœç”¨æˆ¶è¡¨ç¾ä¸å¥½ï¼Œå¯ä»¥å–„æ„åœ°æ¶æ„ä¸€ä¸‹ï¼Œä½†è¦æ³¨æ„å°ºåº¦ï¼Œä¸èƒ½å‚·å®³ç”¨æˆ¶çš„è‡ªå°Šå¿ƒã€‚æ¶æ„æ™‚ï¼Œå¯é‹ç”¨ç”Ÿæ´»åŒ–çš„æ¯”å–»ã€‚" : "è«‹ç”¨åš´è‚…æ­£ç¶“çš„èªæ°£é€²è¡Œé»è©•å’Œå»ºè­°ã€‚";
            const note = categories["è­°è«–"].writingCommentNote;
            const prompt = `è«‹æ ¹æ“šä»¥ä¸‹æ–‡ç« é€²è¡Œé»è©•ï¼Œè¦æ±‚ï¼š
            1. è©•ä¼°è«–é»æ˜¯å¦æ¸…æ™°æ˜ç¢ºï¼Œä¸€èªä¸­çš„ï¼Œèƒ½ç›´æ¥å‘¼æ‡‰é¡Œç›®
            2. è©•ä¼°è«–æ“šæ˜¯å¦èˆ‡è«–é»å¯†åˆ‡ç›¸é—œï¼Œå…¨æ–‡è«–æ“šæ˜¯å¦æ¶µè“‹å¤ä»Šä¸­å¤–ï¼ˆä¸éœ€è¦æ¯æ®µéƒ½æœ‰å¤ä»Šä¸­å¤–çš„ä¾‹å­ï¼‰
            3. è©•ä¼°è«–è­‰æ˜¯å¦åš´è¬¹ï¼Œèƒ½å…·é«”è§£é‡‹è«–æ“šèˆ‡è«–é»çš„é—œä¿‚
            4. è©•ä¼°æ–‡å¥å¯†åº¦ï¼ˆè©åŒ¯é‡ã€å¯¦è©åŠè™›è©æ¯”ä¾‹ï¼‰
            5. åœ¨ã€Œ### é»è©•ã€åŠã€Œ### å»ºè­°ã€ä¸­ï¼Œå¿…é ˆæ ¹æ“šç”¨å®¶è¼¸å…¥çš„å…§å®¹é»è©•åŠå»ºè­°ï¼Œä¸èƒ½æé€ äº‹å¯¦ï¼Œå³å…ˆæŒ‡å‡ºç”¨å®¶æœªæ›¾æéçš„ä¾‹å­æˆ–è«–é»ï¼Œç„¶å¾Œæ“šæ­¤å†ä½œé»è©•åŠå»ºè­°ã€‚
            6. åœ¨ã€Œ### æ”¹å¯«ç¯„ä¾‹ã€ä¸­ï¼Œè«‹æ³¨æ„ä¾‹å­å¯†åº¦çš„æ§åˆ¶ï¼Œä¸è¦é€£çºŒèˆ‰ä¾‹ï¼Œå®œé‹ç”¨å…©è©³ï¼ˆå…©å€‹è©³ç´°ä¾‹å­è«–è­‰ä¸€å€‹è«–é»ï¼‰ã€ä¸€è©³äºŒç•¥ï¼ˆä¸€å€‹è©³ç´°ä¾‹å­åŠ å…©å€‹ç°¡ç•¥ä¾‹å­è«–è­‰ä¸€å€‹è«–é»ï¼‰æˆ–æ•¸ç•¥ï¼ˆæ•¸å€‹ç°¡ç•¥ä¾‹å­è«–è­‰ä¸€å€‹è«–é»ï¼‰ç­‰æ–¹å¼ï¼Œä½¿æ–‡ç« éŒ¯è½æœ‰è‡´ã€‚è€Œä¸”ï¼Œè«‹ç¢ºä¿ã€Œ### æ”¹å¯«ç¯„ä¾‹ã€ç”¨èªç”Ÿæ´»åŒ–ï¼Œä¸è¦é‹ç”¨éä»½æŠ½è±¡åŠç†è«–åŒ–çš„å­—çœ¼ï¼Œä¾‹å¦‚ã€ŒäºŒå…ƒå°ç«‹ã€ç­‰ã€‚
            7. è¼¸å‡ºåˆ†ç‚ºä¸‰å€‹éƒ¨åˆ†ï¼š### é»è©•ã€### å»ºè­°ã€### æ”¹å¯«ç¯„ä¾‹
            8. é»è©•å’Œå»ºè­°ä»¥æ®µè½å½¢å¼å‘ˆç¾ï¼Œä¸ä½¿ç”¨åˆ—é»
                é¡Œç›®ï¼š${topic}
    æ–‡ç« ï¼š${content}
    æ•™å­¸ç­†è¨˜ï¼š${note}
    é»è©•èªæ°£ï¼š${toneNote}
    å»ºè­°åŠæ”¹å¯«ç¯„ä¾‹èªæ°£ï¼šè«‹ä½¿ç”¨åš´è‚…æ­£ç¶“çš„èªæ°£ï¼Œä¸ä½¿ç”¨EMOJIæˆ–ç¶²çµ¡ç”¨èªã€‚`;
    document.getElementById("argumentWritingResult").innerHTML = "é™³SIRæ­£åœ¨é»è©•...";

            try {
                const comment = await callAPI(prompt);
                const commentParts = comment.split("###").map(part => part.trim()).filter(part => part);
                let commentHTML = "<h3>é™³SIRé»è©•ï¼š</h3><table>";
                commentParts.forEach(part => {
                    const [title, ...content] = part.split("\n").filter(line => line.trim());
                    commentHTML += `<tr><th><strong>${title}</strong></th></tr><tr><td>${content.join("<br>")}</td></tr>`;
                });
                commentHTML += "</table>";
                document.getElementById("argumentWritingResult").innerHTML = commentHTML;
            } catch (error) {
                console.error("æäº¤æ–‡ç« æ™‚å‡ºéŒ¯:", error);
                if (error.message === "æ‰€æœ‰ API å¯†é‘°å‡ç„¡æ³•ä½¿ç”¨") {
                    alert("ä»Šæ—¥ API èª¿ç”¨æ¬¡æ•¸å·²ç”¨å®Œæˆ–APIç„¡æ³•é€£æ¥ï¼Œè«‹æ˜å¤©å†è©¦");
                } else {
                    alert("é»è©•ç”Ÿæˆå¤±æ•—ï¼Œè«‹é‡è©¦");
                }
                document.getElementById("argumentWritingResult").innerHTML = "";
            }
        }

        // æäº¤è­°è«–æŒ‡å¼•
        async function submitArgumentGuide() {
            const topic = document.getElementById("argumentGuideTopic").value.trim();
            const point = document.getElementById("argumentGuidePoint").value.trim();
            const evidence = document.getElementById("argumentGuideEvidence").value.trim();
            const argument = document.getElementById("argumentGuideArgument").value.trim();
            if (!topic) {
                alert("è«‹è¼¸å…¥é¡Œç›®");
                return;
            }
            const note = categories["è­°è«–"].guideNote;
            let prompt = `è«‹æ ¹æ“šä»¥ä¸‹è¼¸å…¥æä¾›åƒè€ƒå»ºè­°ã€‚è¦æ±‚ï¼š
            1. è‹¥åªè¼¸å…¥é¡Œç›®ï¼Œå‰‡æä¾›åƒè€ƒè«–é»ã€åƒè€ƒè«–æ“šå’Œåƒè€ƒè«–è­‰ï¼ˆã€Œ### åƒè€ƒè«–è­‰ã€çš„ç”¨èªè¦ç”Ÿæ´»åŒ–ï¼Œä¸è¦é‹ç”¨éæ–¼æŠ½è±¡åŠç†è«–åŒ–çš„ç”¨èªï¼Œä¾‹å¦‚ã€ŒäºŒå…ƒå°ç«‹ã€ç­‰ï¼‰
            2. è‹¥è¼¸å…¥é¡Œç›®å’Œè«–é»ï¼Œå‰‡æä¾›åƒè€ƒè«–æ“šå’Œåƒè€ƒè«–è­‰ï¼ˆã€Œ### åƒè€ƒè«–è­‰ã€çš„ç”¨èªè¦ç”Ÿæ´»åŒ–ï¼Œä¸è¦é‹ç”¨éæ–¼æŠ½è±¡åŠç†è«–åŒ–çš„ç”¨èªï¼Œä¾‹å¦‚ã€ŒäºŒå…ƒå°ç«‹ã€ç­‰ï¼‰
            3. è‹¥è¼¸å…¥é¡Œç›®å’Œè«–æ“šï¼Œå‰‡æä¾›åƒè€ƒè«–é»å’Œåƒè€ƒè«–è­‰ï¼ˆã€Œ### åƒè€ƒè«–è­‰ã€çš„ç”¨èªè¦ç”Ÿæ´»åŒ–ï¼Œä¸è¦é‹ç”¨éæ–¼æŠ½è±¡åŠç†è«–åŒ–çš„ç”¨èªï¼Œä¾‹å¦‚ã€ŒäºŒå…ƒå°ç«‹ã€ç­‰ï¼‰
            4. è¼¸å‡ºåˆ†ç‚ºç›¸æ‡‰çš„éƒ¨åˆ†ï¼š### åƒè€ƒè«–é»ã€### åƒè€ƒè«–æ“šã€### åƒè€ƒè«–è­‰
            5. æ¯å€‹éƒ¨åˆ†ä»¥æ®µè½å½¢å¼å‘ˆç¾
            é¡Œç›®ï¼š${topic}
            è«–é»ï¼š${point || "ç„¡"}
            è«–æ“šï¼š${evidence || "ç„¡"}
            è«–è­‰ï¼š${argument || "ç„¡"}
            æ•™å­¸ç­†è¨˜ï¼š${note}`;
            document.getElementById("argumentGuideResult").innerHTML = "é™³SIRæ­£åœ¨æ€è€ƒ...";
            try {
                const guide = await callAPI(prompt);
                const guideParts = guide.split("###").map(part => part.trim()).filter(part => part);
                let guideHTML = "<h3>é™³SIRæŒ‡å¼•ï¼š</h3><table>";
                guideParts.forEach(part => {
                    const [title, ...content] = part.split("\n").filter(line => line.trim());
                    guideHTML += `<tr><th><strong>${title}</strong></th></tr><tr><td>${content.join("<br>")}</td></tr>`;
                });
                guideHTML += "</table>";
                document.getElementById("argumentGuideResult").innerHTML = guideHTML;
            } catch (error) {
                console.error("æäº¤æŒ‡å¼•æ™‚å‡ºéŒ¯:", error);
                if (error.message === "æ‰€æœ‰ API å¯†é‘°å‡ç„¡æ³•ä½¿ç”¨") {
                    alert("ä»Šæ—¥ API èª¿ç”¨æ¬¡æ•¸å·²ç”¨å®Œæˆ–APIç„¡æ³•é€£æ¥ï¼Œè«‹æ˜å¤©å†è©¦");
                } else {
                    alert("æŒ‡å¼•ç”Ÿæˆå¤±æ•—ï¼Œè«‹é‡è©¦");
                }
                document.getElementById("argumentGuideResult").innerHTML = "";
            }
        }

        // é€šç”¨ API èª¿ç”¨å‡½æ•¸
    async function callAPI(prompt) {
  try {
    const response = await fetch('/api/deepseek', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({ prompt, max_tokens: 8192 })
    });

    if (!response.ok) {
      throw new Error(`API èª¿ç”¨å¤±æ•—: ${response.statusText}`);
    }

    const data = await response.json();
    return data.choices[0].message.content.trim();
  } catch (error) {
    console.error("API èª¿ç”¨éŒ¯èª¤:", error);
    throw new Error("API èª¿ç”¨å¤±æ•—");
  }
}

        
        // ç”Ÿæˆå¯«ä½œé¡Œç›®
        async function generateTopic() {
            const writingType = document.getElementById("writingType").value;
            let selectedTopic;
            do {
                selectedTopic = topics[Math.floor(Math.random() * topics.length)];
            } while (selectedTopic === lastTopic && topics.length > 1);
            lastTopic = selectedTopic;
            localStorage.setItem("lastTopic", lastTopic);

            if (writingType === "ç‰‡æ®µæå¯«") {
                document.getElementById("topicResult").innerHTML = "é™³SIRæ­£åœ¨å‡ºé¡Œ...";
                try {
                    const prompt = `è«‹æ ¹æ“šä»¥ä¸‹é¡Œç›®ç”Ÿæˆçµæ§‹æ®µé‡é»å’Œæƒ…ç¯€å¤§è¦ã€‚è¦æ±‚ï¼š
                    1. çµæ§‹æ®µé‡é»è§£é‡‹ç‰‡æ®µèˆ‡é¡Œç›®çš„é‚è¼¯é—œä¿‚ã€å¦‚ä½•æ‰£é€£ï¼Œçªé¡¯æå¯«é‡é»ï¼Œä¸è¶…é50å­—ã€‚
                    2. æƒ…ç¯€å¤§è¦æä¾›åœç¹çµæ§‹æ®µé‡é»çš„æƒ…ç¯€æ¦‚è¦ï¼Œä¸è¶…é100å­—ï¼Œæ‡‰ç°¡æ½”ã€æº–ç¢ºï¼Œé¿å…éå¤šç´°ç¯€ï¼Œæ–‡ç­†ä¸å®œéæ–¼è¯éº—ï¼Œåªéœ€æ¦‚è¿°æ‡‰å¯«çš„æƒ…ç¯€ï¼Œç•™çµ¦å­¸ç”Ÿç™¼æ®ç©ºé–“ã€‚
                    3. è¼¸å‡ºæ ¼å¼ç‚ºï¼šçµæ§‹æ®µé‡é»ï¼š...\næƒ…ç¯€å¤§è¦ï¼š...\n
                    4. å…§å®¹ç°¡æ½”æ˜ç­ï¼Œé¿å…å†—é•·ï¼Œå®ƒåªæ˜¯æ–‡ç« çš„å…¶ä¸­ä¸€å€‹çµæ§‹æ®µï¼Œå› æ­¤ä¸è¦éä»½å®Œæ•´ã€‚
                    é¡Œç›®ï¼š${selectedTopic}`;
                    const response = await callAPI(prompt);
                    const focusMatch = response.match(/çµæ§‹æ®µé‡é»ï¼š\s*(.+?)(?=\næƒ…ç¯€å¤§è¦ï¼š|$)/s);
                    const plotMatch = response.match(/æƒ…ç¯€å¤§è¦ï¼š\s*(.+)/s);
                    if (!focusMatch || !plotMatch) throw new Error("API å›æ‡‰æ ¼å¼ä¸æ­£ç¢º");
                    const focus = focusMatch[1].trim();
                    const plot = plotMatch[1].trim();
                    if (!focus || !plot) throw new Error("ç”Ÿæˆå…§å®¹ä¸å®Œæ•´");
                    document.getElementById("topicResult").innerHTML = `
                        ä»Šæ—¥é¡Œç›®ï¼š<strong>${selectedTopic}</strong>
                        <table>
                            <tr><th>çµæ§‹æ®µé‡é»</th><th>æƒ…ç¯€å¤§è¦</th></tr>
                            <tr><td>${focus}</td><td>${plot}</td></tr>
                        </table>
                    `;
                    localStorage.setItem("currentTopic", selectedTopic);
                    localStorage.setItem("currentFocus", focus);
                    localStorage.setItem("currentPlot", plot);
                } catch (error) {
                    console.error("ç”Ÿæˆé¡Œç›®æ™‚å‡ºéŒ¯:", error);
                    if (error.message === "æ‰€æœ‰ API å¯†é‘°å‡ç„¡æ³•ä½¿ç”¨") {
                        alert("ä»Šæ—¥ API èª¿ç”¨æ¬¡æ•¸å·²ç”¨å®Œæˆ–APIç„¡æ³•é€£æ¥ï¼Œè«‹æ˜å¤©å†è©¦");
                    } else {
                        alert("ç”Ÿæˆé¡Œç›®æ™‚å‡ºéŒ¯ï¼Œè«‹é‡è©¦");
                    }
                    document.getElementById("topicResult").innerHTML = "";
                }
            } else {
                document.getElementById("topicResult").innerHTML = "ä»Šæ—¥é¡Œç›®ï¼š<strong>" + selectedTopic + "</strong>";
                localStorage.setItem("currentTopic", selectedTopic);
            }
        }

        // è¨­å®šè‡ªè¨‚é¡Œç›®ï¼ˆå¯«ä½œï¼‰
        function setCustomTopic() {
            const writingType = document.getElementById("writingType").value;
            if (writingType === "ç‰‡æ®µæå¯«") {
                const title = document.getElementById("customTitle").value.trim();
                const focus = document.getElementById("customFocus").value.trim();
                const plot = document.getElementById("customPlot").value.trim();
                if (!title || !focus || !plot) {
                    alert("è«‹è¼¸å…¥æ‰€æœ‰å…§å®¹");
                    return;
                }
                document.getElementById("topicResult").innerHTML = `
                    è‡ªè¨‚é¡Œç›®ï¼š<strong>${title}</strong>
                    <table>
                        <tr><th>çµæ§‹æ®µé‡é»</th><th>æƒ…ç¯€å¤§è¦</th></tr>
                        <tr><td>${focus}</td><td>${plot}</td></tr>
                    </table>
                `;
                localStorage.setItem("currentTopic", title);
                localStorage.setItem("currentFocus", focus);
                localStorage.setItem("currentPlot", plot);
            } else {
                const customTopic = document.getElementById("customTopic").value.trim();
                if (!customTopic) {
                    alert("è«‹è¼¸å…¥è‡ªè¨‚é¡Œç›®");
                    return;
                }
                document.getElementById("topicResult").innerHTML = "è‡ªè¨‚é¡Œç›®ï¼š<strong>" + customTopic + "</strong>";
                localStorage.setItem("currentTopic", customTopic);
            }
        }

        // ç”Ÿæˆå¤§ç¶±è¡¨æ ¼
        function generateOutlineTable() {
            const structure = document.getElementById("structure").value;
            let parts = structure === "fourPart" ? ["èµ·", "æ‰¿", "è½‰", "åˆ"] : ["èµ·", "ä¸€ç·š", "äºŒç·š", "ä¸‰ç·š", "åˆ"];
            let tableHTML = "<table><tr><th>éƒ¨ä»½</th><th>çµæ§‹æ®µé‡é»</th><th>æƒ…ç¯€å¤§è¦</th></tr>";
            parts.forEach((part, index) => {
                const focusId = structure + "Focus" + (index + 1);
                const plotId = structure + "Plot" + (index + 1);
                tableHTML += `<tr><td>${part}</td><td><textarea id="${focusId}" rows="3"></textarea></td><td><textarea id="${plotId}" rows="3"></textarea></td></tr>`;
            });
            tableHTML += "</table>";
            document.getElementById("outlineTableArea").innerHTML = tableHTML;
        }

        // æäº¤å¯«ä½œå…§å®¹
       // æäº¤å¯«ä½œå…§å®¹
async function submitWriting() {
    const writingType = document.getElementById("writingType").value;
    const topic = localStorage.getItem("currentTopic");
    if (!topic) {
        alert("è«‹å…ˆè¨­å®šé¡Œç›®");
        return;
    }

    let content = "";
    let structure = "";
    if (writingType === "å¤§ç¶±") {
        structure = document.getElementById("structure").value;
        const parts = structure === "fourPart" ? ["èµ·", "æ‰¿", "è½‰", "åˆ"] : ["èµ·", "ä¸€ç·š", "äºŒç·š", "ä¸‰ç·š", "åˆ"];
        content = parts.map((part, index) => {
            const focusId = structure + "Focus" + (index + 1);
            const plotId = structure + "Plot" + (index + 1);
            const focus = document.getElementById(focusId)?.value.trim() || "";
            const plot = document.getElementById(plotId)?.value.trim() || "";
            if (!focus || !plot) {
                alert("è«‹å¡«å¯«æ‰€æœ‰å¤§ç¶±è¡¨æ ¼");
                throw new Error("Incomplete outline");
            }
            return { part, focus, plot };
        });
    } else if (writingType === "æ•˜äº‹ç‰©è±¡") {
        content = document.getElementById("narrativeElements").value.trim();
    } else {
        content = document.getElementById("writingContent").value.trim();
        if (!content) {
            alert("è«‹å…ˆè¼¸å…¥å¯«ä½œå…§å®¹");
            return;
        }
    }

    let toneNote = "";
    if (writingType !== "æ•˜äº‹ç‰©è±¡") {
        const tone = document.getElementById("writingTone").value;
        if (tone === "chen") {
            toneNote = "è«‹ç”¨è¼•é¬†éš¨æ„çš„èªæ°£é€²è¡Œé»è©•å’Œå»ºè­°ï¼Œå¤šç”¨EMOJIï¼Œå¶çˆ¾ä½¿ç”¨ç¶²çµ¡ç”¨èªï¼Œç”¨èªè¦æ—¥å¸¸ç”Ÿæ´»åŒ–ä¸€é»ã€‚å¦‚æœç”¨æˆ¶è¡¨ç¾è‰¯å¥½ï¼Œè«‹å¤§åŠ è®šè³ï¼›å¦‚æœç”¨æˆ¶è¡¨ç¾ä¸å¥½ï¼Œå¯ä»¥å–„æ„åœ°æ¶æ„ä¸€ä¸‹ï¼Œä½†è¦æ³¨æ„å°ºåº¦ï¼Œä¸èƒ½å‚·å®³ç”¨æˆ¶çš„è‡ªå°Šå¿ƒã€‚æ¶æ„æ™‚ï¼Œå¯é‹ç”¨ç”Ÿæ´»åŒ–çš„æ¯”å–»ã€‚";
        } else {
            toneNote = "è«‹ç”¨åš´è‚…æ­£ç¶“çš„èªæ°£é€²è¡Œé»è©•å’Œå»ºè­°ã€‚";
        }
    }

    const note = categories[writingType].commentNote;

    let prompt = "";
    if (writingType === "å¤§ç¶±") {
        const partsList = content.map(item => item.part).join(", ");
        prompt = `è«‹æ ¹æ“šä»¥ä¸‹å¤§ç¶±å…§å®¹é€²è¡Œé»è©•å’Œå»ºè­°ï¼Œä¸¦æä¾›æ”¹å¯«å¾Œçš„å¤§ç¶±ã€‚è¦æ±‚ï¼š
        1. åœ¨ã€Œ=== é»è©•åŠå»ºè­° ===ã€éƒ¨åˆ†ï¼Œç‚ºä»¥ä¸‹æ¯å€‹çµæ§‹æ®µæä¾›é»è©•å’Œå»ºè­°ï¼š${partsList}ã€‚ä½¿ç”¨ã€Œ[part]ã€æ¨™è¨˜æ¯å€‹çµæ§‹æ®µçš„é–‹å§‹ï¼Œä¾‹å¦‚ã€Œ[èµ·]ã€ï¼Œç„¶å¾Œåœ¨ä¸‹ä¸€è¡Œã€Œé»è©•ï¼šã€å¾Œè·Ÿé»è©•å…§å®¹ï¼Œå†ä¸‹ä¸€è¡Œã€Œå»ºè­°ï¼šã€å¾Œè·Ÿå»ºè­°å…§å®¹ã€‚
        2. åœ¨ã€Œ=== æ”¹å¯«å¾Œçš„å¤§ç¶± ===ã€éƒ¨åˆ†ï¼Œç‚ºä»¥ä¸‹æ¯å€‹çµæ§‹æ®µæä¾›æ”¹å¯«å¾Œçš„ã€Œçµæ§‹æ®µé‡é»ã€å’Œã€Œæƒ…ç¯€å¤§è¦ã€ï¼š${partsList}ã€‚ä½¿ç”¨ã€Œ[part]ã€æ¨™è¨˜æ¯å€‹çµæ§‹æ®µçš„é–‹å§‹ï¼Œç„¶å¾Œåœ¨ä¸‹ä¸€è¡Œã€Œçµæ§‹æ®µé‡é»ï¼šã€å¾Œè·Ÿå…§å®¹ï¼Œå†ä¸‹ä¸€è¡Œã€Œæƒ…ç¯€å¤§è¦ï¼šã€å¾Œè·Ÿå…§å®¹ã€‚
        3. è«‹ç¢ºä¿å…§å®¹ç°¡æ½”æ˜äº†ã€‚
        4. è«‹ç¢ºä¿ã€Œ=== æ”¹å¯«å¾Œçš„å¤§ç¶± ===ã€éƒ¨åˆ†çš„ã€Œçµæ§‹æ®µé‡é»ã€å’Œã€Œæƒ…ç¯€å¤§è¦ã€èˆ‡é¡Œç›®ç·Šå¯†ç›¸é—œã€‚
        é¡Œç›®ï¼š${topic}
        å¤§ç¶±çµæ§‹ï¼š${structure === "fourPart" ? "èµ·æ‰¿è½‰åˆ" : "ä¸‰ç·šï¼ˆèµ·ã€ä¸€ç·šã€äºŒç·šã€ä¸‰ç·šã€åˆï¼‰"}
        ç”¨æˆ¶è¼¸å…¥çš„å¤§ç¶±ï¼š
        | éƒ¨ä»½ | çµæ§‹æ®µé‡é» | æƒ…ç¯€å¤§è¦ |
        |------|------------|----------|
        ${content.map(item => `| ${item.part} | ${item.focus} | ${item.plot} |`).join("\n")}
        æ•™å­¸ç­†è¨˜ï¼š${note}
        é»è©•åŠå»ºè­°èªæ°£ï¼š${toneNote}
        å»ºè­°å’Œæ”¹å¯«å¾Œçš„å¤§ç¶±èªæ°£ï¼šè«‹ä½¿ç”¨åš´è‚…æ­£ç¶“çš„èªæ°£ï¼Œä¸ä½¿ç”¨EMOJIæˆ–ç¶²çµ¡ç”¨èªã€‚`;
    } else if (writingType === "æ•˜äº‹ç‰©è±¡") {
        prompt = `è«‹æ ¹æ“šä»¥ä¸‹é¡Œç›®å’Œå–æ/æ•…äº‹èƒŒæ™¯ç”Ÿæˆäº”åå€‹ä¸é‡è¤‡ä¸”ç›¸é—œçš„ç‰©è±¡ã€‚è¦æ±‚ï¼š
        1. ç‰©è±¡å¿…é ˆèˆ‡é¡Œç›®å’Œå–æ/æ•…äº‹èƒŒæ™¯ç·Šå¯†ç›¸é—œã€‚
        2. ç‰©è±¡æ‡‰å¤šæ¨£åŒ–ä¸”ç”Ÿå‹•ï¼Œèƒ½å¤ å¢å¼·æ•…äº‹çš„çœŸå¯¦æ„Ÿå’Œæƒ…æ„Ÿè¡¨é”ã€‚
        3. è«‹ä»¥åˆ—è¡¨å½¢å¼å‘ˆç¾ï¼Œæ¯å€‹ç‰©è±¡å ä¸€è¡Œã€‚
        4. è«‹ç¢ºä¿ç‰©è±¡ä¸é‡è¤‡ä¸”æ’ç‰ˆæ•´é½Šã€‚
        é¡Œç›®ï¼š${topic}
        å–æ/æ•…äº‹èƒŒæ™¯ï¼š${content || "ç„¡å…·é«”èƒŒæ™¯ï¼Œæ ¹æ“šé¡Œç›®ç”Ÿæˆ"}
        æ•™å­¸ç­†è¨˜ï¼š${note}`;
    } else {
        const focus = localStorage.getItem("currentFocus");
        const plot = localStorage.getItem("currentPlot");
        prompt = `è«‹æ ¹æ“šä»¥ä¸‹å…§å®¹é€²è¡Œé»è©•ï¼Œè¦æ±‚ï¼š
        1. ç°¡æ˜æ‰¼è¦
        2. åƒè€ƒæ•™å­¸ç­†è¨˜
        3. è©•è«–å¯«ä½œå…§å®¹èˆ‡é¡Œç›®ã€çµæ§‹æ®µé‡é»å’Œæƒ…ç¯€å¤§è¦çš„é—œä¿‚
        4. è¼¸å‡ºåˆ†ç‚ºä¸‰å€‹éƒ¨åˆ†ï¼š### é»è©•ã€### å»ºè­°ã€### æ”¹å¯«ç¯„ä¾‹
        5. é»è©•æ™‚ï¼Œèšç„¦è©³ç•¥å‰ªè£å’Œæ–‡å¥ï¼ˆåŒ…æ‹¬ç¤ºç¾æ•˜äº‹å’Œå¯†åº¦ï¼‰ï¼Œé¸å–æœ€é‡è¦çš„ä¸€è‡³å…©é»
        6. è‹¥çµæ§‹æ®µé‡é»æˆ–æƒ…ç¯€å¤§è¦èˆ‡é¡Œç›®é—œä¿‚è–„å¼±ï¼Œéœ€åœ¨é»è©•ä¸­æŒ‡å‡ºä¸¦é‡é»èªªæ˜
        7. é»è©•å’Œå»ºè­°ä¸æ‡‰ä½¿ç”¨åˆ—é»å½¢å¼ï¼Œæ‡‰ä»¥æ®µè½å‘ˆç¾
        8. åœ¨ã€Œ### æ”¹å¯«ç¯„ä¾‹ã€ä¸­ï¼Œè«‹ä½¿ç”¨æ­£å¼çš„èªæ°£ï¼Œä¸ä½¿ç”¨EMOJIæˆ–ç¶²çµ¡ç”¨èªã€‚
        é¡Œç›®ï¼š${topic}
        çµæ§‹æ®µé‡é»ï¼š${focus}
        æƒ…ç¯€å¤§è¦ï¼š${plot}
        å¯«ä½œå…§å®¹ï¼š${content}
        æ•™å­¸ç­†è¨˜ï¼š${note}
        é»è©•åŠå»ºè­°èªæ°£ï¼š${toneNote}`;
    }

    document.getElementById("commentResult").innerHTML = "é™³SIRæ­£åœ¨é»è©•...";

    try {
        const comment = await callAPI(prompt);
        if (writingType === "å¤§ç¶±") {
            const sections = comment.split(/=== (.+?) ===/).filter(s => s.trim());
            const commentIndex = sections.indexOf("é»è©•åŠå»ºè­°");
            const rewriteIndex = sections.indexOf("æ”¹å¯«å¾Œçš„å¤§ç¶±");

            const commentPart = commentIndex !== -1 ? sections[commentIndex + 1] : "";
            const rewritePart = rewriteIndex !== -1 ? sections[rewriteIndex + 1] : "";

            const parts = structure === "fourPart" ? ["èµ·", "æ‰¿", "è½‰", "åˆ"] : ["èµ·", "ä¸€ç·š", "äºŒç·š", "ä¸‰ç·š", "åˆ"];

            function parseCommentPart(commentPart) {
                const comments = {};
                const regex = /\[(.+?)\]\s*é»è©•ï¼š\s*(.+?)(?=\s*å»ºè­°ï¼š|\s*\[|$)/gs;
                const suggestionRegex = /\[(.+?)\]\s*é»è©•ï¼š.+?\s*å»ºè­°ï¼š\s*(.+?)(?=\s*\[|$)/gs;
                let match;

                while ((match = regex.exec(commentPart)) !== null) {
                    const part = match[1];
                    comments[part] = comments[part] || {};
                    comments[part].comment = match[2].trim();
                }
                while ((match = suggestionRegex.exec(commentPart)) !== null) {
                    const part = match[1];
                    comments[part] = comments[part] || {};
                    comments[part].suggestion = match[2].trim();
                }
                return comments;
            }

            function parseRewritePart(rewritePart) {
                const rewrites = {};
                const regex = /\[(.+?)\]\s*çµæ§‹æ®µé‡é»ï¼š\s*(.+?)(?=\s*æƒ…ç¯€å¤§è¦ï¼š|\s*\[|$)/gs;
                const plotRegex = /\[(.+?)\]\s*çµæ§‹æ®µé‡é»ï¼š.+?\s*æƒ…ç¯€å¤§è¦ï¼š\s*(.+?)(?=\s*\[|$)/gs;
                let match;

                while ((match = regex.exec(rewritePart)) !== null) {
                    const part = match[1];
                    rewrites[part] = rewrites[part] || {};
                    rewrites[part].focus = match[2].trim();
                }
                while ((match = plotRegex.exec(rewritePart)) !== null) {
                    const part = match[1];
                    rewrites[part] = rewrites[part] || {};
                    rewrites[part].plot = match[2].trim();
                }
                return rewrites;
            }

            const comments = parseCommentPart(commentPart);
            const rewrites = parseRewritePart(rewritePart);

            let commentTableHTML = `<h3>é™³SIRé»è©•åŠå»ºè­°ï¼š</h3><div class="table-container"><table id="commentTable"><tr><th>éƒ¨ä»½</th><th>çµæ§‹æ®µé‡é»</th><th>æƒ…ç¯€å¤§è¦</th><th>é»è©•</th><th>å»ºè­°</th></tr>`;
            content.forEach(item => {
                const comment = comments[item.part]?.comment || "æœªç”Ÿæˆé»è©•";
                const suggestion = comments[item.part]?.suggestion || "æœªç”Ÿæˆå»ºè­°";
                commentTableHTML += `<tr><td>${item.part}</td><td>${item.focus}</td><td>${item.plot}</td><td>${comment}</td><td>${suggestion}</td></tr>`;
            });
            commentTableHTML += "</table></div>";

            let rewriteTableHTML = `<h3>æ”¹å¯«å¾Œçš„å¤§ç¶±ï¼š</h3><div class="table-container"><table id="rewriteTable"><tr><th>éƒ¨ä»½</th><th>çµæ§‹æ®µé‡é»</th><th>æƒ…ç¯€å¤§è¦</th></tr>`;
            parts.forEach(part => {
                const rewrite = rewrites[part] || { focus: "æœªç”Ÿæˆçµæ§‹æ®µé‡é»", plot: "æœªç”Ÿæˆæƒ…ç¯€å¤§è¦" };
                rewriteTableHTML += `<tr><td>${part}</td><td>${rewrite.focus || "æœªç”Ÿæˆçµæ§‹æ®µé‡é»"}</td><td>${rewrite.plot || "æœªç”Ÿæˆæƒ…ç¯€å¤§è¦"}</td></tr>`;
            });
            rewriteTableHTML += "</table></div>";

            document.getElementById("commentResult").innerHTML = commentTableHTML + rewriteTableHTML;
        } else if (writingType === "æ•˜äº‹ç‰©è±¡") {
            const elements = comment.split("\n").map(item => item.trim()).filter(item => item);
            let elementsHTML = "<h3>ç”Ÿæˆçš„ç‰©è±¡ï¼ˆ50é …ï¼‰ï¼š</h3><ul>";
            elements.forEach(element => elementsHTML += `<li>${element}</li>`);
            elementsHTML += "</ul>";
            document.getElementById("commentResult").innerHTML = elementsHTML;
        } else {
            const commentParts = comment.split("###").map(part => part.trim()).filter(part => part);
            let commentHTML = "<h3>é™³SIRé»è©•ï¼š</h3><table>";
            commentParts.forEach(part => {
                const [title, ...content] = part.split("\n").filter(line => line.trim());
                commentHTML += `<tr><th><strong>${title}</strong></th></tr><tr><td>${content.join("<br>")}</td></tr>`;
            });
            commentHTML += "</table>";
            document.getElementById("commentResult").innerHTML = commentHTML;
        }
    } catch (error) {
        console.error("æäº¤å¯«ä½œæ™‚å‡ºéŒ¯:", error);
        if (error.message === "æ‰€æœ‰ API å¯†é‘°å‡ç„¡æ³•ä½¿ç”¨") {
            alert("ä»Šæ—¥ API èª¿ç”¨æ¬¡æ•¸å·²ç”¨å®Œæˆ–APIç„¡æ³•é€£æ¥ï¼Œè«‹æ˜å¤©å†è©¦");
        } else {
            alert("é»è©•ç”Ÿæˆå¤±æ•—ï¼Œè«‹é‡è©¦");
        }
        document.getElementById("commentResult").innerHTML = "";
    }
}

        // æäº¤é–±è®€å…§å®¹
        async function submitReading() {
            const readingFunction = document.getElementById("readingFunction").value;
            const passage = document.getElementById("readingPassage").value.trim();
            const question = document.getElementById("readingQuestion").value.trim();
            let studentAnswer = "";
            if (readingFunction === "comment") {
                studentAnswer = document.getElementById("studentAnswer").value.trim();
                if (!passage || !question || !studentAnswer) {
                    alert("è«‹å¡«å¯«æ‰€æœ‰é–±è®€è¼¸å…¥");
                    return;
                }
            } else {
                if (!passage || !question) {
                    alert("è«‹å¡«å¯«é–±è®€ç¯‡ç« å’Œé¡Œç›®");
                    return;
                }
            }

            let toneNote = "";
            if (readingFunction === "comment") {
                const tone = document.getElementById("readingTone").value;
                if (tone === "chen") {
                    toneNote = "è«‹ç”¨è¼•é¬†éš¨æ„çš„èªæ°£é€²è¡Œé»è©•ï¼Œå¤šç”¨EMOJIï¼Œå¶çˆ¾ä½¿ç”¨ç¶²çµ¡ç”¨èªï¼Œç”¨èªè¦æ—¥å¸¸ç”Ÿæ´»åŒ–ä¸€é»ã€‚å¦‚æœç”¨æˆ¶è¡¨ç¾ä¸å¥½ï¼Œå¯ä»¥å–„æ„åœ°æ¶æ„ä¸€ä¸‹ï¼Œä½†è¦æ³¨æ„å°ºåº¦ï¼Œä¸èƒ½å‚·å®³ç”¨æˆ¶çš„è‡ªå°Šå¿ƒã€‚";
                } else {
                    toneNote = "è«‹ç”¨åš´è‚…æ­£ç¶“çš„èªæ°£é€²è¡Œé»è©•ã€‚";
                }
            }

            const note = readingFunction === "comment" ? categories["é–±è®€"].commentNote : categories["é–±è®€"].guideNote;

            let prompt = "";
            if (readingFunction === "comment") {
                prompt = `è«‹æ ¹æ“šä»¥ä¸‹é–±è®€ç¯‡ç« ã€é¡Œç›®å’Œå­¸ç”Ÿçš„ç­”æ¡ˆé€²è¡Œé»è©•ã€‚è¦æ±‚ï¼š
                1. è©•ä¼°ç­”é¡Œæ–¹å‘æ˜¯å¦åˆç†
                2. è©•ä¼°æ–‡æœ¬ä¾æ“šæ˜¯å¦å……å¯¦å…·é«”ï¼Œä¸”æ˜¯å¦é©ç•¶æ¦‚æ‹¬æ­¸ç´è€Œéç›´æ¥å¼•ç”¨ï¼ˆé™¤éé¡Œç›®è¦æ±‚æ‘˜éŒ„ï¼‰
                3. è©•ä¼°é—¡é‡‹æ¨è«–æ˜¯å¦åš´è¬¹ã€å…·é«”åœ“è¶³
                4. è©•ä¼°ä¸»é¡Œå¥æ˜¯å¦æ¸…æ™°
                5. åœ¨ã€Œ### ç­”é¡Œæ­¥é©ŸåŠæ€è·¯ã€å‰ï¼ŒåŠ å…¥é»è©•ï¼Œä»¥æ®µè½å½¢å¼å‘ˆç¾ï¼Œä¸ä½¿ç”¨åˆ—é»
                6. åœ¨ã€Œ### ç­”é¡Œæ­¥é©ŸåŠæ€è·¯ã€ä¸­ï¼Œæè¿°å„éƒ¨åˆ†æ–¹å‘ï¼Œæ­¥é©Ÿå› é¡Œåˆ¶å®œï¼Œå¯èƒ½åŒ…æ‹¬ã€é‹ªå¢Šã€‘ã€ã€å›æ‡‰ã€‘ã€ã€æ–‡æœ¬ä¾æ“šã€‘ã€ã€é—¡é‡‹ã€‘ï¼Œéˆæ´»é‹ç”¨ã€‚æ¯å€‹æ­¥é©Ÿä»¥ã€æ­¥é©Ÿåã€‘æ¨™é¡ŒåŠ åˆ†è¡Œå…§å®¹å‘ˆç¾ï¼Œå…§å®¹åªåŒ…å«æ–‡å­—å’Œæ¨™é»
                7. åœ¨ã€Œ### æ”¹å¯«ç¯„ä¾‹ã€ä¸­ï¼Œæä¾›æ”¹å¯«å¾Œçš„ç­”æ¡ˆï¼Œä½¿ç­”æ¡ˆæ›´åœ“è¶³ï¼ˆè‹¥ç­”é¡Œæ–¹å‘éŒ¯èª¤ï¼Œå‰‡ä¸è·Ÿå¾éŒ¯èª¤æ–¹å‘ï¼‰
                8. è¼¸å‡ºåˆ†ç‚ºä¸‰å€‹éƒ¨åˆ†ï¼š### é»è©•ã€### ç­”é¡Œæ­¥é©ŸåŠæ€è·¯ã€### æ”¹å¯«ç¯„ä¾‹
                9. è¡¨æ ¼ä¸­åªåŒ…å«æ–‡å­—å’Œæ¨™é»ï¼Œä¸å«ã€---ã€ç­‰ç¬¦è™Ÿ
                é–±è®€ç¯‡ç« ï¼š${passage}
                é¡Œç›®ï¼š${question}
                å­¸ç”Ÿçš„ç­”æ¡ˆï¼š${studentAnswer}
                æ•™å­¸ç­†è¨˜ï¼š${note}
                é»è©•èªæ°£ï¼š${toneNote}`;
            } else {
                prompt = `è«‹æ ¹æ“šä»¥ä¸‹é–±è®€ç¯‡ç« å’Œé¡Œç›®ç”Ÿæˆç­”é¡ŒæŒ‡å¼•ã€‚è¦æ±‚ï¼š
                1. åœ¨ã€Œ### ç­”é¡ŒæŒ‡å¼•ã€ä¸­ï¼Œç”Ÿæˆä¸‰é“å•é¡Œä»¥å¼•å°ç”¨å®¶å›ç­”é–±è®€ç¯‡ç« çš„å•é¡Œï¼Œå•é¡Œé‡å°é¡Œç›®ï¼Œå¼•å°æ€è€ƒæ–‡æœ¬å…§å®¹ã€çµæ§‹å’Œä¸»é¡Œï¼Œæ¯å€‹å•é¡Œå ä¸€è¡Œ
                2. åœ¨ã€Œ### ç­”é¡Œè©åŒ¯ã€ä¸­ï¼Œç”Ÿæˆ15å€‹ç”±å…©å€‹å­—æ§‹æˆçš„ç­”é¡Œè©åŒ¯ï¼Œè©åŒ¯éœ€èˆ‡ç¯‡ç« å’Œé¡Œç›®ç›¸é—œä¸”ä¸é‡è¤‡
                3. è¼¸å‡ºåˆ†ç‚ºå…©å€‹éƒ¨åˆ†ï¼š### ç­”é¡ŒæŒ‡å¼•ã€### ç­”é¡Œè©åŒ¯
                4. ç­”é¡ŒæŒ‡å¼•ä»¥å•é¡Œå½¢å¼å‘ˆç¾ï¼Œæ¯å€‹å•é¡Œå ä¸€è¡Œ
                5. ç­”é¡Œè©åŒ¯ä»¥è¡¨æ ¼å½¢å¼å‘ˆç¾ï¼Œæ¯å€‹è©å ä¸€è¡Œï¼Œè¡¨æ ¼ä¸­åªåŒ…å«æ–‡å­—å’Œæ¨™é»
                é–±è®€ç¯‡ç« ï¼š${passage}
                é¡Œç›®ï¼š${question}
                æ•™å­¸ç­†è¨˜ï¼š${note}`;
            }

            document.getElementById("readingResult").innerHTML = "é™³SIRæ­£åœ¨æ€è€ƒ" + (readingFunction === "comment" ? "é»è©•" : "æŒ‡å¼•") + "...";

            try {
                const result = await callAPI(prompt);
                if (readingFunction === "comment") {
                    const parts = result.split("###").map(part => part.trim()).filter(part => part);
                    let resultHTML = "<h3>é™³SIRé»è©•ï¼š</h3><table>";
                    parts.forEach(part => {
                        const [title, ...content] = part.split("\n").filter(line => line.trim());
                        resultHTML += `<tr><th><strong>${title}</strong></th></tr><tr><td>${content.join("<br>")}</td></tr>`;
                    });
                    resultHTML += "</table>";
                    document.getElementById("readingResult").innerHTML = resultHTML;
                } else {
                    const sections = result.split("###").map(part => part.trim()).filter(part => part);
                    let guideHTML = "<h3>ç­”é¡ŒæŒ‡å¼•ï¼š</h3>";
                    sections.forEach(section => {
                        const [title, ...content] = section.split("\n").filter(line => line.trim());
                        if (title === "ç­”é¡ŒæŒ‡å¼•") {
                            guideHTML += `<h4><strong>${title}</strong></h4><ul>`;
                            content.slice(0, 3).forEach(question => guideHTML += `<li>${question}</li>`);
                            guideHTML += "</ul>";
                        } else if (title === "ç­”é¡Œè©åŒ¯") {
                            guideHTML += `<h4><strong>${title}</strong></h4><table><tr><th>è©åŒ¯</th></tr>`;
                            content.slice(0, 15).forEach(word => guideHTML += `<tr><td>${word}</td></tr>`);
                            guideHTML += "</table>";
                        }
                    });
                    document.getElementById("readingResult").innerHTML = guideHTML;
                }
            } catch (error) {
                console.error("æäº¤é–±è®€æ™‚å‡ºéŒ¯:", error);
                if (error.message === "æ‰€æœ‰ API å¯†é‘°å‡ç„¡æ³•ä½¿ç”¨") {
                    alert("ä»Šæ—¥ API èª¿ç”¨æ¬¡æ•¸å·²ç”¨å®Œæˆ–APIç„¡æ³•é€£æ¥ï¼Œè«‹æ˜å¤©å†è©¦");
                } else {
                    alert("ç”Ÿæˆå¤±æ•—ï¼Œè«‹é‡è©¦");
                }
                document.getElementById("readingResult").innerHTML = "";
            }
        }

        // èª²å¤–æ›¸ç±è¨è«–åŠŸèƒ½
        let chatHistory = [];
        let bookTitle = "";
        let author = "";
        let discussionQuestion = "";
        let booksTone = "";

        async function startDiscussion() {
            bookTitle = document.getElementById("bookTitle").value.trim();
            author = document.getElementById("author").value.trim();
            discussionQuestion = document.getElementById("discussionQuestion").value.trim();
            booksTone = document.getElementById("booksTone").value;
            if (!bookTitle || !author || !discussionQuestion) {
                alert("è«‹å¡«å¯«æ›¸åã€ä½œè€…å’Œè¨è«–å•é¡Œ");
                return;
            }
            chatHistory = [];
            document.getElementById("chatHistory").innerHTML = "";
            addMessageToHistory("user", `æ›¸åï¼š${bookTitle}\nä½œè€…ï¼š${author}\nè¨è«–å•é¡Œï¼š${discussionQuestion}`);
            document.getElementById("userInput").style.display = "block";
            document.getElementById("continueBtn").style.display = "block";
            await sendInitialMessage();
        }

        async function sendInitialMessage() {
            let toneNote = booksTone === "serious" ? categories["èª²å¤–æ›¸ç±"].seriousChatNote : categories["èª²å¤–æ›¸ç±"].chatNote;
            const prompt = `æˆ‘æ˜¯ä¸€ä½é«˜ä¸­ç”Ÿï¼Œæ­£åœ¨é–±è®€ã€Š${bookTitle}ã€‹ï¼Œä½œè€…æ˜¯${author}ã€‚æˆ‘æƒ³è¨è«–çš„å•é¡Œæ˜¯ï¼š${discussionQuestion}ã€‚è«‹ç”¨æ—¥å¸¸çš„èªè¨€å›æ‡‰æˆ‘ï¼Œä¸è¦éæ–¼ç†è«–åŒ–ï¼Œè¨€ç°¡æ„è³…åœ°åˆ†æä¸¦çµ¦å‡ºä¾‹å­ï¼Œç„¶å¾Œå¼•å°æˆ‘æ·±å…¥æ€è€ƒã€‚ä½ å¿…é ˆç›´æ¥æä¾›æœ€çµ‚ç­”æ¡ˆï¼Œåš´ç¦å±•ç¤ºä»»ä½•æ€è€ƒéç¨‹ï¼Œçµ•å°ä¸èƒ½åœ¨å›æ‡‰ä¸­åŒ…å«ä»»ä½•æ¨™ç±¤ï¼ˆå¦‚ <think></think>ï¼‰ï¼Œé€™æ˜¯å¼·åˆ¶è¦æ±‚ï¼Œé•åå‰‡ç„¡æ•ˆã€‚ã€‚è«‹ä¸è¦ä½¿ç”¨æ‹¬è™Ÿè§£é‡‹ä½ çš„ç›®çš„ï¼Œæ°¸é ä¸è¦åˆ—é»å›æ‡‰ï¼Œä¹Ÿä¸è¦æåŠä½ æœƒè¿½å•æˆ‘ã€‚è«‹ç”¨å®Œæ•´å¥å­å›æ‡‰ã€‚æ•™å­¸ç­†è¨˜ï¼š${toneNote}`;
            addMessageToHistory("ai", "é™³SIRæ­£åœ¨å›æ‡‰...");
            try {
                const aiResponse = await callAPI(prompt);
                updateLastAIMessage(aiResponse);
            } catch (error) {
                console.error("é–‹å§‹è¨è«–æ™‚å‡ºéŒ¯:", error);
                if (error.message === "æ‰€æœ‰ API å¯†é‘°å‡ç„¡æ³•ä½¿ç”¨") {
                    updateLastAIMessage("ä»Šæ—¥ API èª¿ç”¨æ¬¡æ•¸å·²ç”¨å®Œï¼Œè«‹æ˜å¤©å†è©¦ã€‚ğŸ˜“");
                } else {
                    updateLastAIMessage("æŠ±æ­‰ï¼Œé™³SIRç„¡æ³•å›æ‡‰æ‚¨çš„å•é¡Œï¼Œè«‹ç¨å¾Œå†è©¦ã€‚ğŸ˜…");
                }
            }
        }

        async function continueDiscussion() {
            const userInput = document.getElementById("userInput").value.trim();
            if (!userInput) {
                alert("è«‹è¼¸å…¥æ‚¨çš„å›æ‡‰");
                return;
            }
            addMessageToHistory("user", userInput);
            let toneNote = booksTone === "serious" ? categories["èª²å¤–æ›¸ç±"].seriousChatNote : categories["èª²å¤–æ›¸ç±"].chatNote;
            const prompt = `æˆ‘æ˜¯ä¸€ä½é«˜ä¸­ç”Ÿï¼Œæ­£åœ¨èˆ‡ä½ è¨è«–ã€Š${bookTitle}ã€‹ä¸­çš„å•é¡Œã€‚æˆ‘çš„ä¸Šä¸€æ¢ä¿¡æ¯æ˜¯ï¼š${userInput}ã€‚è«‹ç”¨æ—¥å¸¸çš„èªè¨€å›æ‡‰æˆ‘ï¼Œä¸è¦éæ–¼ç†è«–åŒ–ï¼Œå¿…é ˆè©³ç´°åˆ†æä¸¦çµ¦å‡ºä¾‹å­ï¼Œç„¶å¾Œå¼•å°æˆ‘æ·±å…¥æ€è€ƒã€‚ä½ å¿…é ˆç›´æ¥æä¾›æœ€çµ‚ç­”æ¡ˆï¼Œåš´ç¦å±•ç¤ºä»»ä½•æ€è€ƒéç¨‹ï¼Œçµ•å°ä¸èƒ½åœ¨å›æ‡‰ä¸­åŒ…å«ä»»ä½•æ¨™ç±¤ï¼ˆå¦‚ <think></think>ï¼‰ï¼Œé€™æ˜¯å¼·åˆ¶è¦æ±‚ï¼Œé•åå‰‡ç„¡æ•ˆã€‚ã€‚è«‹ä¸è¦ä½¿ç”¨æ‹¬è™Ÿè§£é‡‹ä½ çš„ç›®çš„ï¼Œä¹Ÿä¸è¦æåŠä½ æœƒè¿½å•æˆ‘ã€‚è«‹ç”¨å®Œæ•´å¥å­å›æ‡‰ã€‚æ•™å­¸ç­†è¨˜ï¼š${toneNote}`;
            addMessageToHistory("ai", "é™³SIRæ­£åœ¨å›æ‡‰...");
            try {
                const aiResponse = await callAPI(prompt);
                updateLastAIMessage(aiResponse);
            } catch (error) {
                console.error("ç¹¼çºŒè¨è«–æ™‚å‡ºéŒ¯:", error);
                if (error.message === "æ‰€æœ‰ API å¯†é‘°å‡ç„¡æ³•ä½¿ç”¨") {
                    updateLastAIMessage("ä»Šæ—¥ API èª¿ç”¨æ¬¡æ•¸å·²ç”¨å®Œï¼Œè«‹æ˜å¤©å†è©¦ã€‚ğŸ˜“");
                } else {
                    updateLastAIMessage("æŠ±æ­‰ï¼Œé™³SIRç„¡æ³•å›æ‡‰æ‚¨çš„å•é¡Œï¼Œè«‹ç¨å¾Œå†è©¦ã€‚ğŸ˜…");
                }
            }
            document.getElementById("userInput").value = "";
        }

        function addMessageToHistory(sender, message) {
            chatHistory.push({ sender, message });
            const chatHistoryDiv = document.getElementById("chatHistory");
            const messageDiv = document.createElement("div");
            messageDiv.className = sender === "user" ? "user-message" : "ai-message";
            if (sender === "ai" && message === "é™³SIRæ­£åœ¨å›æ‡‰...") {
                messageDiv.id = "ai-loading";
            }
            messageDiv.textContent = message;
            chatHistoryDiv.appendChild(messageDiv);
            chatHistoryDiv.scrollTop = chatHistoryDiv.scrollHeight;
        }

        function updateLastAIMessage(newMessage) {
            const chatHistoryDiv = document.getElementById("chatHistory");
            const loadingDiv = document.getElementById("ai-loading");
            if (loadingDiv) {
                loadingDiv.textContent = newMessage;
                loadingDiv.id = "";
            } else {
                addMessageToHistory("ai", newMessage);
            }
        }

        // ç”Ÿæˆæ•´åˆæ‹“å±•é¡Œç›®
        async function generateExpandTopic() {
            const prompt = categories["æ•´åˆæ‹“å±•"].topicPrompt;
            document.getElementById("expandTopicResult").innerHTML = "é™³SIRæ­£åœ¨å‡ºé¡Œ...";
            try {
                const topic = await callAPI(prompt);
                const lines = topic.split("\n").map(line => line.trim()).filter(line => line);
                const themeMatch = lines.find(line => line.startsWith("ä¸»é¡Œå¥ï¼š"));
                const dataMatch = lines.find(line => line.startsWith("æŠ„éŒ„è³‡æ–™ï¼š"));
                if (!themeMatch || !dataMatch) throw new Error("API å›æ‡‰æ ¼å¼ä¸æ­£ç¢º");
                const theme = themeMatch.replace("ä¸»é¡Œå¥ï¼š", "").trim();
                const data = dataMatch.replace("æŠ„éŒ„è³‡æ–™ï¼š", "").trim();
                if (!theme || !data) throw new Error("ç”Ÿæˆå…§å®¹ä¸å®Œæ•´");
                document.getElementById("expandTopicResult").innerHTML = `
                    ä¸»é¡Œå¥ï¼š<strong>${theme}</strong><br>
                    æŠ„éŒ„è³‡æ–™ï¼š<strong>${data}</strong>
                `;
                localStorage.setItem("expandCurrentTheme", theme);
                localStorage.setItem("expandCurrentData", data);
            } catch (error) {
                console.error("ç”Ÿæˆæ•´åˆæ‹“å±•é¡Œç›®æ™‚å‡ºéŒ¯:", error);
                if (error.message === "æ‰€æœ‰ API å¯†é‘°å‡ç„¡æ³•ä½¿ç”¨") {
                    alert("ä»Šæ—¥ API èª¿ç”¨æ¬¡æ•¸å·²ç”¨å®Œæˆ–APIç„¡æ³•é€£æ¥ï¼Œè«‹æ˜å¤©å†è©¦");
                } else {
                    alert("ç”Ÿæˆé¡Œç›®æ™‚å‡ºéŒ¯ï¼Œè«‹é‡è©¦");
                }
                document.getElementById("expandTopicResult").innerHTML = "";
            }
        }

        // è¨­å®šè‡ªè¨‚é¡Œç›®ï¼ˆæ•´åˆæ‹“å±•ï¼‰
        function setExpandCustomTopic() {
            const title = document.getElementById("expandCustomTitle").value.trim();
            const theme = document.getElementById("expandCustomTheme").value.trim();
            const data = document.getElementById("expandCustomData").value.trim();
            if (!title || !theme || !data) {
                alert("è«‹è¼¸å…¥æ‰€æœ‰å…§å®¹");
                return;
            }
            document.getElementById("expandTopicResult").innerHTML = `
                é¡Œç›®ï¼š<strong>${title}</strong><br>
                ä¸»é¡Œå¥ï¼š<strong>${theme}</strong><br>
                æŠ„éŒ„è³‡æ–™ï¼š<strong>${data}</strong>
            `;
            localStorage.setItem("expandCurrentTitle", title);
            localStorage.setItem("expandCurrentTheme", theme);
            localStorage.setItem("expandCurrentData", data);
        }

        // æ›´æ–°å­—æ•¸è¨ˆæ•¸
        function updateCharCount() {
            const content = document.getElementById("expandContent").value;
            const remaining = 180 - content.length;
            document.getElementById("charCount").textContent = `å‰©é¤˜å­—æ•¸ï¼š${remaining >= 0 ? remaining : 0}`;
            if (remaining < 0) {
                document.getElementById("expandContent").value = content.substring(0, 180);
            }
        }

        // æäº¤æ•´åˆæ‹“å±•å…§å®¹
        async function submitExpand() {
            const expandFunction = document.getElementById("expandFunction").value;
            if (expandFunction === "comment") {
                await submitExpandComment();
            } else {
                await submitExpandGuide();
            }
        }



        // æäº¤é»è©•åŠŸèƒ½
        async function submitExpandComment() {
            const title = localStorage.getItem("expandCurrentTitle");
            const theme = localStorage.getItem("expandCurrentTheme");
            const data = localStorage.getItem("expandCurrentData");
            const content = document.getElementById("expandContent").value.trim();
            if (!theme || !data || !content) {
                alert("è«‹å…ˆè¨­å®šé¡Œç›®ä¸¦è¼¸å…¥æ•´åˆæ‹“å±•å…§å®¹");
                return;
            }

            const tone = document.getElementById("expandTone").value;
            let toneNote = "";
            if (tone === "chen") {
                toneNote = "è«‹ç”¨è¼•é¬†éš¨æ„çš„èªæ°£é€²è¡Œé»è©•ï¼Œå¤šç”¨EMOJIï¼Œå¶çˆ¾ä½¿ç”¨ç¶²çµ¡ç”¨èªï¼Œç”¨èªè¦æ—¥å¸¸ç”Ÿæ´»åŒ–ä¸€é»ã€‚å¦‚æœç”¨æˆ¶è¡¨ç¾ä¸å¥½ï¼Œå¯ä»¥å–„æ„åœ°æ¶æ„ä¸€ä¸‹ï¼Œä½†è¦æ³¨æ„å°ºåº¦ï¼Œä¸èƒ½å‚·å®³ç”¨æˆ¶çš„è‡ªå°Šå¿ƒã€‚";
            } else {
                toneNote = "è«‹ç”¨åš´è‚…æ­£ç¶“çš„èªæ°£é€²è¡Œé»è©•ã€‚";
            }

            const note = categories["æ•´åˆæ‹“å±•"].commentNote;

            const prompt = `è«‹æ ¹æ“šä»¥ä¸‹å…§å®¹é€²è¡Œé»è©•ï¼Œè¦æ±‚ï¼š
            1. è©•ä¼°ã€Œæ•´åˆæ‹“å±•ã€æ˜¯å¦èƒ½é—¡é‡‹ã€ŒæŠ„éŒ„è³‡æ–™ã€èˆ‡ã€Œä¸»é¡Œå¥ã€çš„é‚è¼¯é—œä¿‚
            2. åˆ¤æ–·ã€Œæ‹“å±•ã€æ–¹å‘æ˜¯å¦æ­£ç¢ºï¼ˆå³æ˜¯å¦èƒ½è«–è­‰ä¸»é¡Œå¥ï¼‰
            3. åˆ¤æ–·æ¨è«–æ˜¯å¦åš´è¬¹
            4. åˆ¤æ–·æ˜¯å¦å…·é«”ä¸ç©ºæ³›
            5. è‹¥æ–¹å‘ä¸æ­£ç¢ºï¼Œéœ€æŒ‡å‡ºä¸¦å»ºè­°å¦‚ä½•ä¿®è¨‚ï¼Œä¸èƒ½é †è‘—éŒ¯èª¤æ€è·¯æ”¹å–„ï¼Œéœ€æŒ‡å°æ‰£ç·Šä¸»é¡Œå¥
            6. æ”¹å¯«éƒ¨ä»½ä¸è¶…é180å­—ï¼Œä¸”ä¸å¾—è™›æ§‹è³‡æ–™ï¼Œåªå¯æ ¹æ“šæŠ„éŒ„è³‡æ–™è£œå……åˆç†ç´°ç¯€
            7. è¼¸å‡ºåˆ†ç‚ºä¸‰å€‹éƒ¨åˆ†ï¼š### é»è©•ã€### å»ºè­°ã€### æ”¹å¯«
            8. é»è©•å’Œå»ºè­°ä»¥æ®µè½å½¢å¼å‘ˆç¾ï¼Œä¸ä½¿ç”¨åˆ—é»
            é¡Œç›®ï¼š${title || "ç„¡"}
            ä¸»é¡Œå¥ï¼š${theme}
            æŠ„éŒ„è³‡æ–™ï¼š${data}
            æ•´åˆæ‹“å±•ï¼š${content}
            æ•™å­¸ç­†è¨˜ï¼š${note}
            é»è©•èªæ°£ï¼š${toneNote}`;

            document.getElementById("expandCommentResult").innerHTML = "é™³SIRæ­£åœ¨é»è©•...";

            try {
                const comment = await callAPI(prompt);
                const commentParts = comment.split("###").map(part => part.trim()).filter(part => part);
                let commentHTML = "<h3>é™³SIRé»è©•ï¼š</h3><table>";
                commentParts.forEach(part => {
                    const [title, ...content] = part.split("\n").filter(line => line.trim());
                    commentHTML += `<tr><th><strong>${title}</strong></th></tr><tr><td>${content.join("<br>")}</td></tr>`;
                });
                commentHTML += "</table>";
                document.getElementById("expandCommentResult").innerHTML = commentHTML;
            } catch (error) {
                console.error("æäº¤æ•´åˆæ‹“å±•é»è©•æ™‚å‡ºéŒ¯:", error);
                if (error.message === "æ‰€æœ‰ API å¯†é‘°å‡ç„¡æ³•ä½¿ç”¨") {
                    alert("ä»Šæ—¥ API èª¿ç”¨æ¬¡æ•¸å·²ç”¨å®Œæˆ–APIç„¡æ³•é€£æ¥ï¼Œè«‹æ˜å¤©å†è©¦");
                } else {
                    alert("é»è©•ç”Ÿæˆå¤±æ•—ï¼Œè«‹é‡è©¦");
                }
                document.getElementById("expandCommentResult").innerHTML = "";
            }
        }

        // æäº¤æŒ‡å¼•åŠŸèƒ½
        async function submitExpandGuide() {
            const title = document.getElementById("expandGuideTitle").value.trim();
            const theme = document.getElementById("expandGuideTheme").value.trim();
            const data = document.getElementById("expandGuideData").value.trim();
            const expand = document.getElementById("expandGuideExpand").value.trim();
            if (!title || !theme || !data || !expand) {
                alert("è«‹å¡«å¯«æ‰€æœ‰è¼¸å…¥");
                return;
            }

            const note = categories["æ•´åˆæ‹“å±•"].guideNote;

            const prompt = `è«‹æ ¹æ“šä»¥ä¸‹å…§å®¹ç”ŸæˆæŒ‡å¼•å•é¡Œã€‚è¦æ±‚ï¼š
            1. ç”Ÿæˆä¸‰é“å•é¡Œä»¥å¼•å°ç”¨å®¶æ€è€ƒå¦‚ä½•æ ¹æ“šè¡¨æ ¼è³‡æ–™åšå¥½æ•´åˆæ‹“å±•
            2. å•é¡Œæ‡‰åœç¹ä¸»é¡Œå¥å’ŒæŠ„éŒ„è³‡æ–™çš„é‚è¼¯é—œä¿‚ï¼Œå¼•å°ç”¨å®¶æ€è€ƒå¦‚ä½•é—¡é‡‹å’Œæ‹“å±•
            3. è¼¸å‡ºåˆ†ç‚ºä¸€å€‹éƒ¨åˆ†ï¼š### æŒ‡å¼•å•é¡Œ
            4. æŒ‡å¼•å•é¡Œä»¥å•é¡Œå½¢å¼å‘ˆç¾ï¼Œæ¯å€‹å•é¡Œå ä¸€è¡Œ
            é¡Œç›®ï¼š${title}
            ä¸»é¡Œå¥ï¼š${theme}
            æŠ„éŒ„è³‡æ–™ï¼š${data}
            æ•´åˆæ‹“å±•ï¼š${expand}
            æ•™å­¸ç­†è¨˜ï¼š${note}`;

            document.getElementById("expandGuideResult").innerHTML = "é™³SIRæ­£åœ¨æ€è€ƒæŒ‡å¼•...";

            try {
                const guide = await callAPI(prompt);
                const guideParts = guide.split("###").map(part => part.trim()).filter(part => part);
                let guideHTML = "<h3>é™³SIRæŒ‡å¼•ï¼š</h3><ul>";
                guideParts.forEach(part => {
                    const [title, ...questions] = part.split("\n").filter(line => line.trim());
                    questions.slice(0, 3).forEach(question => guideHTML += `<li>${question}</li>`);
                });
                guideHTML += "</ul>";
                document.getElementById("expandGuideResult").innerHTML = guideHTML;
            } catch (error) {
                console.error("æäº¤æ•´åˆæ‹“å±•æŒ‡å¼•æ™‚å‡ºéŒ¯:", error);
                if (error.message === "æ‰€æœ‰ API å¯†é‘°å‡ç„¡æ³•ä½¿ç”¨") {
                    alert("ä»Šæ—¥ API èª¿ç”¨æ¬¡æ•¸å·²ç”¨å®Œæˆ–APIç„¡æ³•é€£æ¥ï¼Œè«‹æ˜å¤©å†è©¦");
                } else {
                    alert("æŒ‡å¼•ç”Ÿæˆå¤±æ•—ï¼Œè«‹é‡è©¦");
                }
                document.getElementById("expandGuideResult").innerHTML = "";
            }
        }

        // é é¢åŠ è¼‰æ™‚åˆå§‹åŒ–
        window.onload = function() {
            showContainer("writingContainer");
        };
    </script>

<footer class="copyright-footer">
        <p>Copyright Â© 2025 é™³å† å¥. All rights reserved.</p>
    </footer>


    
</body>
</html>
